Tue Dec 31 18:00:03 2024
-------------------------
CAS V2.15.1-rc1 - (C) Copyright 2000-2012 CHIPMAST TECHNOLOGY CO. LTD.
Main file   : main.asm
Current file: main.asm

     1                        ;********************************************************************************
     2                        ; PROJECT	: Calendar(MC830B)							*
     3                        ; AUTHOR	: WBN										*
     4                        ; REVISION	: 13/9/2024  V1.0	First issue				*
     5                        ; High OSC CLK  : Internal RC 4.4MHz	Fcpu = Fosc/2				*
     6                        ; Function	: 								*
     7                        ;********************************************************************************
     8                        	.CHIP	W65C02S      ;cpu的选型
     9                        	;.INCLIST	ON       ;宏定义和文件
    10                        	.MACLIST	ON
    11                        ;***************************************
    12                        CODE_BEG	EQU		F000H ;C000H(4K*4次)        ;起始地址
    13                        ;***************************************
    14                        
    15                        PROG	SECTION	OFFSET	CODE_BEG                ;定义代码段的偏移量从CODE_BEG开始，用于组织程序代码。
    16                        
    17                        ;***************************************
    18                        ;*	header include                               ;头文件
    19                        ;***************************************
    20                        	.include	50P016.h
     1                        .page0
     2                        .org 	00H
     3                        PA		EQU	01H
     4                        P_PA		EQU	PA
     5                        PAWAKE	EQU	02H
     6                        P_PA_WAKE	EQU	PAWAKE
     7                        PADIR	EQU	04H
     8                        P_PA_DIR	EQU	PADIR
     9                        P_PA_IO		EQU	PADIR
    10                        PB		EQU	05H
    11                        P_PB		EQU	PB
    12                        PBTYPE	EQU	06H
    13                        P_PB_TYPE	EQU	PBTYPE
    14                        PC		EQU	07H
    15                        P_PC 		EQU PC
    16                        PCDIR	EQU	08H
    17                        P_PC_IO 	EQU	PCDIR
    18                        P_PC_DIR	EQU	PCDIR
    19                        PCSEG	EQU	09H	;
    20                        P_PCSEG		EQU	PCSEG
    21                        PD		EQU	0AH
    22                        PDDIR	EQU 0BH
    23                        PADF0	EQU	0CH	;
    24                        P_PADF0		EQU	PADF0
    25                        PADF1	EQU	0DH	;
    26                        IER		EQU	0EH
    27                        P_IER 	EQU IER
    28                        IFR		EQU	0FH
    29                        P_IFR 		EQU IFR
    30                        TMR0	EQU	10H	;
    31                        P_TMR0		EQU	TMR0
    32                        TMR1	EQU	12H	;
    33                        P_TMR1  	EQU	TMR1
    34                        TMR2	EQU	14H	;
    35                        TMRC	EQU	16H	;
    36                        P_TMRCTRL 	EQU TMRC
    37                        P_TMRC		EQU	TMRC
    38                        bTMR0ON    EQU	   0
    39                        bTMR1ON    EQU	   1
    40                        bLCDON	   EQU	   4
    41                        bAUDON	   EQU	   7
    42                        
    43                        TMCLK	EQU	17H	;
    44                        P_TMRCLK 	EQU TMCLK
    45                        P_TMCLK 	EQU TMCLK
    46                        DIVC	EQU	18H	;
    47                        P_DIVC		EQU	DIVC
    48                        LCDCTRL	EQU	19H	;
    49                        LCDCOM	EQU	1AH	;
    50                        P_LCD_COM	EQU	LCDCOM
    51                        WDTC	EQU	1CH	;
    52                        SYSCLK	EQU	1DH
    53                        P_SYSCLK	EQU	SYSCLK
    54                        sysclk		equ SYSCLK
    55                        HALT	EQU	1EH	;
    56                        P_HALT		EQU	HALT
    57                        AUD0	EQU	1FH	;
    58                        P_AUD		EQU	AUD0
    59                        
    60                        AUDCR	EQU	20H	;
    61                        P_AUD_CTL	EQU	AUDCR
    62                        FRAME	EQU	21H	;
    63                        ;BANK	EQU	23H	;
    64                        MF		EQU	2FH
    65                        
    66                        SPCR	EQU	32H
    67                        SPSR	EQU	33H
    68                        SPDR	EQU	34H
    69                        PAK		EQU	3AH
    70                        PBK		EQU	3BH
    71                        PCK		EQU	3CH
    72                        LVC		EQU	3DH
    73                        FUSE	EQU	3EH
    74                        
    75                        PDSEG	EQU	5CH
    76                        RFCC0	EQU	5DH
    77                        RFCC1	EQU	5EH
    78                        
    79                        .ends
    79                        
    21                        	.INCLUDE	RAM.INC
     1                        .Kdata
     2                        ;***************************************
     3                        ; RAM Address
     4                        ;***************************************
     5                        RamStarAddr			EQU		1800H   ;RAM的开始地址
     6                        LCD_RamAddr			EQU		RamStarAddr     ;LCD RAM的地址
     7                        Time_Addr			EQU		RamStarAddr+Time_Str_Addr-Page0RamStarAddr
     8                        
     9                        
    10                        ;***************************************
    11                        ;Time_Addr		EUQ		B0H
    12                        ;***************************************
    13                        .PAGE0     ;page 0的内存布局
    14                        ;***************************************
    15                        ;	ORG	0098H
    16                        ;---------------------------------------------------------------------
    17                        	ORG	0080H
    18                        Page0RamStarAddr	EQU		$
    19 00:0080: xx xx xx xx   LCDRAM					DS	6*6
    19 00:0080: xx xx xx xx   
    19 00:0080: xx xx xx xx   
    20                        
    21 00:00A4: xx            R_Int_Backup			DS	1
    22                        
    23 00:00A5: xx            Sys_Flag_A				DS	1		;0	系统状态
    24                        ; bit0 	=132hz标志
    25                        ; bit1	=1按键首次扫描标志
    26                        ; bit2 	=0按键循环扫描标志
    27                        ; bit3	=0设置模式
    28                        ; bit4 	=0快加设置
    29                        ; bit5 	=0无效键设置
    30                        ; bit6	=0
    31                        ; bit7	=0
    32 00:00A6: xx            Sys_Flag_B				DS	1	;时钟模式的系统状态
    33                        ; bit0 	=半秒标志
    34                        ; bit1	=一秒标志
    35                        ; bit2	=12小时/24小时制度
    36                        ; bit3	=
    37                        ; bit4 	=1是润年标志
    38                        ; bit5 	=
    39                        ; bit6	=
    40                        ; bit7	=
    41 00:00A7: xx            Sys_Flag_C				DS	1	;闹钟模式的系统状态
    42                        ; bit0 	=0闹铃界面/1 整点报时
    43                        ; bit1	=0关闭整点报时，开启整点报时
    44                        ; bit2 	=
    45                        ; bit3	=
    46                        ; bit4 	=闹钟闹铃
    47                        ; bit5 	=闹铃被按下
    48                        ; bit6	=闹铃响铃了
    49                        ; bit7	=1贪睡标志
    50 00:00A8: xx            Sys_Flag_D				DS	1	;计时器模式的系统状态
    51                        ; bit0 	=1正计时开启计时
    52                        ; bit1	=1是倒计时开启计时
    53                        ; bit2	=1第一次倒计时
    54                        ; bit3	=
    55                        ; bit4 	=定时器闹铃
    56                        ; bit5 	=0无中途测量，1中途测量
    57                        ; bit6	=
    58                        ; bit7	=
    59                        
    60                        
    61                        ; Sys_Flag_E					DS	1;
    62                        ; Sys_Flag_F					DS	1;
    63                        ; Sys_Flag_G					DS	1;
    64                        ; Sys_Flag_H					DS	1;
    65                        
    66                        
    67 00:00A9: xx            P_PA_IO_Backup      		DS	1	;B
    68 00:00AA: xx            P_PA_Backup         		DS	1	;C
    69 00:00AB: xx            P_PA_WAKE_Backup			DS	1	;D
    70 00:00AC: xx            P_PC_IO_Backup      		DS	1	;E
    71 00:00AD: xx            P_PC_Backup         		DS	1	;F
    72                        
    73                        
    74                        
    75 00:00AE: xx            R_Reset_Time				DS	1;全显时间,一般为2s
    76                        
    77 00:00AF: xx            R_Scankey_Time				DS	1;按键按下的时间
    78                        D_Rscankey_Half_Sec				EQU	16;按键时间
    79                        D_Rscankey_Sec					EQU	32
    80                        D_Rscankey_TWO_Sec				EQU	64
    81                        
    82                        
    83                        
    84 00:00B0: xx            P_Scankey_value				DS	1;按键存储值
    85 00:00B1: xx            P_Scankey_value_Temporary	DS	1;按键临时储存
    86                        
    87                        D_PLUS_Press					EQU	00100000B
    88                        D_Light_Press					EQU	00010000B
    89                        D_ST_SP_Press					EQU	00001000B
    90                        D_Mode_Press					EQU	00000100B
    91                        D_Reset_Press					EQU	00110000B
    92                        D_Key_value						EQU	00111100B
    93                        D_Dis_All						EQU	00111100B
    94                        
    95                        ;---------------------------------------
    96                        Time_Str_Addr	EQU		$
    97 00:00B2: xx            R_Time_Sec						DS	1;时钟的秒数;
    98 00:00B3: xx            R_Time_Min						DS	1;时钟的分钟数;
    99 00:00B4: xx            R_Time_Hr 						DS	1;时钟的小时数;
   100 00:00B5: xx            R_Time_Day 						DS	1;日
   101 00:00B6: xx            R_Time_Month 					DS	1;月
   102 00:00B7: xx            R_Time_Year						DS	1;年
   103 00:00B8: xx            R_Time_Week						DS	1;0是星期天，1是星期一---
   104 00:00B9: xx            R_Time_Min_Another				DS	1;第二时间的分钟
   105 00:00BA: xx            R_Time_Hr_Another				DS	1;第二时间的小时
   106                        
   107 00:00BB: xx            R_Timer_Ms						DS	1;定时器10ms次数
   108 00:00BC: xx            R_Timer_Sec						DS	1;定时器显示时间/正计时时间秒数
   109 00:00BD: xx            R_Timer_Min						DS	1;定时器显示时间/正计时时间分钟
   110 00:00BE: xx            R_Timer_Hr						DS	1;定时器显示时间/正计时时间小时
   111                        
   112                        
   113                        
   114 00:00BF: xx            R_Timer_Sec_Countdown			DS	1;/倒计时剩余时间秒数;
   115 00:00C0: xx            R_Timer_Min_Countdown			DS	1;/倒计时剩余时间分钟;
   116 00:00C1: xx            R_Timer_Hr_Countdown			DS	1;/倒计时剩余时间小时;
   117 00:00C2: xx            R_Timer_Sec_Backup				DS	1;定时器倒计时储存时间时间;9
   118 00:00C3: xx            R_Timer_Min_Backup				DS	1;定时器倒计时储存时间时间;10
   119 00:00C4: xx            R_Timer_Hr_Backup				DS	1;定时器倒计时储存时间时间;11
   120                        
   121                        D_Beep_Open_Last_Time_Timer		EQU	15
   122                        
   123                        
   124                        D_Beep_Open_Last_Time_Alarm		EQU	15
   125                        
   126 00:00C5: xx            R_Alarm_Clock_Min				DS	1;闹钟的分钟;	10
   127 00:00C6: xx            R_Alarm_Clock_Hr 				DS	1;闹钟的小时;	11
   128 00:00C7: xx            R_Alarm_Clock_Day 				DS	1;闹钟的天;	11
   129 00:00C8: xx            R_Alarm_Clock_Month				DS	1;闹铃的月份
   130 00:00C9: xx            R_Alarm_Mode					DS	1;闹钟的模式，0是闹钟关闭，1是闹钟开启，2是循环闹铃
   131 00:00CA: xx            R_Alarm_Clock_Mode				DS	1;0每日闹钟，1定日闹铃，2定月闹铃，3月次闹铃
   132                        
   133 00:00CB: xx            R_Snz_Time						DS	1;贪睡闹钟的分钟;
   134                        D_Snz_Time						EQU	5
   135 00:00CC: xx            R_Snz_Frequency					DS	1;贪睡闹钟的小时;
   136                        D_Snz_Frequency					EQU	7
   137                        
   138                        
   139                        
   140                        
   141 00:00CD: xx            R_Mode							DS	1;0是时钟模式，1是闹钟，2是正计时，3是第二时钟，4是倒计时
   142 00:00CE: xx            R_Mode_Set						DS	1;设置模式
   143                        
   144 00:00CF: xx            R_Time_Hr_am_pm					DS	1;判断AM和PM内存临时储存
   145                        
   146                        
   147                        
   148 00:00D0: xx            R_Set_Mode_Exit_Time			DS	1;自动设置退出时间
   149                        D_Set_Mode_Exit_Time			EQU	15
   150                        
   151 00:00D1: xx            R_Fast_Plus_Time				DS	1;长按LCD快加
   152                        
   153                        
   154 00:00D2: xx            R_Close_All_Dis					DS	1;控制关闭全显
   155                        D_Close_All_Dis					EQU	2
   156                        
   157                        
   158 00:00D3: xx            R_Close_Light_Time				DS	1;关闭light的时间
   159                        D_Close_Light_Time				EQU	2
   160                        
   161                        
   162 00:00D4: xx            R_Alarm_Clock_Open_Beep_Time	DS	1;32Hz转化为16hz
   163 00:00D5: xx            R_Close_Beep_Time				DS	1;闹铃关闭时间，闹铃响多久
   164 00:00D6: xx            R_Voice_Unit					DS	1;闹铃响的次数，一秒响几次
   165                        ;---------------------------------------
   166 00:00D7: xx xx xx xx   P_Temp			ds	16
   166 00:00D7: xx xx xx xx   
   166 00:00D7: xx xx xx xx   
   167                        ;显示从写P_Temp+4
   168                        ;---------------------------------------
   169                        ;---------------------------------------
   170                        ;***************************************
   171                        .ENDS
   172                        ;***************************************
   173                        .Udata
   174                        ;---------------------------------------
   175                        	ORG    1880H
   176                        ;---------------------------------------
   177                        ;---------------------------------------
   178                        .ENDS
   179                        
   179                        
    22                        	.include	50P016.mac
     1                        ;------------------------------------
     2                        PB2_PB2_COMS MACRO
     3                                RMB0    PADF0
     4                                SMB2    PBTYPE ;COMS
     5                                ENDM
     6                        PB2_PB2_NOMS MACRO
     7                                RMB0    PADF0
     8                                RMB2    PBTYPE ;NOMS
     9                                ENDM
    10                        PB2_PWM MACRO
    11                                SMB0    PADF0
    12                                SMB2    PBTYPE ;COMS
    13                                ENDM
    14                        PB3_PB3_COMS MACRO
    15                                RMB1    PADF0
    16                                SMB3    PBTYPE ;NMOS
    17                                ENDM
    18                        PB3_PB3_NOMS MACRO
    19                                RMB1    PADF0
    20                                RMB3    PBTYPE ;CMOS
    21                                ENDM
    22                        PB3_PWM MACRO
    23                                SMB1    PADF0
    24                                SMB3    PBTYPE ;CMOS
    25                                ENDM
    26                        
    27                        PA4_PA4 MACRO
    28                                RMB3    PADF0
    29                                RMB4    PADF0
    30                                ENDM
    31                        PA4_IR_FSUB     MACRO
    32                                SMB3    PADF0
    33                                RMB4    PADF0
    34                                ENDM
    35                        PA4_IR_TMR0_D2  MACRO
    36                                RMB3    PADF0
    37                                SMB4    PADF0
    38                                ENDM
    39                        PA4_IR_TMR0_D3  MACRO
    40                                SMB3    PADF0
    41                                SMB4    PADF0
    42                                ENDM
    43                        
    44                        PA7_PA7 MACRO
    45                                RMB2    PADF0
    46                                ENDM
    47                        
    48                        PA7_EXT MACRO
    49                                SMB2    PADF0 ;falling edge trigger
    50                                ENDM
    51                        
    52                        PC45_PC45       MACRO
    53                                RMB4    PCSEG
    54                                ENDM
    55                        
    56                        PC67_PC67       MACRO
    57                                RMB5    PCSEG
    58                                RMB4    DIVC
    59                                ENDM
    60                        
    61                        PC67_EL01       MACRO
    62                                RMB5    PCSEG
    63                                SMB4    DIVC
    64                                ENDM
    65                        
    66                        PC03_SEG       MACRO
    67                                SMB0    PCSEG
    68                                SMB1    PCSEG
    69                                SMB2    PCSEG
    70                                SMB3    PCSEG
    71                                ENDM
    72                        
    73                        PC45_SEG       MACRO
    74                                SMB4    PCSEG
    75                                ENDM
    76                        PC67_SEG	MACRO
    77                                SMB5    PCSEG
    78                                ENDM
    79                        
    80                        PD03_SEG	MACRO
    81                        		SMB6	PCSEG
    82                                ENDM
    83                        PD03_RFC	MACRO
    84                        		RMB6	PCSEG
    85                        ;		RMB0	PDSEG
    86                        ;		RMB1	PDSEG
    87                        ;		RMB2	PDSEG
    88                        ;		RMB3	PDSEG
    89                        		SMB0	RFCC0
    90                        		SMB1	RFCC0
    91                        		SMB2	RFCC0
    92                        		SMB3	RFCC0
    93                                ENDM
    94                        PD03_PD03	MACRO
    95                        		RMB6	PCSEG
    96                        ;		RMB0	PDSEG
    97                        ;		RMB1	PDSEG
    98                        ;		RMB2	PDSEG
    99                        ;		RMB3	PDSEG
   100                        		RMB0	RFCC0
   101                        		RMB1	RFCC0
   102                        		RMB2	RFCC0
   103                        		RMB3	RFCC0
   104                                ENDM
   105                        PD0_SEG	MACRO
   106                        ;		RMB6	PCSEG
   107                        		SMB0	PDSEG
   108                                ENDM
   109                        PD1_SEG	MACRO
   110                        ;		RMB6	PCSEG
   111                        		SMB1	PDSEG
   112                                ENDM
   113                        PD2_SEG	MACRO
   114                        ;		RMB6	PCSEG
   115                        		SMB2	PDSEG
   116                                ENDM
   117                        PD3_SEG	MACRO
   118                        		RMB6	PCSEG
   119                        		SMB3	PDSEG
   120                                ENDM
   121                        
   122                        PD47_SEG	MACRO
   123                        		SMB7	PCSEG
   124                                ENDM
   125                        PD47_RFC	MACRO
   126                        		RMB7	PCSEG
   127                        ;		RMB4	PDSEG
   128                        ;		RMB5	PDSEG
   129                        ;		RMB6	PDSEG
   130                        ;		RMB7	PDSEG
   131                        		SMB4	RFCC0
   132                        		SMB5	RFCC0
   133                        		SMB6	RFCC0
   134                        		SMB7	RFCC0
   135                                ENDM
   136                        PD47_PD47	MACRO
   137                        		RMB7	PCSEG
   138                        ;		RMB4	PDSEG
   139                        ;		RMB5	PDSEG
   140                        ;		RMB6	PDSEG
   141                        ;		RMB7	PDSEG
   142                        		RMB4	RFCC0
   143                        		RMB5	RFCC0
   144                        		RMB6	RFCC0
   145                        		RMB7	RFCC0
   146                                ENDM
   147                        PD4_SEG	MACRO
   148                        ;		RMB7	PCSEG
   149                        		SMB4	PDSEG
   150                                ENDM
   151                        PD5_SEG	MACRO
   152                        ;		RMB7	PCSEG
   153                        		SMB5	PDSEG
   154                                ENDM
   155                        PD6_SEG	MACRO
   156                        ;		RMB7	PCSEG
   157                        		SMB6	PDSEG
   158                                ENDM
   159                        PD7_SEG	MACRO
   160                        		RMB7	PCSEG
   161                        		SMB7	PDSEG
   162                                ENDM
   163                        
   164                        PC_PD_SEG	MACRO
   165                        		lda		#$FF
   166                        		STA		PCSEG	;S1~S7,S8~S15
   167                                ENDM
   168                        
   169                        LCD_2COM	MACRO
   170                        		SMB0	LCDCOM
   171                        		RMB1	LCDCOM
   172                        		RMB2	LCDCOM
   173                                ENDM
   174                        LCD_3COM	MACRO
   175                        		RMB0	LCDCOM
   176                        		SMB1	LCDCOM
   177                        		RMB2	LCDCOM
   178                                ENDM
   179                        LCD_4COM	MACRO
   180                        		SMB0	LCDCOM
   181                        		SMB1	LCDCOM
   182                        		RMB2	LCDCOM
   183                                ENDM
   184                        LCD_5COM	MACRO
   185                        		RMB0	LCDCOM
   186                        		RMB1	LCDCOM
   187                        		SMB2	LCDCOM
   188                                ENDM
   189                        LCD_6COM	MACRO
   190                        		SMB0	LCDCOM
   191                        		RMB1	LCDCOM
   192                        		SMB2	LCDCOM
   193                                ENDM
   194                        LCD_7COM	MACRO
   195                        		RMB0	LCDCOM
   196                        		SMB1	LCDCOM
   197                        		SMB2	LCDCOM
   198                                ENDM
   199                        LCD_8COM	MACRO
   200                        		SMB0	LCDCOM
   201                        		SMB1	LCDCOM
   202                        		SMB2	LCDCOM
   203                                ENDM
   204                        
   205                        LCD_ENCH_EN		MACRO
   206                        		SMB6	LCDCOM
   207                                ENDM
   208                        LCD_ENCH_DIS	MACRO
   209                        		RMB6	LCDCOM
   210                                ENDM
   211                        
   212                        LCD_C_TYPE	MACRO
   213                        		SMB7	LCDCOM
   214                        		SMB0	PCSEG
   215                        		SMB1	PCSEG
   216                        		SMB2	PCSEG
   217                        		SMB3	PCSEG
   218                                ENDM
   219                        LCD_DRIVE_2	MACRO
   220                        		SMB0	LCDCTRL
   221                        		RMB1	LCDCTRL
   222                                ENDM
   223                        LCD_DRIVE_4	MACRO
   224                        		RMB0	LCDCTRL
   225                        		SMB1	LCDCTRL
   226                                ENDM
   227                        LCD_DRIVE_8	MACRO
   228                        		SMB0	LCDCTRL
   229                        		SMB1	LCDCTRL
   230                                ENDM
   231                        LCD_DRIVE_FULL	MACRO
   232                        		RMB0	LCDCTRL
   233                        		RMB1	LCDCTRL
   234                                ENDM
   235                        LCD_C_1_2_BAIS_3V	MACRO
   236                        		RMB2	LCDCTRL
   237                        		RMB3	LCDCTRL
   238                                ENDM
   239                        LCD_C_1_3_BAIS_3V	MACRO
   240                        		SMB2	LCDCTRL
   241                        		RMB3	LCDCTRL
   242                                ENDM
   243                        LCD_C_1_3_BAIS_4V	MACRO
   244                        		SMB2	LCDCTRL
   245                        		SMB3	LCDCTRL
   246                                ENDM
   247                        
   248                        LCD_R_TYPE	MACRO
   249                        		RMB7	LCDCOM
   250                                ENDM
   251                        LCD_R_1_2_BAIS	MACRO
   252                        		SMB2	LCDCTRL
   253                        		SMB3	LCDCTRL
   254                                ENDM
   255                        LCD_R_1_3_BAIS	MACRO
   256                        		RMB2	LCDCTRL
   257                        		RMB3	LCDCTRL
   258                                ENDM
   259                        LCD_R_1_4_BAIS	MACRO
   260                        		SMB2	LCDCTRL
   261                        		RMB3	LCDCTRL
   262                                ENDM
   263                        ;------------------------------------
   264                        Fext_WEAK       MACRO
   265                                RMB0    SYSCLK
   266                                ENDM
   267                        Fext_STRONG     MACRO
   268                                SMB0    SYSCLK
   269                                ENDM
   270                        
   271                        Fext_OFF        MACRO
   272                                RMB1    SYSCLK
   273                                ENDM
   274                        Fext_ON         MACRO
   275                                SMB1    SYSCLK
   276                                ENDM
   277                        
   278                        Fosc_OFF        MACRO
   279                                RMB2    SYSCLK
   280                                ENDM
   281                        Fosc_ON         MACRO
   282                                SMB2    SYSCLK
   283                                ENDM
   284                        
   285                        Fext_Xtal       MACRO
   286                                RMB3    SYSCLK
   287                                ENDM
   288                        Fext_RC         MACRO
   289                                SMB3    SYSCLK
   290                                ENDM
   291                        
   292                        Fsys_4MHZ MACRO
   293                                RMB4    SYSCLK
   294                                RMB5    SYSCLK
   295                                ENDM
   296                        Fsys_2MHZ MACRO
   297                                SMB4    SYSCLK
   298                                RMB5    SYSCLK
   299                                ENDM
   300                        Fsys_1MHZ MACRO
   301                                RMB4    SYSCLK
   302                                SMB5    SYSCLK
   303                                ENDM
   304                        Fsys_500K MACRO
   305                                SMB4    SYSCLK
   306                                SMB5    SYSCLK
   307                                ENDM
   308                        
   309                        Fsub_Fext MACRO
   310                                SMB6    SYSCLK
   311                                ENDM
   312                        Fsub_32KCLK     MACRO
   313                                RMB6    SYSCLK
   314                                ENDM
   315                        
   316                        Fcpu_Fext  MACRO
   317                                SMB7    SYSCLK
   318                                ENDM
   319                        Fcpu_Fsys  MACRO
   320                                RMB7    SYSCLK
   321                                ENDM
   322                        
   323                        ;------------------------------------
   324                        DIV_8KHZ  MACRO
   325                                RMB0    DIVC
   326                                RMB1    DIVC
   327                        		RMB5	DIVC
   328                                ENDM
   329                        DIV_16KHZ  MACRO
   330                                SMB0    DIVC
   331                                RMB1    DIVC
   332                        		RMB5	DIVC
   333                                ENDM
   334                        DIV_512HZ  MACRO
   335                                RMB0    DIVC
   336                                SMB1    DIVC
   337                        		RMB5	DIVC
   338                                ENDM
   339                        DIV_1KHZ  MACRO
   340                                SMB0    DIVC
   341                                SMB1    DIVC
   342                        		RMB5	DIVC
   343                                ENDM
   344                        DIV_256HZ  MACRO
   345                        		SMB5	DIVC
   346                                ENDM
   347                        ;------------------------------------
   348                        WDTC_CLK_256HZ   MACRO
   349                                RMB0    WDTC
   350                                RMB1    WDTC
   351                                ENDM
   352                        WDTC_CLK_DIV     MACRO
   353                                SMB0    WDTC
   354                                RMB1    WDTC
   355                                ENDM
   356                        WDTC_CLK_TMR1   MACRO
   357                                RMB0    WDTC
   358                                SMB1    WDTC
   359                                ENDM
   360                        WDTC_CLK_LCDS    MACRO
   361                                SMB0    WDTC
   362                                SMB1    WDTC
   363                                ENDM
   364                        
   365                        WDTC_CLR MACRO
   366                                RMB2    WDTC
   367                                ENDM
   368                        
   369                        WDTC_ON  MACRO
   370                                SMB3    WDTC
   371                                ENDM
   372                        WDTC_OFF MACRO
   373                                RMB3    WDTC
   374                                ENDM
   375                        
   376                        IF_WDTC MACRO   LAB
   377                                BBS4    WDTC,LAB
   378                                ENDM
   379                        
   380                        ;------------------------------------
   381                        TMR0_ON MACRO
   382                                SMB0    TMRC
   383                                ENDM
   384                        TMR0_OFF MACRO
   385                                RMB0    TMRC
   386                                ENDM
   387                        TMR0_CLK_FOSC   MACRO
   388                                SMB0    TMCLK
   389                                RMB1    TMCLK
   390                                ENDM
   391                        TMR0_CLK_FSUB    MACRO
   392                                RMB0    TMCLK
   393                                RMB1    TMCLK
   394                                RMB0	PADF1
   395                                ENDM
   396                        TMR0_CLK_128K	macro
   397                        		RMB0    TMCLK
   398                                SMB1    TMCLK
   399                                ENDM
   400                        TMR0_CLK_32K	macro
   401                        		RMB0    TMCLK
   402                                RMB1    TMCLK
   403                                SMB0	PADF1
   404                                ENDM
   405                        TMR0_CLK_1M   MACRO
   406                                SMB0    TMCLK
   407                                SMB1    TMCLK
   408                                RMB6	TMRC
   409                                ENDM
   410                        
   411                        TMR1_ON MACRO
   412                                SMB1    TMRC
   413                                ENDM
   414                        TMR1_OFF MACRO
   415                                RMB1    TMRC
   416                                ENDM
   417                        TMR1_CLK_TMR0   MACRO
   418                                RMB2    TMCLK
   419                                RMB3    TMCLK
   420                                ENDM
   421                        TMR1_CLK_512Hz    MACRO
   422                                SMB2    TMCLK
   423                                RMB3    TMCLK
   424                                ENDM
   425                        TMR1_CLK_128K	macro
   426                        		RMB2    TMCLK
   427                                SMB3    TMCLK
   428                                ENDM
   429                        TMR1_CLK_1M		macro
   430                        		SMB2    TMCLK
   431                                SMB3    TMCLK
   432                                ENDM
   433                        
   434                        TMR2_ON MACRO
   435                                SMB2    TMRC
   436                                ENDM
   437                        TMR2_OFF MACRO
   438                                RMB2    TMRC
   439                                ENDM
   440                        ;TMR2_CLK_1KDIV2    MACRO
   441                        ;       RMB4    TMCLK
   442                        ;        RMB5    TMCLK
   443                        ;        ENDM
   444                        ;TMR2_CLK_1KDIV3    MACRO
   445                        ;        SMB4    TMCLK
   446                        ;        RMB5    TMCLK
   447                        ;        ENDM
   448                        ;TMR2_CLK_FOSCDIV8  MACRO
   449                        ;        RMB4    TMCLK
   450                        ;        SMB5    TMCLK
   451                        ;        ENDM
   452                        ;TMR2_CLK_FSUB      MACRO
   453                        ;        SMB4    TMCLK
   454                        ;        SMB5    TMCLK
   455                        ;        ENDM
   456                        
   457                        
   458                        TONE_2KHZ       MACRO
   459                                RMB2    DIVC
   460                                RMB3    DIVC
   461                                ENDM
   462                        TONE_TMR0_2     MACRO
   463                                SMB2    DIVC
   464                                RMB3    DIVC
   465                                ENDM
   466                        TONE_L       MACRO
   467                                RMB2    DIVC
   468                                SMB3    DIVC
   469                                ENDM
   470                        TONE_H       MACRO
   471                                SMB2    DIVC
   472                                SMB3    DIVC
   473                                ENDM
   474                        ;------------------------------------
   475                        EN_DIV_IRQ     MACRO
   476                                SMB0    IER
   477                                ENDM
   478                        EN_TMR0_IRQ     MACRO
   479                                SMB1    IER
   480                                ENDM
   481                        EN_TMR1_IRQ     MACRO
   482                                SMB2    IER
   483                                ENDM
   484                        EN_TMR2_IRQ     MACRO
   485                                SMB3    IER
   486                                ENDM
   487                        EN_KEY_IRQ      MACRO
   488                                SMB4    IER
   489                                ENDM
   490                        EN_PA_IRQ      MACRO
   491                                SMB4    IER
   492                                ENDM
   493                        EN_EXT_IRQ      MACRO
   494                                SMB5    IER
   495                                ENDM
   496                        EN_LCD_IRQ      MACRO
   497                                SMB6    IER
   498                                ENDM
   499                        
   500                        DIS_DIV_IRQ     MACRO
   501                                RMB0    IER
   502                                ENDM
   503                        DIS_TMR0_IRQ     MACRO
   504                                RMB1    IER
   505                                ENDM
   506                        DIS_TMR1_IRQ     MACRO
   507                                RMB2    IER
   508                                ENDM
   509                        DIS_TMR2_IRQ     MACRO
   510                                RMB3    IER
   511                                ENDM
   512                        DIS_KEY_IRQ      MACRO
   513                                RMB4    IER
   514                                ENDM
   515                        DIS_PA_IRQ		 MACRO
   516                                RMB4    IER
   517                                ENDM
   518                        DIS_EXT_IRQ      MACRO
   519                                RMB5    IER
   520                                ENDM
   521                        DIS_LCD_IRQ      MACRO
   522                                RMB6    IER
   523                                ENDM
   524                        
   525                        CLR_DIV_IRQ_FLAG MACRO
   526                                RMB0    IFR
   527                                ENDM
   528                        CLR_TMR0_IRQ_FLAG      MACRO
   529                                RMB1    IFR
   530                                ENDM
   531                        CLR_TMR1_IRQ_FLAG      MACRO
   532                                RMB2    IFR
   533                                ENDM
   534                        CLR_TMR2_IRQ_FLAG      MACRO
   535                                RMB3    IFR
   536                                ENDM
   537                        CLR_KEY_IRQ_FLAG      MACRO
   538                                RMB4    IFR
   539                                ENDM
   540                        CLR_PA_IRQ_FLAG      MACRO
   541                                RMB4    IFR
   542                                ENDM
   543                        CLR_PA_IRQF      MACRO
   544                                RMB4    IFR
   545                                ENDM
   546                        CLR_EXT_IRQ_FLAG       MACRO
   547                                RMB5    IFR
   548                                ENDM
   549                        CLR_LCD_IRQ_FLAG       MACRO
   550                                RMB6    IFR
   551                                ENDM
   552                        
   553                        IF_DIV_IRQ_FLAG MACRO   LAB1
   554                                BBS0    IFR,LAB1
   555                                ENDM
   556                        IF_TMR0_IRQ_FLAG MACRO   LAB1
   557                                BBS1    IFR,LAB1
   558                                ENDM
   559                        IF_TMR1_IRQ_FLAG MACRO   LAB1
   560                                BBS2    IFR,LAB1
   561                                ENDM
   562                        IF_TMR2_IRQ_FLAG MACRO   LAB1
   563                                BBS3    IFR,LAB1
   564                                ENDM
   565                        IF_KEY_IRQ_FLAG MACRO   LAB1
   566                                BBS4    IFR,LAB1
   567                                ENDM
   568                        IF_EXT_IRQ_FLAG MACRO   LAB1
   569                                BBS5    IFR,LAB1
   570                                ENDM
   571                        IF_LCD_IRQ_FLAG MACRO   LAB1
   572                                BBS6    IFR,LAB1
   573                                ENDM
   574                        ;------------------------------------
   575                        LCD_ON           MACRO
   576                                SMB4    TMRC
   577                                ENDM
   578                        LCD_OFF          MACRO
   579                                RMB4    TMRC
   580                                ENDM
   581                        
   582                        PWM_ON  MACRO
   583                        		SMB0	SYSCLK	;Strong Mode
   584                                SMB7    TMRC
   585                                ENDM
   586                        PWM_OFF MACRO
   587                                RMB7    TMRC
   588                        ;		lda		R_Strong_2S
   589                        ;		bne		?Skip
   590                        		RMB0	SYSCLK	;WeakMode
   591                        ?Skip:
   592                                ENDM
   593                        ;DAC_ON		MACRO
   594                        ;	SMB7	P_TMRCTRL
   595                        ;	ENDM
   596                        ;DAC_OFF		MACRO
   597                        ;	RMB7	P_TMRCTRL
   598                        ;	ENDM
   599                        
   600                        IF_PWM_ON       MACRO   LAB
   601                                BBS7    TMRC,LAB
   602                                ENDM
   603                        IF_PWM_OFF      MACRO   LAB
   604                                BBR7    TMRC,LAB
   605                                ENDM
   606                        
   607                        SEL_PWM MACRO
   608                                SMB1    AUDCR
   609                                ENDM
   610                        DAC_LATCH_TMR0	MACRO
   611                        		SMB5	AUDCR
   612                        		ENDM
   613                        SEL_TONE MACRO
   614                                RMB2    AUDCR
   615                                RMB4    AUDCR
   616                                RMB5    AUDCR
   617                                ENDM
   618                        
   619                        SEL_MELODY  MACRO
   620                                RMB2    AUDCR
   621                                SMB4    AUDCR
   622                        ;        SMB5    AUDCR
   623                                RMB5    AUDCR
   624                                ENDM
   625                        SEL_VOICE   MACRO
   626                                SMB2    AUDCR
   627                                RMB4    AUDCR
   628                                SMB5    AUDCR
   629                                ENDM
   630                        ;------------------------------------
   631                        ClrAllRam MACRO
   632                            LDA		#$00
   633                        	LDX		#$FF
   634                        	STA		$1800
   635                        ?ClrAllRamLoop:
   636                        	STA		$1800,X
   637                        	DEX
   638                        	BNE		?ClrAllRamLoop
   639                            ENDM
   640                        ;------------------------------------
   641                        CHECK_LCD	MACRO
   642                        	LDA		#11111110B
   643                        	STA		P_PC_DIR		;PC0 is Output
   644                        	LDA		#11111110B
   645                        	STA		P_PC			;PC0 Output "0"
   646                        	NOP
   647                        	NOP
   648                        	NOP
   649                        	LDA		P_PC
   650                        	AND		#00000010B
   651                        ?_Loop
   652                        	STA		P_Temp+1
   653                        	LDA		#$0F
   654                        ?_LoopPort
   655                        	DEC
   656                        	BNE		?_LoopPort
   657                        	LDA		P_PC
   658                        	AND		#00000010B
   659                        	STA		P_Temp
   660                        	CMP		P_Temp+1
   661                        	BNE		?_Loop
   662                        	BBS1	P_Temp,?LCD_R_Type
   663                        ?LCD_C_Type:
   664                        	LCD_C_TYPE
   665                        	LCD_ENCH_EN
   666                        	LCD_4COM
   667                        	LCD_DRIVE_8
   668                        	LCD_C_1_3_BAIS_3V
   669                        	JMP		?Exit
   670                        ?LCD_R_Type:
   671                        	LCD_R_TYPE
   672                        ;	LCD_ENCH_EN
   673                        	LCD_4COM
   674                        ;	LCD_DRIVE_8
   675                        	LCD_R_1_3_BAIS
   676                        
   677                        ?Exit:
   678                        	LDA		#$00
   679                        	STA		P_PC_IO
   680                        	STA		P_PC
   681                        ;	STA		P_PC_IO_Backup
   682                        ;	STA		P_PC_Backup
   683                        	ENDM
   684                        ;------------------------------------
   685                        ;------------------------------------
   685                        
    23                        	.INCLUDE	MACRO.MAC
     1                        ;***********************************************************************
     2                        BRA_IDX MACRO	MEM
     3                        	if	MEM<$100
     4                        	BRA	($80+MEM)
     5                        	else
     6                        	BRA	(MEM)
     7                        	endif
     8                        	ENDM
     9                        
    10                        LDLN	MACRO	mem
    11                        	if	mem<$100
    12                        	LDA	$780+mem
    13                        	else
    14                        	LDA	$700+mem
    15                        	endif
    16                        	ENDM
    17                        
    18                        LDHN	MACRO	mem
    19                        	if	mem<$100
    20                        	LDA	$F80+mem
    21                        	else
    22                        	LDA	$F00+mem
    23                        	endif
    24                        	ENDM
    25                        
    26                        STLN	MACRO	mem
    27                        	if	mem<$100
    28                        	STA	$780+mem
    29                        	else
    30                        	STA	$700+mem
    31                        	endif
    32                        	ENDM
    33                        
    34                        STHN	MACRO	mem
    35                        	if	mem<$100
    36                        	STA	$F80+mem
    37                        	else
    38                        	STA	$F00+mem
    39                        	endif
    40                        	ENDM
    41                        
    42                        LXLN	MACRO	mem
    43                        	if	mem<$100
    44                        	LDX	$780+mem
    45                        	else
    46                        	LDX	$700+mem
    47                        	endif
    48                        	ENDM
    49                        
    50                        LXHN	MACRO	mem
    51                        	if	mem<$100
    52                        	LDX	$F80+mem
    53                        	else
    54                        	LDX	$F00+mem
    55                        	endif
    56                        	ENDM
    57                        
    58                        SXLN	MACRO	mem
    59                        	if	mem<$100
    60                        	STX	$780+mem
    61                        	else
    62                        	STX	$700+mem
    63                        	endif
    64                        	ENDM
    65                        
    66                        SXHN	MACRO	mem
    67                        	if	mem<$100
    68                        	STX	$F80+mem
    69                        	else
    70                        	STX	$F00+mem
    71                        	endif
    72                        	ENDM
    73                        
    74                        LDLN_X	MACRO	mem
    75                        	if	mem<$100
    76                        	LDA	$780+mem,X
    77                        	else
    78                        	LDA	$700+mem,X
    79                        	endif
    80                        	ENDM
    81                        
    82                        STLN_X	MACRO	mem
    83                        	if	mem<$100
    84                        	STA	$780+mem,X
    85                        	else
    86                        	STA	$700+mem,X
    87                        	endif
    88                        	ENDM
    89                        
    90                        LDHN_X	MACRO	mem
    91                        	if	mem<$100
    92                        	LDA	$F80+mem,X
    93                        	else
    94                        	LDA	$F00+mem,X
    95                        	endif
    96                        	ENDM
    97                        
    98                        STHN_X	MACRO	mem
    99                        	if	mem<$100
   100                        	STA	$F80+mem,X
   101                        	else
   102                        	STA	$F00+mem,X
   103                        	endif
   104                        	ENDM
   105                        
   106                        INCHN_X	MACRO	mem
   107                        	if	mem<$100
   108                        	INC	$F80+mem,X
   109                        	else
   110                        	INC	$F00+mem,X
   111                        	endif
   112                        	ENDM
   113                        
   114                        DECHN_X	MACRO	mem
   115                        	if	mem<$100
   116                        	DEC	$F80+mem,X
   117                        	else
   118                        	DEC	$F00+mem,X
   119                        	endif
   120                        	ENDM
   121                        
   122                        ADCLN	MACRO	mem
   123                        	if	mem<$100
   124                        	ADC	$780+mem
   125                        	else
   126                        	ADC	$700+mem
   127                        	endif
   128                        	ENDM
   129                        
   130                        ADCHN	MACRO	mem
   131                        	if	mem<$100
   132                        	ADC	$F80+mem
   133                        	else
   134                        	ADC	$F00+mem
   135                        	endif
   136                        	ENDM
   137                        
   138                        CMPLN	MACRO	mem
   139                        	if	mem<$100
   140                        	CMP	$780+mem
   141                        	else
   142                        	CMP	$700+mem
   143                        	endif
   144                        	ENDM
   145                        
   146                        CMPHN	MACRO	mem
   147                        	if	mem<$100
   148                        	CMP	$F80+mem
   149                        	else
   150                        	CMP	$F00+mem
   151                        	endif
   152                        	ENDM
   153                        
   154                        INCLN	MACRO	mem
   155                        	if	mem<$100
   156                        	INC	$780+mem
   157                        	else
   158                        	INC	$700+mem
   159                        	endif
   160                        	ENDM
   161                        
   162                        INCHN	MACRO	mem
   163                        	if	mem<$100
   164                        	INC	$F80+mem
   165                        	else
   166                        	INC	$F00+mem
   167                        	endif
   168                        	ENDM
   169                        
   170                        DECLN	MACRO	mem
   171                        	if	mem<$100
   172                        	DEC	$780+mem
   173                        	else
   174                        	DEC	$700+mem
   175                        	endif
   176                        	ENDM
   177                        
   178                        DECHN	MACRO	mem
   179                        	if	mem<$100
   180                        	DEC	$F80+mem
   181                        	else
   182                        	DEC	$F00+mem
   183                        	endif
   184                        	ENDM
   185                        
   186                        LDA_X	MACRO	mem
   187                        	if	mem<$100
   188                        	LDA	$80+mem,X
   189                        	else
   190                        	LDA	mem,X
   191                        	endif
   192                        	ENDM
   193                        
   194                        STA_X	MACRO	mem
   195                        	if	mem<$100
   196                        	STA	$80+mem,X
   197                        	else
   198                        	STA	mem,X
   199                        	endif
   200                        	ENDM
   201                        
   202                        STZ_X	MACRO	mem
   203                        	if	mem<$100
   204                        	STZ	$80+mem,X
   205                        	else
   206                        	STZ	mem,X
   207                        	endif
   208                        	ENDM
   209                        
   210                        INC_X	MACRO	mem
   211                        	if	mem<$100
   212                        	INC	$80+mem,X
   213                        	else
   214                        	INC	mem,X
   215                        	endif
   216                        	ENDM
   217                        
   218                        ADC_X	MACRO	mem
   219                        	if	mem<$100
   220                        	ADC	$80+mem,X
   221                        	else
   222                        	ADC	mem,X
   223                        	endif
   224                        	ENDM
   225                        
   226                        SBC_X	MACRO	mem
   227                        	if	mem<$100
   228                        	SBC	$80+mem,X
   229                        	else
   230                        	SBC	mem,X
   231                        	endif
   232                        	ENDM
   233                        
   234                        CMP_X	MACRO	mem
   235                        	if	mem<$100
   236                        	CMP	$80+mem,X
   237                        	else
   238                        	CMP	mem,X
   239                        	endif
   240                        	ENDM
   241                        
   242                        ASLLN	MACRO	mem
   243                        	if	mem<$100
   244                        	ASL	$780+mem
   245                        	else
   246                        	ASL	$700+mem
   247                        	endif
   248                        	ENDM
   249                        
   250                        LSRLN	MACRO	mem
   251                        	if	mem<$100
   252                        	LSR	$780+mem
   253                        	else
   254                        	LSR	$700+mem
   255                        	endif
   256                        	ENDM
   257                        
   258                        ROLLN	MACRO	mem
   259                        	if	mem<$100
   260                        	ROL	$780+mem
   261                        	else
   262                        	ROL	$700+mem
   263                        	endif
   264                        	ENDM
   265                        
   266                        RORLN	MACRO	mem
   267                        	if	mem<$100
   268                        	ROR	$780+mem
   269                        	else
   270                        	ROR	$700+mem
   271                        	endif
   272                        	ENDM
   273                        
   274                        ASLHN	MACRO	mem
   275                        	if	mem<$100
   276                        	ASL	$F80+mem
   277                        	else
   278                        	ASL	$F00+mem
   279                        	endif
   280                        	ENDM
   281                        
   282                        LSRHN	MACRO	mem
   283                        	if	mem<$100
   284                        	LSR	$F80+mem
   285                        	else
   286                        	LSR	$F00+mem
   287                        	endif
   288                        	ENDM
   289                        
   290                        ROLHN	MACRO	mem
   291                        	if	mem<$100
   292                        	ROL	$F80+mem
   293                        	else
   294                        	ROL	$F00+mem
   295                        	endif
   296                        	ENDM
   297                        
   298                        RORHN	MACRO	mem
   299                        	if	mem<$100
   300                        	ROR	$F80+mem
   301                        	else
   302                        	ROR	$F00+mem
   303                        	endif
   304                        	ENDM
   305                        
   306                        
   307                        BR0	MACRO	PARA,VAR,LABLE
   308                        	BBR@<VAR.mod.8> PARA,LABLE
   309                        	ENDM
   310                        
   311                        BR1	MACRO	PARA,VAR,LABLE
   312                        	BBS@<VAR.mod.8>	PARA,LABLE
   313                        	ENDM
   314                        
   315                        xSETB	MACRO	flag,bit
   316                        	SMB@<bit>  flag
   317                        	ENDM
   318                        
   319                        xCLRB	MACRO	flag,bit
   320                        	RMB@<bit>  flag
   321                        	ENDM
   321                        
    24                        ;***************************************
    25                        STACK_BOT		EQU		FFH                     ;堆栈底部
    26                        ;***************************************
    27                        	.PROG										;程序开始
    28                        V_RESET:
    29 00:F000: 1A            	NOP
    30 00:F001: 1A            	NOP
    31 00:F002: 1A            	NOP
    32 00:F003: 5E FF         	LDX		#STACK_BOT
    33 00:F005: 1E            	TXS	      ;使用这个值初始化堆栈指针，这通常是为了设置堆栈的底部地址，确保程序运行中堆栈的正确使用。
    34 00:F006: 53 B7         	LDA		#$B7	;#$07
    35 00:F008: 7F 1D         	STA		SYSCLK	;设置系统时钟
    36 00:F00A: 73 3E         	LDA		FUSE
    37 00:F00C: 7F 2F         	STA		MF	;精准主频3.64M
    38                        ;***************************************
    39                        	ClrAllRam	;清空ram
+   39 00:F00E: 53 00          LDA #$0000
+   39 00:F010: 5E FF          LDX #$00FF
+   39 00:F012: 4F 00 18       STA $1800
+   39                        ?ClrAllRamLoop:
+   39 00:F015: 6F 00 18       STA $1800,X
+   39 00:F018: 0F             DEX
+   39 00:F019: 12 FA          BNE ?ClrAllRamLoop
    40                        	WDTC_CLR
+   40 00:F01B: 22 1C          RMB2 WDTC
    41                        	;CHECK_LCD   ;初始化LCD
    42                        ;***************************************定时器初始化，特殊功能寄存器初始化
    43 00:F01D: 53 00         	LDA		#0
    44 00:F01F: 7F 0D         	STA		PADF1  ;定时器0的时钟源选择
    45 00:F021: 7F 10         	STA		TMR0   ;128HZ
    46 00:F023: 7F 12         	STA		TMR1   ;512
    47 00:F025: 7F 14         	STA		TMR2	;定时器的开始数
    48 00:F027: 7F 18         	STA		DIVC    ;分频控制器，定时器与DICV异步   2048
    49 00:F029: 7F 0E         	STA		IER     ;不允许中断
    50 00:F02B: 7F 0F         	STA		IFR     ;中断请求标志
    51 00:F02D: 7F 1F         	STA		AUD0    ;pwm输出值设置
    52 00:F02F: 7F 20         	STA		AUDCR   ;
    53 00:F031: 7F 05         	STA		PB
    54                        ;***************************************LCD初始化
    55                        	LCD_C_TYPE
+   55 00:F033: 2F 1A          SMB7 LCDCOM
+   55 00:F035: 28 09          SMB0 PCSEG
+   55 00:F037: 29 09          SMB1 PCSEG
+   55 00:F039: 2A 09          SMB2 PCSEG
+   55 00:F03B: 2B 09          SMB3 PCSEG
    56                        	LCD_ENCH_EN
+   56 00:F03D: 2E 1A          SMB6 LCDCOM
    57                        	;LCD_4COM
    58                        	LCD_DRIVE_8
+   58 00:F03F: 28 19          SMB0 LCDCTRL
+   58 00:F041: 29 19          SMB1 LCDCTRL
    59 00:F043: 22 19         	RMB2	LCDCTRL
    60 00:F045: 23 19         	RMB3	LCDCTRL
    61 00:F047: 28 1A         	SMB0	P_LCD_COM
    62 00:F049: 29 1A         	SMB1	P_LCD_COM;设置为4com
    63 00:F04B: 25 1A         	RMB5	P_LCD_COM;设置LCD中断频率为32Hz
    64                        ;***************************************端口配置（等待图纸）
    65 00:F04D: 15 13 F1      	JSR		L_Scankey_INIT
    66 00:F050: 53 00         	LDA		#0
    67 00:F052: 7F 09         	STA		P_PCSEG
    68                        	PB2_PB2_NOMS
+   68 00:F054: 20 0C          RMB0 PADF0
+   68 00:F056: 22 06          RMB2 PBTYPE
    69                        	PB3_PB3_NOMS
+   69 00:F058: 21 0C          RMB1 PADF0
+   69 00:F05A: 23 06          RMB3 PBTYPE
    70 00:F05C: 53 00         	LDA		#0
    71 00:F05E: 7F 05         	STA		P_PB
    72                        	; PC67_SEG
    73                        	PC03_SEG
+   73 00:F060: 28 09          SMB0 PCSEG
+   73 00:F062: 29 09          SMB1 PCSEG
+   73 00:F064: 2A 09          SMB2 PCSEG
+   73 00:F066: 2B 09          SMB3 PCSEG
    74                        	PC45_SEG
+   74 00:F068: 2C 09          SMB4 PCSEG
    75                        	PC67_SEG
+   75 00:F06A: 2D 09          SMB5 PCSEG
    76                        	PD03_SEG
+   76 00:F06C: 2E 09          SMB6 PCSEG
    77                        	PD47_SEG;
+   77 00:F06E: 2F 09          SMB7 PCSEG
    78 00:F070: 15 F2 F0      	JSR		L_Init_SystemRam_Prog   ;初始化系统RAM并禁用所有断电保留的RAM
    79 00:F073: 15 FB F0      	JSR		L_Dis_All_DisRam_Prog	;初始化系统RAM并禁用所有断电保留的RAM
    80                        ;***************************************开启中断
    81                        	DIV_1KHZ
+   81 00:F076: 28 18          SMB0 DIVC
+   81 00:F078: 29 18          SMB1 DIVC
+   81 00:F07A: 25 18          RMB5 DIVC
    82                        	TMR1_CLK_512Hz;初始化定时器1为256hz,定时器2为512hz
+   82 00:F07C: 2A 17          SMB2 TMCLK
+   82 00:F07E: 23 17          RMB3 TMCLK
    83 00:F080: 53 F6         	LDA		#246
    84 00:F082: 7F 14         	STA		TMR2
    85                        	LCD_ON
+   85 00:F084: 2C 16          SMB4 TMRC
    86                        	TMR1_ON;半秒计时
+   86 00:F086: 29 16          SMB1 TMRC
    87                        	EN_TMR1_IRQ              ;定时器和LCD使能
+   87 00:F088: 2A 0E          SMB2 IER
    88                        	EN_PA_IRQ;下降沿触发
+   88 00:F08A: 2C 0E          SMB4 IER
    89 00:F08C: 53 07         	LDA		#$07		;#$07    系统时钟和中断使能
    90 00:F08E: 7F 1D         	STA		SYSCLK		;Strong
    91 00:F090: 15 0D F1      	JSR		L_Clr_All_DisRam_Prog
    92                        	TMR2_ON
+   92 00:F093: 2A 16          SMB2 TMRC
    93                        	EN_TMR2_IRQ
+   93 00:F095: 2B 0E          SMB3 IER
    94 00:F097: 05            	CLI
    95                        ;***********************************************************************
    96                        ;***********************************************************************
    97                        MainLoop:
    98                        
    99                        
   100 00:F098: 73 BB         	LDA		R_Timer_Ms
   101 00:F09A: 56 63         	CMP		#99
   102 00:F09C: 10 04         	BCC		main
   103 00:F09E: 53 00         	LDA		#0
   104 00:F0A0: 7F BB         	STA		R_Timer_Ms
   105                        main:
   106 00:F0A2: 73 BB         	LDA		R_Timer_Ms
   107 00:F0A4: 15 E5 F8      	JSR		L_Display_lcd_Prog_Normal_Min
   108                        	; JSR		L_LCD_IRQ_WorkProg
   109                        	; JSR		L_Half_Second_Prog
   110                        	; LDA		R_Reset_Time
   111                        	; BNE		MainLoop
   112                        	; LDA		R_Voice_Unit
   113                        	; BNE		MainLoop
   114                        
   115                        
   116 00:F0A7: 2C 1D         	SMB4	SYSCLK;280k
   117 00:F0A9: 7F 1E         	STA		P_HALT
   118 00:F0AB: 24 1D         	RMB4	SYSCLK;560k
   119 00:F0AD: 17 E9         	BRA		MainLoop
   120                        
   121                        ;***********************************************************************
   122                        ;***********************************************************************
   123                        V_IRQ:
   124 00:F0AF: 0A            	PHA
   125 00:F0B0: 73 0E         	LDA		P_IER
   126 00:F0B2: 71 0F         	AND		P_IFR
   127 00:F0B4: 7F A4         	STA		R_Int_Backup
   128                        
   129 00:F0B6: 3E A4 33      	BBS6	R_Int_Backup,L_LcdIrq
   130 00:F0B9: 3B A4 12      	BBS3	R_Int_Backup,L_Timer2Irq
   131 00:F0BC: 3C A4 23      	BBS4	R_Int_Backup,L_PaIrp
   132 00:F0BF: 38 A4 08      	BBS0	R_Int_Backup,L_DivIrq
   133 00:F0C2: 3A A4 15      	BBS2	R_Int_Backup,L_Timer1Irq
   134 00:F0C5: 39 A4 0E      	BBS1	R_Int_Backup,L_Timer0Irq
   135 00:F0C8: 17 26         	BRA		L_EndIrq
   136                        
   137                        L_DivIrq:
   138                        	CLR_DIV_IRQ_FLAG
+  138 00:F0CA: 20 0F          RMB0 IFR
   139 00:F0CC: 17 22         	BRA		L_EndIrq
   140                        
   141                        L_Timer2Irq:
   142                        	CLR_TMR2_IRQ_FLAG
+  142 00:F0CE: 23 0F          RMB3 IFR
   143                        	WDTC_CLR
+  143 00:F0D0: 22 1C          RMB2 WDTC
   144 00:F0D2: 78 BB         	INC		R_Timer_Ms
   145 00:F0D4: 17 1A         	BRA		L_EndIrq
   146                        
   147                        L_Timer0Irq:
   148                        	CLR_TMR0_IRQ_FLAG
+  148 00:F0D6: 21 0F          RMB1 IFR
   149 00:F0D8: 17 16         	BRA		L_EndIrq
   150                        
   151                        L_Timer1Irq:
   152                        	CLR_TMR1_IRQ_FLAG
+  152 00:F0DA: 22 0F          RMB2 IFR
   153                        	WDTC_CLR
+  153 00:F0DC: 22 1C          RMB2 WDTC
   154 00:F0DE: 28 A6         	SMB0	Sys_Flag_B	;设置Half Second Flag
   155 00:F0E0: 17 0E         	BRA		L_EndIrq
   156                        
   157                        L_PaIrp:
   158                        	CLR_KEY_IRQ_FLAG
+  158 00:F0E2: 24 0F          RMB4 IFR
   159                        	EN_LCD_IRQ
+  159 00:F0E4: 2E 0E          SMB6 IER
   160                        	DIS_PA_IRQ
+  160 00:F0E6: 24 0E          RMB4 IER
   161 00:F0E8: 29 A5         	SMB1	Sys_Flag_A
   162 00:F0EA: 17 04         	BRA		L_EndIrq
   163                        L_LcdIrq:
   164                        	CLR_LCD_IRQ_FLAG
+  164 00:F0EC: 26 0F          RMB6 IFR
   165 00:F0EE: 28 A5         	SMB0	Sys_Flag_A	;设置LCD中断标志，64Hz扫描
   166                        L_EndIrq:
   167                        ;	BBS3	IFR,L_Timer2Irq
   168 00:F0F0: 0C            	PLA
   169 00:F0F1: 08            	RTI
   170                        ;***********************************************************************
   171                        .INCLUDE	Init.asm
     1                        ;------------------------------------------------------
     2                        L_Init_SystemRam_Prog:     ;初始化系统RAM的程序数据
     3 00:F0F2: 53 00         	LDA		#0
     4 00:F0F4: 7F CD         	STA		R_Mode
     5 00:F0F6: 53 04         	LDA		#4
     6 00:F0F8: 7F AE         	STA		R_Reset_Time
     7 00:F0FA: 09            	RTS
     8                        ;======================================================
     9                        L_Dis_All_DisRam_Prog:
    10 00:F0FB: 53 FF         	LDA		#$FF
    11 00:F0FD: 7F D7         	STA		P_Temp
    12                        L_All_DisRam:
    13 00:F0FF: 5E 00         	LDX		#0
    14                        L_Loop_DisplayRam:
    15 00:F101: 73 D7         	LDA		P_Temp
    16 00:F103: 6F 00 18      	STA		LCD_RamAddr,X
    17 00:F106: 0B            	INX
    18 00:F107: 1C            	TXA
    19 00:F108: 56 23         	CMP		#$23
    20 00:F10A: 10 F5         	BCC		L_Loop_DisplayRam    ;C=0是跳转
    21 00:F10C: 09            	RTS
    22                        ;----------------------------------------------------
    23                        L_Clr_All_DisRam_Prog:
    24 00:F10D: 53 00         	LDA		#0
    25 00:F10F: 7F D7         	STA		P_Temp
    26 00:F111: 17 EC         	BRA		L_All_DisRam
    27                        
    28                        L_Scankey_INIT:
    29 00:F113: 53 55         	LDA	#1010101B;pc0做拨键
    30                        	; LDA		#11110101B
    31 00:F115: 7F 04         	STA		P_PA_IO;PA0输出,其余输入
    32 00:F117: 53 AD         	LDA		#10101101B
    33 00:F119: 7F 01         	STA		P_PA	;其他全部下拉
    34 00:F11B: 53 AC         	LDA		#10101100B
    35 00:F11D: 7F 02         	STA		P_PA_WAKE;	将PA做唤醒
    36 00:F11F: 28 1D         	SMB0	P_SYSCLK
    37 00:F121: 09            	RTS
    38                        
    39                        
    40                        
    41                        L_PA257_Input_Low:
    42 00:F122: 53 AD         	LDA		#10101101B
    43 00:F124: 7F 01         	STA		P_PA	;其他全部下拉
    44 00:F126: 09            	RTS
    45                        L_PA257_Input_High:
    46 00:F127: 53 01         	LDA		#00000001B
    47 00:F129: 7F 01         	STA		P_PA
    48                        	RTS
    48 00:F12B: 09            
   172                        
   173                        .INCLUDE	Key\ScanKey.ASM
     1                        ;==================================================
     2                        L_LCD_IRQ_WorkProg:;
     3 00:F12C: 30 A5 0C      	BBR0	Sys_Flag_A,L_END_LCD_IRQ_WorkProg;32hz扫键
     4 00:F12F: 20 A5         	RMB0	Sys_Flag_A
     5 00:F131: 15 E9 FD      	JSR		L_control_Beep_prog
     6 00:F134: 73 AE         	LDA		R_Reset_Time
     7 00:F136: 12 03         	BNE		L_END_LCD_IRQ_WorkProg
     8 00:F138: 15 58 F1      	JSR		L_Scankey_Prog
     9                        L_END_LCD_IRQ_WorkProg:
    10 00:F13B: 09                RTS
    11                        ; ==============================================
    12                        L_ScanKey_Null_Prog:;如果编码器没有开启退出并且扫描到空键，停止按键扫描
    13 00:F13C: 73 D6         	LDA		R_Voice_Unit
    14 00:F13E: 12 FB         	BNE		L_END_LCD_IRQ_WorkProg
    15                        	DIS_LCD_IRQ
+   15 00:F140: 26 0E          RMB6 IER
    16                        	EN_PA_IRQ
+   16 00:F142: 2C 0E          SMB4 IER
    17 00:F144: 09            	RTS
    18                        L_Scankey_Prog_Ineffective:
    19 00:F145: 53 E9         	LDA		#11101001B
    20 00:F147: 71 A5         	AND		Sys_Flag_A
    21 00:F149: 7F A5         	STA		Sys_Flag_A
    22 00:F14B: 15 20 F4      	JSR		L_Scankey_usually_Prog
    23 00:F14E: 73 B1         	LDA		P_Scankey_value_Temporary
    24 00:F150: 12 E9         	BNE		L_END_LCD_IRQ_WorkProg;如果为0则执行空键程序
    25 00:F152: 15 22 F1      	JSR		L_PA257_Input_Low
    26 00:F155: 25 A5         	RMB5	Sys_Flag_A;清空无效标志位
    27 00:F157: 09            	RTS
    28                        
    29                        ;====================================================
    30                        L_Scankey_Prog:
    31 00:F158: 39 A5 24      	BBS1	Sys_Flag_A,L_Scankey_Prog_First;首次扫描判断
    32 00:F15B: 3C A5 1E      	BBS4	Sys_Flag_A,L_Scankey_Prog_Fast_Plus_TO;快加情况
    33 00:F15E: 3D A5 E4      	BBS5	Sys_Flag_A,L_Scankey_Prog_Ineffective
    34 00:F161: 32 A5 D8      	BBR2	Sys_Flag_A,L_ScanKey_Null_Prog;没有按键扫描标志
    35 00:F164: 15 20 F4      	JSR		L_Scankey_usually_Prog
    36 00:F167: 73 B1         	LDA		P_Scankey_value_Temporary
    37 00:F169: 76 B0         	CMP		P_Scankey_value
    38 00:F16B: 12 0C         	BNE		L_Scankey_Prog_Short_Press_TO
    39                        
    40 00:F16D: 73 AF         	LDA		R_Scankey_Time
    41 00:F16F: 56 40         	CMP		#D_Rscankey_TWO_Sec
    42 00:F171: 11 03         	BCS		L_Scankey_Prog_Long_Press_TO
    43 00:F173: 78 AF         	INC		R_Scankey_Time
    44 00:F175: 09            	RTS
    45                        L_Scankey_Prog_Long_Press_TO:
    46 00:F176: 16 79 F3      	JMP		L_Scankey_Prog_Long_Press
    47                        L_Scankey_Prog_Short_Press_TO:
    48 00:F179: 16 76 F3      	JMP		L_Scankey_Prog_Short_Press
    49                        L_Scankey_Prog_Fast_Plus_TO:
    50 00:F17C: 16 84 F3      	JMP		L_Scankey_Prog_Fast_Plus
    51                        L_Scankey_Prog_First:
    52 00:F17F: 53 C9         	LDA		#11001001B
    53 00:F181: 71 A5         	AND		Sys_Flag_A
    54 00:F183: 7F A5         	STA		Sys_Flag_A;清空无效标志位
    55                        
    56 00:F185: 15 20 F4      	JSR		L_Scankey_usually_Prog
    57 00:F188: 73 B1         	LDA		P_Scankey_value_Temporary
    58 00:F18A: 13 B0         	BEQ		L_ScanKey_Null_Prog
    59 00:F18C: 7F B0         	STA		P_Scankey_value
    60                        
    61                        
    62 00:F18E: 53 00         	LDA		#0
    63 00:F190: 7F D5         	STA		R_Close_Beep_Time
    64 00:F192: 7F D6         	STA		R_Voice_Unit
    65 00:F194: 7F D0         	STA		R_Set_Mode_Exit_Time
    66 00:F196: 7F D4         	STA		R_Alarm_Clock_Open_Beep_Time
    67 00:F198: 7F AF         	STA		R_Scankey_Time
    68                        
    69                        
    70                        	; BBS4	Sys_Flag_D,L_Scankey_Short_ST_SP_Press_Prog_Alarm_TO
    71                        	; BBS4	Sys_Flag_C,L_Scankey_Short_ST_SP_Press_Prog_Alarm_TO;闹铃判断
    72 00:F19A: 2A A5         	SMB2	Sys_Flag_A
    73                        
    74 00:F19C: 73 B0         	LDA		P_Scankey_value
    75 00:F19E: 56 10         	CMP		#D_Light_Press
    76                        	; BEQ		L_ScanKey_Light_Press_Prog_TO
    77                        ;=======================
    78                        ;-----按键无效键和按下触发的事件判定
    79 00:F1A0: 3B A5 27      	BBS3	Sys_Flag_A,L_Scankey_Set_Mode_First_Press_Prog_TO
    80 00:F1A3: 73 B0         	LDA		P_Scankey_value
    81 00:F1A5: 56 04         	CMP		#D_Mode_Press
    82 00:F1A7: 13 24         	BEQ		L_Scankey_Mode_Press_Prog_TO
    83 00:F1A9: 73 CD         	LDA		R_Mode
    84 00:F1AB: 13 23         	BEQ		L_Clock_First_Press_Prog_TO
    85 00:F1AD: 56 01         	CMP		#1
    86 00:F1AF: 13 22         	BEQ		L_Alarm_First_Press_Prog_TO
    87 00:F1B1: 56 02         	CMP		#2
    88 00:F1B3: 13 21         	BEQ		L_Positive_Timer_First_Press_Prog_TO
    89 00:F1B5: 56 03         	CMP		#3
    90 00:F1B7: 13 20         	BEQ		L_Clock_Twice_First_Press_Prog_TO
    91 00:F1B9: 56 04         	CMP		#4
    92 00:F1BB: 13 1F         	BEQ		L_Desitive_Timer_First_Press_Prog_TO
    93 00:F1BD: 53 00         	LDA		#0
    94 00:F1BF: 7F CD         	STA		R_Mode
    95 00:F1C1: 15 0D F1      	JSR		L_Clr_All_DisRam_Prog
    96 00:F1C4: 15 51 F6      	JSR		L_Display_Prog
    97 00:F1C7: 2D A5         	SMB5	Sys_Flag_A
    98                        L_Scankey_Prog_First_OUT:
    99 00:F1C9: 09            	RTS
   100                        ;==============================================
   101                        L_Scankey_Set_Mode_First_Press_Prog_TO:
   102 00:F1CA: 16 E8 F1      	JMP		L_Scankey_Set_Mode_First_Press_Prog
   103                        L_Scankey_Mode_Press_Prog_TO:
   104 00:F1CD: 16 F9 F1      	JMP		L_Scankey_Mode_Press_Prog
   105                        L_Clock_First_Press_Prog_TO:
   106 00:F1D0: 16 22 F2      	JMP		L_Clock_First_Press_Prog
   107                        L_Alarm_First_Press_Prog_TO:
   108 00:F1D3: 16 3E F2      	JMP		L_Alarm_First_Press_Prog
   109                        L_Positive_Timer_First_Press_Prog_TO:
   110 00:F1D6: 16 7D F2      	JMP		L_Positive_Timer_First_Press_Prog
   111                        L_Clock_Twice_First_Press_Prog_TO:
   112 00:F1D9: 16 BF F2      	JMP		L_Clock_Twice_First_Press_Prog
   113                        L_Desitive_Timer_First_Press_Prog_TO:
   114 00:F1DC: 16 C8 F2      	JMP		L_Desitive_Timer_First_Press_Prog
   115                        L_Scankey_Set_Mode_Mode_First_Press_Prog_TO
   116 00:F1DF: 16 06 F3      	JMP		L_Scankey_Set_Mode_Mode_First_Press_Prog
   117                        L_Scankey_Set_Mode_Reset_First_Press_Prog_TO:
   118 00:F1E2: 16 2A F3      	JMP		L_Scankey_Set_Mode_Reset_First_Press_Prog
   119                        L_Scankey_Set_Mode_ST_SP_First_Press_Prog_TO:
   120 00:F1E5: 16 5D F3      	JMP		L_Scankey_Plus_Prog
   121                        ;============================================
   122                        L_Scankey_Set_Mode_First_Press_Prog:
   123 00:F1E8: 73 B0         	LDA		P_Scankey_value
   124 00:F1EA: 56 04         	CMP		#D_Mode_Press
   125 00:F1EC: 13 F1         	BEQ		L_Scankey_Set_Mode_Mode_First_Press_Prog_TO
   126 00:F1EE: 56 30         	CMP		#D_Reset_Press
   127 00:F1F0: 13 F0         	BEQ		L_Scankey_Set_Mode_Reset_First_Press_Prog_TO
   128 00:F1F2: 53 08         	LDA		#D_ST_SP_Press
   129 00:F1F4: 13 EF         	BEQ		L_Scankey_Set_Mode_ST_SP_First_Press_Prog_TO
   130 00:F1F6: 2D A5         	SMB5	Sys_Flag_A
   131                        	RTS
   131 00:F1F8: 09            
   174                        .INCLUDE	Key\Scankey_First_Press.asm
     1                        ;======================================================================
     2                        ;非设置模式下吗,任何模式Mode键按下触发，更改显示模式
     3                        ;======================================================================
     4                        L_Scankey_Mode_Press_Prog:
     5 00:F1F9: 15 79 FE      	JSR		L_Beep_1s
     6 00:F1FC: 2D A5         	SMB5	Sys_Flag_A
     7 00:F1FE: 15 0D F1      	JSR		L_Clr_All_DisRam_Prog
     8 00:F201: 73 CD         	LDA		R_Mode
     9 00:F203: 56 04         	CMP		#4
    10 00:F205: 11 0D         	BCS		L_Scankey_Mode_Press_Prog_Clr
    11 00:F207: 78 CD         	INC		R_Mode
    12 00:F209: 56 02         	CMP		#2
    13 00:F20B: 13 0D         	BEQ		L_Scankey_Mode_Press_Prog_2
    14 00:F20D: 56 03         	CMP		#3
    15 00:F20F: 13 0D         	BEQ		L_Scankey_Mode_Press_Prog_3
    16                        L_Scankey_Mode_Press_Prog_1:
    17 00:F211: 16 51 F6      	JMP		L_Display_Prog
    18                        L_Scankey_Mode_Press_Prog_Clr:
    19 00:F214: 53 00         	LDA		#0
    20 00:F216: 7F CD         	STA		R_Mode
    21 00:F218: 17 F7         	BRA		L_Scankey_Mode_Press_Prog_1
    22                        
    23                        L_Scankey_Mode_Press_Prog_2:
    24 00:F21A: 20 A6         	RMB0	Sys_Flag_B
    25 00:F21C: 17 F3         	BRA		L_Scankey_Mode_Press_Prog_1
    26                        L_Scankey_Mode_Press_Prog_3:
    27 00:F21E: 25 A8         	RMB5	Sys_Flag_D
    28 00:F220: 17 EF         	BRA		L_Scankey_Mode_Press_Prog_1
    29                        ;======================================================================
    30                        ;非设置模式下吗,时钟模式短按Reset无反应，长按进入时间设置模式
    31                        ;短按ST/SP键切换12/24小时制，全部没有按键音,按下触发
    32                        ;======================================================================
    33                        L_Clock_First_Press_Prog:
    34 00:F222: 73 B0         	LDA		P_Scankey_value
    35 00:F224: 56 08         	CMP		#D_ST_SP_Press
    36 00:F226: 13 07         	BEQ		L_Clock_First_ST_SP_Press_Prog
    37 00:F228: 56 30         	CMP		#D_Reset_Press
    38 00:F22A: 13 02         	BEQ		L_Clock_First_Press_Prog_OUT
    39 00:F22C: 2D A5         	SMB5	Sys_Flag_A
    40                        L_Clock_First_Press_Prog_OUT:
    41 00:F22E: 09            	RTS
    42                        L_Clock_First_ST_SP_Press_Prog:
    43 00:F22F: 2D A5         	SMB5	Sys_Flag_A
    44 00:F231: 3A A6 05      	BBS2	Sys_Flag_B,L_Clock_First_Press_PM_Prog
    45 00:F234: 2A A6         	SMB2	Sys_Flag_B
    46 00:F236: 16 DB F6      	JMP		L_Display_Time_Hr_Prog
    47                        L_Clock_First_Press_PM_Prog:
    48 00:F239: 22 A6         	RMB2	Sys_Flag_B
    49 00:F23B: 16 DB F6      	JMP		L_Display_Time_Hr_Prog
    50                        ;======================================================================
    51                        ;非设置模式下吗,闹钟模式，短按ST/SP键切换闹钟界面和整点报时界面，无按键音
    52                        ;短按RESET，在整点报时界面，开启或关闭整点报时，按下触发
    53                        ;在闹钟界面,按下触发闹铃模式的切换，关闭，普通和贪睡
    54                        ;======================================================================
    55                        L_Alarm_First_Press_Prog:
    56 00:F23E: 73 B0         	LDA		P_Scankey_value
    57 00:F240: 56 08         	CMP		#D_ST_SP_Press
    58 00:F242: 13 06         	BEQ		L_Alarm_First_ST_SP_Press_Prog
    59 00:F244: 56 30         	CMP		#D_Reset_Press
    60 00:F246: 13 11         	BEQ		L_Alarm_First_Reset_Press_Prog
    61 00:F248: 2D A5         	SMB5	Sys_Flag_A
    62                        L_Alarm_First_ST_SP_Press_Prog:
    63 00:F24A: 2D A5         	SMB5	Sys_Flag_A
    64 00:F24C: 38 A7 05      	BBS0	Sys_Flag_C,L_Alarm_First_Press_Change_Prog;如果为1跳转整点报时切换为闹钟界面
    65 00:F24F: 28 A7         	SMB0	Sys_Flag_C
    66 00:F251: 16 BD F7      	JMP		L_Display_Alarm_Hourly_Prog
    67                        L_Alarm_First_Press_Change_Prog:
    68 00:F254: 20 A7         	RMB0	Sys_Flag_C
    69 00:F256: 16 7B F6      	JMP		L_Display_Alarm_Prog
    70                        ;------------------------------------
    71                        L_Alarm_First_Reset_Press_Prog:
    72 00:F259: 38 A7 12      	BBS0	Sys_Flag_C,L_Alarm_First_Reset_Press_Prog_Every_Hour_Mode
    73 00:F25C: 73 C9         	LDA		R_Alarm_Mode
    74 00:F25E: 56 02         	CMP		#2
    75 00:F260: 11 05         	BCS		L_Alarm_First_Reset_Press_Prog_Alarm_Prog_Clr
    76 00:F262: 78 C9         	INC		R_Alarm_Mode
    77 00:F264: 16 34 F8      	JMP		L_Dis_Alm_Snz_Symbol_Prog
    78                        L_Alarm_First_Reset_Press_Prog_Alarm_Prog_Clr:
    79 00:F267: 53 00         	LDA		#0
    80 00:F269: 7F C9         	STA		R_Alarm_Mode
    81 00:F26B: 16 2A F8      	JMP		L_Clr_Alm_Snz_Symbol_Prog
    82                        L_Alarm_First_Reset_Press_Prog_Every_Hour_Mode:
    83 00:F26E: 2D A5         	SMB5	Sys_Flag_A
    84 00:F270: 39 A7 05      	BBS1	Sys_Flag_C,L_Alarm_First_Reset_Press_Prog_Every_Hour_Mode_Close
    85 00:F273: 29 A7         	SMB1	Sys_Flag_C
    86 00:F275: 16 46 F8      	JMP		L_Dis_Sig_Symbol_Prog
    87                        L_Alarm_First_Reset_Press_Prog_Every_Hour_Mode_Close:
    88 00:F278: 21 A7         	RMB1	Sys_Flag_C
    89 00:F27A: 16 4B F8      	JMP		L_Clr_Sig_Symbol_Prog
    90                        ;======================================================================
    91                        ;非设置模式下吗,正计时模式，短按ST/SP键，开始或停止计时，存在按键音
    92                        ;短按RESET，在计时途中，中途测量被设置，再次按下被取消
    93                        ;======================================================================
    94                        L_Positive_Timer_First_Press_Prog:
    95 00:F27D: 2D A5         	SMB5	Sys_Flag_A
    96 00:F27F: 73 B0         	LDA		P_Scankey_value
    97 00:F281: 56 08         	CMP		#D_ST_SP_Press
    98 00:F283: 13 05         	BEQ		L_Positive_Timer_First_ST_SP_Press_Prog
    99 00:F285: 56 30         	CMP		#D_Reset_Press
   100 00:F287: 13 19         	BEQ		L_Positive_Timer_First_RESET_Press_Prog
   101 00:F289: 09            	RTS
   102                        ;--------------------------------------------------
   103                        L_Positive_Timer_First_ST_SP_Press_Prog:
   104 00:F28A: 38 A8 09      	BBS0	Sys_Flag_D,L_Positive_Timer_First_SP_Press_Prog
   105 00:F28D: 28 A8         	SMB0	Sys_Flag_D
   106                        	CLR_TMR2_IRQ_FLAG
+  106 00:F28F: 23 0F          RMB3 IFR
   107                        	TMR2_ON
+  107 00:F291: 2A 16          SMB2 TMRC
   108                        	EN_TMR2_IRQ
+  108 00:F293: 2B 0E          SMB3 IER
   109                        L_Positive_Timer_First_ST_SP_Press_Prog_OUT:
   110 00:F295: 09            	RTS
   111                        L_Positive_Timer_First_SP_Press_Prog:
   112 00:F296: 20 A8         	RMB0	Sys_Flag_D
   113                        	DIS_TMR2_IRQ
+  113 00:F298: 23 0E          RMB3 IER
   114                        	TMR2_OFF
+  114 00:F29A: 22 16          RMB2 TMRC
   115 00:F29C: 3D A8 F6      	BBS5	Sys_Flag_D,L_Positive_Timer_First_ST_SP_Press_Prog_OUT
   116 00:F29F: 16 8A F6      	JMP		L_Display_Postive_Timer_Prog
   117                        ;----------------------------------------------------
   118                        L_Positive_Timer_First_RESET_Press_Prog:
   119 00:F2A2: 2D A5         	SMB5	Sys_Flag_A
   120 00:F2A4: 38 A8 0E      	BBS0	Sys_Flag_D,L_Positive_Timer_Midway_Measurement
   121 00:F2A7: 3D A8 11      	BBS5	Sys_Flag_D,L_Positive_Timer_Midway_Measurement_2
   122 00:F2AA: 53 00         	LDA		#0
   123 00:F2AC: 7F BC         	STA		R_Timer_Sec
   124 00:F2AE: 7F BD         	STA		R_Timer_Min
   125 00:F2B0: 7F BE         	STA		R_Timer_Hr
   126                        L_Positive_Timer_Midway_Measurement_1:
   127 00:F2B2: 16 8A F6      	JMP		L_Display_Postive_Timer_Prog
   128                        L_Positive_Timer_Midway_Measurement:
   129 00:F2B5: 3D A8 03      	BBS5	Sys_Flag_D,L_Positive_Timer_Midway_Measurement_2
   130 00:F2B8: 2D A8         	SMB5	Sys_Flag_D
   131 00:F2BA: 09            	RTS
   132                        L_Positive_Timer_Midway_Measurement_2:
   133 00:F2BB: 25 A8         	RMB5	Sys_Flag_D
   134 00:F2BD: 17 F3         	BRA		L_Positive_Timer_Midway_Measurement_1
   135                        ;======================================================================
   136                        ;非设置模式下吗,第二时间模式，长按RESET，进入设置模式
   137                        ;======================================================================
   138                        L_Clock_Twice_First_Press_Prog:
   139 00:F2BF: 73 B0         	LDA		P_Scankey_value
   140 00:F2C1: 56 30         	CMP		#D_Reset_Press
   141 00:F2C3: 13 02         	BEQ		L_Clock_Twice_First_Press_Prog_OUT
   142 00:F2C5: 2D A5         	SMB5	Sys_Flag_A
   143                        L_Clock_Twice_First_Press_Prog_OUT:
   144 00:F2C7: 09            	RTS
   145                        ;======================================================================
   146                        ;非设置模式下吗,倒计时模式，长按RESET，进入设置模式，ST/SP开始或停止计时
   147                        ;======================================================================
   148                        L_Desitive_Timer_First_Press_Prog:
   149 00:F2C8: 73 B0         	LDA		P_Scankey_value
   150 00:F2CA: 56 30         	CMP		#D_Reset_Press
   151 00:F2CC: 13 25         	BEQ		L_Desitive_Timer_First_Reset_Press_Prog
   152 00:F2CE: 56 08         	CMP		#D_ST_SP_Press
   153 00:F2D0: 13 03         	BEQ		L_Desitive_Timer_First_ST_SP_Press_Prog
   154 00:F2D2: 2D A5         	SMB5	Sys_Flag_A
   155 00:F2D4: 09            	RTS
   156                        L_Desitive_Timer_First_ST_SP_Press_Prog:
   157 00:F2D5: 2D A8         	SMB5	Sys_Flag_D
   158 00:F2D7: 39 A8 16      	BBS1	Sys_Flag_D,L_Desitive_Timer_First_ST_SP_Press_Prog_ST
   159 00:F2DA: 29 A8         	SMB1	Sys_Flag_D
   160 00:F2DC: 3A A8 E8      	BBS2	Sys_Flag_D,L_Clock_Twice_First_Press_Prog_OUT;是否进入过倒计时功能
   161 00:F2DF: 2A A8         	SMB2	Sys_Flag_D
   162 00:F2E1: 73 C1         	LDA		R_Timer_Hr_Countdown
   163 00:F2E3: 70 C0         	ORA		R_Timer_Min_Countdown
   164 00:F2E5: 12 E0         	BNE		L_Clock_Twice_First_Press_Prog_OUT
   165 00:F2E7: 53 18         	LDA		#24
   166 00:F2E9: 7F C1         	STA		R_Timer_Hr_Countdown
   167 00:F2EB: 7F C4         	STA		R_Timer_Hr_Backup
   168 00:F2ED: 16 9C F6      	JMP		L_Display_Destive_Timer_Prog
   169                        L_Desitive_Timer_First_ST_SP_Press_Prog_ST:
   170 00:F2F0: 21 A8         	RMB1	Sys_Flag_D
   171 00:F2F2: 09            	RTS
   172                        L_Desitive_Timer_First_Reset_Press_Prog:
   173 00:F2F3: 39 A8 0D      	BBS1	Sys_Flag_D,L_Desitive_Timer_First_Reset_Press_Prog_1
   174 00:F2F6: 22 A8         	RMB2	Sys_Flag_D
   175 00:F2F8: 73 C4         	LDA		R_Timer_Hr_Backup
   176 00:F2FA: 7F C1         	STA		R_Timer_Hr_Countdown
   177 00:F2FC: 73 C3         	LDA		R_Timer_Min_Backup
   178 00:F2FE: 7F C0         	STA		R_Timer_Min_Countdown
   179 00:F300: 16 3F F6      	JMP		L_Display_Destive_Timer_Set_Mode_Prog
   180                        
   181                        L_Desitive_Timer_First_Reset_Press_Prog_1:
   182 00:F303: 2D A5         	SMB5	Sys_Flag_A
   183                        	RTS
   183 00:F305: 09            
   175                        .INCLUDE	Key\Scankey_First_Set_Mode.asm
     1                        ;==========================================
     2                        ;设置模式下，按下mode键更换设置的情况
     3                        L_Scankey_Set_Mode_Mode_First_Press_Prog:
     4 00:F306: 2D A5             SMB5    Sys_Flag_A
     5 00:F308: 73 CD             LDA     R_Mode
     6 00:F30A: 56 02             CMP     #2
     7 00:F30C: 11 0F             BCS     L_Scankey_Set_Mode_Mode_First_Press_Prog_OUT
     8 00:F30E: 1B                TAX
     9 00:F30F: 63 25 F3          LDA     Table_Set_Mode,X
    10 00:F312: 7F D7             STA     P_Temp
    11 00:F314: 73 CE             LDA     R_Mode_Set
    12 00:F316: 76 D7             CMP     P_Temp
    13 00:F318: 11 04             BCS     L_Scankey_Set_Mode_Mode_First_Press_Prog_1
    14 00:F31A: 15 02 F6          JSR     L_Display_Set_Mode_Prog
    15                        L_Scankey_Set_Mode_Mode_First_Press_Prog_OUT:
    16 00:F31D: 09                RTS
    17                        
    18                        L_Scankey_Set_Mode_Mode_First_Press_Prog_1:
    19 00:F31E: 53 00             LDA     #0
    20 00:F320: 7F CE             STA     R_Mode_Set
    21 00:F322: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    22                        Table_Set_Mode:
    23 00:F325: 05                DB      5
    24 00:F326: 03                DB      3
    25 00:F327: 00                DB      0
    26 00:F328: 01                DB      1
    27 00:F329: 01                DB      1
    28                        ;============================================
    29                        ;设置模式下按下Reset键
    30                        ;=============================================
    31                        L_Scankey_Set_Mode_Reset_First_Press_Prog:
    32 00:F32A: 2D A5             SMB5    Sys_Flag_A
    33 00:F32C: 53 00             LDA     #0
    34 00:F32E: 7F CE             STA     R_Mode_Set
    35 00:F330: 23 A5             RMB3    Sys_Flag_A
    36 00:F332: 15 51 F6          JSR     L_Display_Prog
    37 00:F335: 73 CD             LDA     R_Mode
    38 00:F337: 56 01             CMP     #1
    39 00:F339: 12 E2             BNE     L_Scankey_Set_Mode_Mode_First_Press_Prog_OUT
    40 00:F33B: 73 C7             LDA     R_Alarm_Clock_Day
    41 00:F33D: 70 C8             ORA     R_Alarm_Clock_Month
    42 00:F33F: 12 05             BNE     L_Scankey_Set_Mode_Reset_First_Press_Prog_1
    43 00:F341: 53 00             LDA     #0
    44 00:F343: 7F CA             STA     R_Alarm_Clock_Mode
    45 00:F345: 09                RTS
    46                        L_Scankey_Set_Mode_Reset_First_Press_Prog_1:
    47 00:F346: 73 C7             LDA     R_Alarm_Clock_Day
    48 00:F348: 12 05             BNE     L_Scankey_Set_Mode_Reset_First_Press_Prog_2
    49 00:F34A: 53 02             LDA     #2
    50 00:F34C: 7F CA             STA     R_Alarm_Clock_Mode
    51 00:F34E: 09                RTS
    52                        L_Scankey_Set_Mode_Reset_First_Press_Prog_2:
    53 00:F34F: 73 C8             LDA     R_Alarm_Clock_Month
    54 00:F351: 12 05             BNE     L_Scankey_Set_Mode_Reset_First_Press_Prog_3
    55 00:F353: 53 03             LDA     #3
    56 00:F355: 7F CA             STA     R_Alarm_Clock_Mode
    57 00:F357: 09                RTS
    58                        L_Scankey_Set_Mode_Reset_First_Press_Prog_3:
    59 00:F358: 53 01             LDA     #1
    60 00:F35A: 7F CA             STA     R_Alarm_Clock_Mode
    61 00:F35C: 09                RTS
    62                        ;============================================
    63                        ;设置模式下按下ST/SP键
    64                        ;=============================================
    65                        L_Scankey_Plus_Prog:
    66 00:F35D: 06                CLD
    67 00:F35E: 73 CD             LDA     R_Mode
    68 00:F360: 04                CLC
    69 00:F361: 18                ROL
    70 00:F362: 1B                TAX
    71 00:F363: 63 6D F3          LDA     Table_Plus+1,X
    72 00:F366: 0A                PHA
    73 00:F367: 63 6C F3          LDA     Table_Plus,X
    74 00:F36A: 0A                PHA
    75 00:F36B: 09                RTS
    76                        Table_Plus:
    77 00:F36C: 9C F3             DW      L_Scankey_Plus_Time_Prog-1
    78 00:F36E: 02 F4             DW      L_Scankey_Plus_Alarm_Clock_Prog-1
    79 00:F370: E2 F3             DW      L_Scankey_Plus_Positive_Prog-1
    80 00:F372: D2 F3             DW      L_Scankey_Plus_Another_Time_Prog-1
    81 00:F374: E3 F3             DW      L_Scankey_Plus_Desitive_Prog-1
    82                        ;===========================================
    83                        L_Scankey_Prog_Short_Press:
    84 00:F376: 2D A5             SMB5    Sys_Flag_A
    85 00:F378: 09                RTS
    86                        L_Scankey_Prog_Long_Press:
    87 00:F379: 3B A5 05          BBS3    Sys_Flag_A,L_Scankey_Prog_Fast_Set
    88 00:F37C: 2B A5             SMB3    Sys_Flag_A
    89 00:F37E: 2D A5             SMB5    Sys_Flag_A
    90 00:F380: 09                RTS
    91                        L_Scankey_Prog_Fast_Set:
    92 00:F381: 2C A5             SMB4    Sys_Flag_A
    93 00:F383: 09                RTS
    94                        L_Scankey_Prog_Fast_Plus:
    95 00:F384: 15 20 F4          JSR     L_Scankey_usually_Prog
    96 00:F387: 73 B1             LDA     P_Scankey_value_Temporary
    97 00:F389: 76 B0             CMP     P_Scankey_value
    98 00:F38B: 12 E9             BNE     L_Scankey_Prog_Short_Press
    99 00:F38D: 73 D1             LDA     R_Fast_Plus_Time
   100 00:F38F: 56 04             CMP     #4
   101 00:F391: 11 03             BCS     L_Scankey_Prog_Fast_Plus_1
   102 00:F393: 78 D1             INC     R_Fast_Plus_Time
   103 00:F395: 09                RTS
   104                        L_Scankey_Prog_Fast_Plus_1:
   105 00:F396: 53 00             LDA     #0
   106 00:F398: 7F D1             STA     R_Fast_Plus_Time
   107 00:F39A: 16 5D F3          JMP     L_Scankey_Plus_Prog
   107                        
   176                        .INCLUDE	Key\Plus.asm
     1                        L_Scankey_Plus_Time_Prog:
     2 00:F39D: 15 A6 F3          JSR     L_Scankey_Plus_Time_Prog_1
     3 00:F3A0: 15 45 FB          JSR     L_Judge_MaxDay_Prog
     4 00:F3A3: 16 02 F6          JMP     L_Display_Set_Mode_Prog
     5                        L_Scankey_Plus_Time_Prog_1:
     6 00:F3A6: 06                CLD
     7 00:F3A7: 73 CE             LDA     R_Mode_Set
     8 00:F3A9: 04                CLC
     9 00:F3AA: 18                ROL
    10 00:F3AB: 1B                TAX
    11 00:F3AC: 63 B6 F3          LDA     Table_Plus_1+1,X
    12 00:F3AF: 0A                PHA
    13 00:F3B0: 63 B5 F3          LDA     Table_Plus_1,X
    14 00:F3B3: 0A                PHA
    15 00:F3B4: 09                RTS
    16                        
    17                        Table_Plus_1:
    18 00:F3B5: C0 F3             DW      L_Scankey_Plus_Time_Sec_Prog-1
    19 00:F3B7: A7 FA             DW      L_Update_Time_Hr_Prog-1
    20 00:F3B9: A2 FA             DW      L_Update_Time_Min_Prog-1
    21 00:F3BB: BD FA             DW      L_Update_Time_Year_Prog-1
    22 00:F3BD: B6 FA             DW      L_Update_Time_Month_Prog-1
    23 00:F3BF: AE FA             DW      L_Update_Time_Day_Prog-1
    24                        L_Scankey_Plus_Time_Sec_Prog:
    25 00:F3C1: 73 B2             LDA     R_Time_Sec
    26 00:F3C3: 7F D7             STA     P_Temp
    27 00:F3C5: 53 00             LDA     #0
    28 00:F3C7: 7F B2             STA     R_Time_Sec
    29 00:F3C9: 73 D7             LDA     P_Temp
    30 00:F3CB: 56 1E             CMP     #30
    31 00:F3CD: 10 01             BCC     L_Scankey_Plus_Time_Sec_Prog_1
    32 00:F3CF: 09                RTS
    33                        L_Scankey_Plus_Time_Sec_Prog_1:
    34 00:F3D0: 16 A3 FA          JMP     L_Update_Time_Min_Prog
    35                        ;==============================================
    36                        ;第二时间的加法
    37                        ;============================================
    38                        L_Scankey_Plus_Another_Time_Prog:
    39 00:F3D3: 73 CE             LDA     R_Mode_Set
    40 00:F3D5: 12 06             BNE     L_Scankey_Plus_Another_Time_Prog_Min
    41 00:F3D7: 15 DB FA          JSR     L_Update_Another_Time_Hr_Prog
    42 00:F3DA: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    43                        L_Scankey_Plus_Another_Time_Prog_Min:
    44 00:F3DD: 15 D6 FA          JSR     L_Update_Another_Time_Min_Prog
    45 00:F3E0: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    46                        ;=====================================
    47                        L_Scankey_Plus_Positive_Prog:
    48 00:F3E3: 09                RTS
    49                        ;=====================================
    50                        L_Scankey_Plus_Desitive_Prog:
    51 00:F3E4: 53 00             LDA     #0
    52 00:F3E6: 7F BF             STA     R_Timer_Sec_Countdown
    53 00:F3E8: 7F C2             STA     R_Timer_Sec_Backup
    54 00:F3EA: 73 CE             LDA     R_Mode_Set
    55 00:F3EC: 12 0B             BNE     L_Scankey_Plus_Desitive_Prog_Min
    56 00:F3EE: 15 06 FD          JSR     L_Update_Timer_Hr_Prog_Desitive_INC
    57 00:F3F1: 73 C1             LDA     R_Timer_Hr_Countdown
    58 00:F3F3: 7F C4             STA     R_Timer_Hr_Backup
    59 00:F3F5: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    60 00:F3F8: 09                RTS
    61                        L_Scankey_Plus_Desitive_Prog_Min:
    62 00:F3F9: 15 0D FD          JSR     L_Update_Timer_Min_Prog_Desitive_INC
    63 00:F3FC: 73 C0             LDA     R_Timer_Min_Countdown
    64 00:F3FE: 7F C3             STA     R_Timer_Min_Backup
    65 00:F400: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    66                        
    67                        L_Scankey_Plus_Alarm_Clock_Prog:
    68 00:F403: 15 09 F4          JSR     L_Scankey_Plus_Alarm_Clock_Prog_1
    69 00:F406: 16 02 F6          JMP     L_Display_Set_Mode_Prog
    70                        
    71                        L_Scankey_Plus_Alarm_Clock_Prog_1:
    72 00:F409: 06                CLD
    73 00:F40A: 73 CE             LDA     R_Mode_Set
    74 00:F40C: 04                CLC
    75 00:F40D: 18                ROL
    76 00:F40E: 1B                TAX
    77 00:F40F: 63 19 F4          LDA     Table_Plus_2+1,X
    78 00:F412: 0A                PHA
    79 00:F413: 63 18 F4          LDA     Table_Plus_2,X
    80 00:F416: 0A                PHA
    81 00:F417: 09                RTS
    82                        Table_Plus_2:
    83 00:F418: 80 FC             DW      L_Update_Alarm_Clock_Min_Prog-1
    84 00:F41A: 85 FC             DW      L_Update_Alarm_Clock_Hr_Prog-1
    85 00:F41C: 93 FC             DW      L_Update_Alarm_Clock_Month_Prog-1
    86 00:F41E: 8C FC             DW      L_Update_Alarm_Clock_Day_Prog-1
    86                        
   177                        .INCLUDE	Key\Scankey_Normal.asm
     1                        L_Scankey_usually_Prog:
     2 00:F420: 15 22 F1          JSR		L_PA257_Input_Low;对按键进行初始化
     3 00:F423: 15 6E FE      	JSR		L_ScanKey_Delay_Prog
     4 00:F426: 73 01         	LDA		P_PA
     5 00:F428: 51 3C         	AND		#D_Key_value;将所需要的值相与
     6 00:F42A: 7F B1         	STA		P_Scankey_value_Temporary
     7 00:F42C: 15 27 F1      	JSR		L_PA257_Input_High
     8                        	RTS
     8 00:F42F: 09            
   178                        
   179                        .INCLUDE	Display\Disp.asm
     1                        ;===========================================================
     2                        ;程序功能：	显示8BIT字段
     3                        ;程序入口：	A =  显示内容
     4                        ;			X =  ofc
     5                        ;影响资源：P_Temp，P_Temp+1，P_Temp+2，P_Temp+3,X，A
     6                        ;===========================================================
     7                        L_Dis_8Bit_DigitDot_Prog:
     8                        ;	STA		P_Temp
     9                        ;	LDA		Table_Digit_Addr_Offset,X
    10 00:F430: 7C D8         	STX		P_Temp+1;显示在那个位置上
    11 00:F432: 1B            	TAX
    12 00:F433: 63 9A F4      	LDA		Table_Digit_DataDot,X;查要显示的数对应的段码
    13 00:F436: 7E D8         	LDX		P_Temp+1
    14                        F_DispPro:
    15 00:F438: 7F D7         	STA		P_Temp;保存显示的数对应的段码
    16 00:F43A: 7C D8         	STX		P_Temp+1;再次保存显示位置
    17 00:F43C: 53 07         	LDA		#7
    18 00:F43E: 7F DA         	STA		P_Temp+3	;显示段数
    19                        L_Judge_Dis_8Bit_DigitDot:;显示循环的开始
    20 00:F440: 7E D8         	LDX		P_Temp+1	;加载位置索引到x
    21 00:F442: 63 18 F5      	LDA		Lcd_bit,X	;加载com线
    22 00:F445: 7F D9         	STA		P_Temp+2
    23 00:F447: 63 AF F4      	LDA		Lcd_byte,X	;加载SEG线
    24 00:F44A: 1B            	TAX
    25 00:F44B: 7B D7         	ROR		P_Temp		;循环右移
    26 00:F44D: 10 0A         	BCC		L_CLR		;c=0是清除
    27 00:F44F: 63 00 18      	LDA		LCD_RamAddr,X	;加载LCD RAM地址
    28 00:F452: 70 D9         	ORA		P_Temp+2		;将COM和SEG信息与LCD RAM地址进行逻辑或操作
    29 00:F454: 6F 00 18      	STA		LCD_RamAddr,X	;将结果写回LCD RAM，更新显示
    30 00:F457: 17 0A         	BRA		L_Inc_Dis_Index_Prog	;跳转到显示索引增加的子程序。
    31                        L_CLR:
    32 00:F459: 63 00 18      	LDA		LCD_RamAddr,X	;加载LCD RAM的地址
    33 00:F45C: 70 D9         	ORA		P_Temp+2		;将COM和SEG信息与LCD RAM地址进行逻辑或操作
    34 00:F45E: 72 D9         	EOR		P_Temp+2		;进行异或操作，用于清除对应的段。
    35 00:F460: 6F 00 18      	STA		LCD_RamAddr,X	;将结果写回LCD RAM，清除对应位置。
    36                        L_Inc_Dis_Index_Prog:		;增加显示索引，减少显示段数
    37 00:F463: 78 D8         	INC		P_Temp+1		;增加P_Temp+1（位置索引）
    38 00:F465: 79 DA         	DEC		P_Temp+3		;减少P_Temp+3（段数
    39 00:F467: 12 D7         	BNE		L_Judge_Dis_8Bit_DigitDot	;如果段数不为0，回到循环开始，否则退出
    40 00:F469: 09            	RTS
    41                        
    42                        F_DispPro_8bit:
    43 00:F46A: 7F D7         	STA		P_Temp			;保存段码的值
    44 00:F46C: 7C D8         	STX		P_Temp+1
    45 00:F46E: 53 08         	LDA		#8
    46 00:F470: 7F DA         	STA		P_Temp+3	;显示段数
    47 00:F472: 17 CC         	BRA		L_Judge_Dis_8Bit_DigitDot
    48                        ;-----------------------------------------
    49                        F_DispSymbol:		;input Xcc -> ofs
    50 00:F474: 15 84 F4      	JSR		F_DispSymbol_Com
    51 00:F477: 6F 00 18      	STA		LCD_RamAddr,X	;实现显示
    52 00:F47A: 09            	RTS
    53                        
    54                        F_ClrpSymbol:		;input Xcc -> ofs
    55 00:F47B: 15 84 F4      	JSR		F_DispSymbol_Com	;清除显示
    56 00:F47E: 72 D9         	EOR		P_Temp+2
    57 00:F480: 6F 00 18      	STA		LCD_RamAddr,X
    58 00:F483: 09            	RTS
    59                        
    60                        F_DispSymbol_Com:
    61 00:F484: 63 18 F5      	LDA		Lcd_bit,X	;加载X寄存器对应的COM线
    62 00:F487: 7F D9         	STA		P_Temp+2
    63 00:F489: 63 AF F4      	LDA		Lcd_byte,X	;加载X寄存器对应的SEG线
    64 00:F48C: 1B            	TAX
    65 00:F48D: 63 00 18      	LDA		LCD_RamAddr,X;加载LCD	RAM	地址
    66 00:F490: 70 D9         	ORA		P_Temp+2
    67 00:F492: 09            	RTS
    68                        ;============================================================
    69                        ;===============================================
    70                        L_ROR_4Bit_Prog:
    71                        L_ROR4Bit_Prog:
    72                        L_LSR4Bit_Prog:
    73                        F_MSBToLSB:
    74 00:F493: 19            	ROR
    75 00:F494: 19            	ROR
    76 00:F495: 19            	ROR
    77 00:F496: 19            	ROR
    78 00:F497: 51 0F         	AND		#$0F
    79 00:F499: 09            	RTS
    80                        ;================================================
    81                        ;********************************************
    82                        Table_Digit_DataDot:	;显示内容对应显示的段码
    83                                   ;hgfedcba
    84 00:F49A: 3F            	.BYTE 	3fh	;0
    85 00:F49B: 06            	.BYTE	06h	;1
    86 00:F49C: 5B            	.BYTE	5bh	;2
    87 00:F49D: 4F            	.BYTE	4fh	;3
    88 00:F49E: 66            	.BYTE	66h	;4
    89 00:F49F: 6D            	.BYTE	6dh	;5
    90 00:F4A0: 7D            	.BYTE	7dh	;6
    91 00:F4A1: 07            	.BYTE	07h	;7
    92 00:F4A2: 7F            	.BYTE	7fh	;8
    93 00:F4A3: 6F            	.BYTE	6fh	;9
    94 00:F4A4: 00            	.BYTE	00h	;清除10
    95 00:F4A5: 40            	.BYTE	01000000B;负号11
    96 00:F4A6: 76            	.BYTE	01110110B;H12
    97 00:F4A7: 50            	.BYTE	01010000B;r13
    98 00:F4A8: 37            	.BYTE	00110111B;N	14
    99 00:F4A9: 31            	.BYTE	00110001B;T的左边15
   100 00:F4AA: 3E            	.BYTE	00111110B;U.16
   101 00:F4AB: 79            	.BYTE	01111001B;E.17
   102 00:F4AC: 77            	.BYTE	01110111B;A.18
   103 00:F4AD: 71            	.BYTE	01110001B;F	19
   104 00:F4AE: 38            	.BYTE	00111000B;L	20
   105                        
   106                        
   107                        
   107                        
   180                        .INCLUDE	Display\Lcdtab.asm
     1                        ;--------COM------------
     2                        c0	.equ	0
     3                        c1	.equ	1
     4                        c2	.equ	2
     5                        c3	.equ	3
     6                        c4	.equ	4
     7                        c5	.equ	5
     8                        c6	.equ	6
     9                        ;;--------SEG------------
    10                        ; s47	.equ	47
    11                        ; s46	.equ	46
    12                        ; s45	.equ	45
    13                        ; s44	.equ	44
    14                        ; s43	.equ	43
    15                        ; s42	.equ	42
    16                        s41	.equ	41
    17                        s40	.equ	40
    18                        ; s39	.equ	39
    19                        ; s38	.equ	38
    20                        ; s37	.equ	37
    21                        ; s36	.equ	36
    22                        ; s35	.equ	35
    23                        ; s34	.equ	34
    24                        ; s33	.equ	33
    25                        ; s32	.equ	32
    26                        ; s31	.equ	31
    27                        ; s30	.equ	30
    28                        ; s29	.equ	29
    29                        ; s28	.equ	28
    30                        ; s27	.equ	27
    31                        ; s26	.equ	26
    32                        ; s25	.equ	25
    33                        ; s24	.equ	24
    34                        ; s23	.equ	23
    35                        ; s22	.equ	22
    36                        ; s21	.equ	21
    37                        ; s20	.equ	20
    38                        ; s19	.equ	19
    39                        ; s18	.equ	18
    40                        ; s17	.equ	17
    41                        ; s16	.equ	16
    42                        s15	.equ	15
    43                        s14	.equ	14
    44                        s13	.equ	13
    45                        s12	.equ	12
    46                        s11	.equ	11
    47                        s10	.equ	10
    48                        s9	.equ	9
    49                        s8	.equ	8
    50                        s7	.equ	7
    51                        s6	.equ	6
    52                        s5	.equ	5
    53                        s4	.equ	4
    54                        s3	.equ	3
    55                        s2	.equ	2
    56                        s1	.equ	1
    57                        s0	.equ	0
    58                        
    59                        
    60                        .MACRO  db_c_s	com,seg
    61                                  .BYTE com*6+seg/8
    62                        .ENDMACRO
    63                        
    64                        .MACRO  db_c_y	com,seg
    65                        	      .BYTE 1.shl.(seg-seg/8*8)
    66                        .ENDMACRO
    67                        
    68                        Lcd_byte:	;段码
    69                        lcd_table1:
    70                        lcd_d1 .equ	lcd_table1-lcd_table1
    71                        	db_c_s	c1,s41	;;1A
+   71 00:F4AF: 0B             .DB c1*$0006+s41/$0008
    72                        	db_c_s	c1,s40	;;1B
+   72 00:F4B0: 0B             .DB c1*$0006+s40/$0008
    73                        	db_c_s	c0,s40	;;1C
+   73 00:F4B1: 05             .DB c0*$0006+s40/$0008
    74                        	db_c_s	c0,s11	;;1D
+   74 00:F4B2: 01             .DB c0*$0006+s11/$0008
    75                        	db_c_s	c0,s41	;;1E
+   75 00:F4B3: 05             .DB c0*$0006+s41/$0008
    76                        	db_c_s	c1,s41	;;1F
+   76 00:F4B4: 0B             .DB c1*$0006+s41/$0008
    77                        	db_c_s	c0,s41	;;1G
+   77 00:F4B5: 05             .DB c0*$0006+s41/$0008
    78                        
    79                        lcd_d2	.equ lcd_d1+7
    80                        	db_c_s	c1,s14	;;2A
+   80 00:F4B6: 07             .DB c1*$0006+s14/$0008
    81                        	db_c_s	c1,s13	;;2B
+   81 00:F4B7: 07             .DB c1*$0006+s13/$0008
    82                        	db_c_s	c0,s13	;;2C
+   82 00:F4B8: 01             .DB c0*$0006+s13/$0008
    83                        	db_c_s	c0,s12	;;2D
+   83 00:F4B9: 01             .DB c0*$0006+s12/$0008
    84                        	db_c_s	c0,s15	;;2E
+   84 00:F4BA: 01             .DB c0*$0006+s15/$0008
    85                        	db_c_s	c1,s15	;;2F
+   85 00:F4BB: 07             .DB c1*$0006+s15/$0008
    86                        	db_c_s	c0,s14	;;2G
+   86 00:F4BC: 01             .DB c0*$0006+s14/$0008
    87                        
    88                        lcd_d3	.equ lcd_d2+7
    89                        
    90                        	db_c_s	c3,s10	;;3A
+   90 00:F4BD: 13             .DB c3*$0006+s10/$0008
    91                        	db_c_s	c2,s10	;;3B
+   91 00:F4BE: 0D             .DB c2*$0006+s10/$0008
    92                        	db_c_s	c1,s10	;;3C
+   92 00:F4BF: 07             .DB c1*$0006+s10/$0008
    93                        	db_c_s	c0,s10	;;3D
+   93 00:F4C0: 01             .DB c0*$0006+s10/$0008
    94                        	db_c_s	c1,s11	;;3E
+   94 00:F4C1: 07             .DB c1*$0006+s11/$0008
    95                        	db_c_s	c3,s11	;;3F
+   95 00:F4C2: 13             .DB c3*$0006+s11/$0008
    96                        	db_c_s	c2,s11	;;3G
+   96 00:F4C3: 0D             .DB c2*$0006+s11/$0008
    97                        
    98                        lcd_d4	.equ lcd_d3+7
    99                        
   100                        	db_c_s	c3,s8	;;4A
+  100 00:F4C4: 13             .DB c3*$0006+s8/$0008
   101                        	db_c_s	c2,s8	;;4B
+  101 00:F4C5: 0D             .DB c2*$0006+s8/$0008
   102                        	db_c_s	c1,s8	;;4C
+  102 00:F4C6: 07             .DB c1*$0006+s8/$0008
   103                        	db_c_s	c0,s8	;;4D
+  103 00:F4C7: 01             .DB c0*$0006+s8/$0008
   104                        	db_c_s	c1,s9	;;4E
+  104 00:F4C8: 07             .DB c1*$0006+s9/$0008
   105                        	db_c_s	c3,s9	;;4F
+  105 00:F4C9: 13             .DB c3*$0006+s9/$0008
   106                        	db_c_s	c2,s9	;;4G
+  106 00:F4CA: 0D             .DB c2*$0006+s9/$0008
   107                        lcd_d5	.equ lcd_d4+7
   108                        
   109                        	db_c_s	c3,s8	;;4A
+  109 00:F4CB: 13             .DB c3*$0006+s8/$0008
   110                        	db_c_s	c2,s8	;;4B
+  110 00:F4CC: 0D             .DB c2*$0006+s8/$0008
   111                        	db_c_s	c1,s8	;;4C
+  111 00:F4CD: 07             .DB c1*$0006+s8/$0008
   112                        	db_c_s	c0,s8	;;4D
+  112 00:F4CE: 01             .DB c0*$0006+s8/$0008
   113                        	db_c_s	c1,s9	;;4E
+  113 00:F4CF: 07             .DB c1*$0006+s9/$0008
   114                        	db_c_s	c3,s9	;;4F
+  114 00:F4D0: 13             .DB c3*$0006+s9/$0008
   115                        	db_c_s	c2,s9	;;4G
+  115 00:F4D1: 0D             .DB c2*$0006+s9/$0008
   116                        lcd_d6	.equ lcd_d5+7
   117                        
   118                        	db_c_s	c3,s8	;;4A
+  118 00:F4D2: 13             .DB c3*$0006+s8/$0008
   119                        	db_c_s	c2,s8	;;4B
+  119 00:F4D3: 0D             .DB c2*$0006+s8/$0008
   120                        	db_c_s	c1,s8	;;4C
+  120 00:F4D4: 07             .DB c1*$0006+s8/$0008
   121                        	db_c_s	c0,s8	;;4D
+  121 00:F4D5: 01             .DB c0*$0006+s8/$0008
   122                        	db_c_s	c1,s9	;;4E
+  122 00:F4D6: 07             .DB c1*$0006+s9/$0008
   123                        	db_c_s	c3,s9	;;4F
+  123 00:F4D7: 13             .DB c3*$0006+s9/$0008
   124                        	db_c_s	c2,s9	;;4G
+  124 00:F4D8: 0D             .DB c2*$0006+s9/$0008
   125                        lcd_d7	.equ lcd_d6+7
   126                        
   127                        	db_c_s	c3,s8	;;4A
+  127 00:F4D9: 13             .DB c3*$0006+s8/$0008
   128                        	db_c_s	c2,s8	;;4B
+  128 00:F4DA: 0D             .DB c2*$0006+s8/$0008
   129                        	db_c_s	c1,s8	;;4C
+  129 00:F4DB: 07             .DB c1*$0006+s8/$0008
   130                        	db_c_s	c0,s8	;;4D
+  130 00:F4DC: 01             .DB c0*$0006+s8/$0008
   131                        	db_c_s	c1,s9	;;4E
+  131 00:F4DD: 07             .DB c1*$0006+s9/$0008
   132                        	db_c_s	c3,s9	;;4F
+  132 00:F4DE: 13             .DB c3*$0006+s9/$0008
   133                        	db_c_s	c2,s9	;;4G
+  133 00:F4DF: 0D             .DB c2*$0006+s9/$0008
   134                        lcd_d8	.equ lcd_d7+7
   135                        
   136                        	db_c_s	c3,s8	;;4A
+  136 00:F4E0: 13             .DB c3*$0006+s8/$0008
   137                        	db_c_s	c2,s8	;;4B
+  137 00:F4E1: 0D             .DB c2*$0006+s8/$0008
   138                        	db_c_s	c1,s8	;;4C
+  138 00:F4E2: 07             .DB c1*$0006+s8/$0008
   139                        	db_c_s	c0,s8	;;4D
+  139 00:F4E3: 01             .DB c0*$0006+s8/$0008
   140                        	db_c_s	c1,s9	;;4E
+  140 00:F4E4: 07             .DB c1*$0006+s9/$0008
   141                        	db_c_s	c3,s9	;;4F
+  141 00:F4E5: 13             .DB c3*$0006+s9/$0008
   142                        	db_c_s	c2,s9	;;4G
+  142 00:F4E6: 0D             .DB c2*$0006+s9/$0008
   143                        lcd_d9	.equ lcd_d8+7
   144                        
   145                        	db_c_s	c3,s8	;;4A
+  145 00:F4E7: 13             .DB c3*$0006+s8/$0008
   146                        	db_c_s	c2,s8	;;4B
+  146 00:F4E8: 0D             .DB c2*$0006+s8/$0008
   147                        	db_c_s	c1,s8	;;4C
+  147 00:F4E9: 07             .DB c1*$0006+s8/$0008
   148                        	db_c_s	c0,s8	;;4D
+  148 00:F4EA: 01             .DB c0*$0006+s8/$0008
   149                        	db_c_s	c1,s9	;;4E
+  149 00:F4EB: 07             .DB c1*$0006+s9/$0008
   150                        	db_c_s	c3,s9	;;4F
+  150 00:F4EC: 13             .DB c3*$0006+s9/$0008
   151                        	db_c_s	c2,s9	;;4G
+  151 00:F4ED: 0D             .DB c2*$0006+s9/$0008
   152                        lcd_d10	.equ lcd_d9+7
   153                        
   154                        	db_c_s	c3,s8	;;4A
+  154 00:F4EE: 13             .DB c3*$0006+s8/$0008
   155                        	db_c_s	c2,s8	;;4B
+  155 00:F4EF: 0D             .DB c2*$0006+s8/$0008
   156                        	db_c_s	c1,s8	;;4C
+  156 00:F4F0: 07             .DB c1*$0006+s8/$0008
   157                        	db_c_s	c0,s8	;;4D
+  157 00:F4F1: 01             .DB c0*$0006+s8/$0008
   158                        	db_c_s	c1,s9	;;4E
+  158 00:F4F2: 07             .DB c1*$0006+s9/$0008
   159                        	db_c_s	c3,s9	;;4F
+  159 00:F4F3: 13             .DB c3*$0006+s9/$0008
   160                        	db_c_s	c2,s9	;;4G
+  160 00:F4F4: 0D             .DB c2*$0006+s9/$0008
   161                        lcd_d11	.equ lcd_d10+7
   162                        
   163                        	db_c_s	c3,s8	;;4A
+  163 00:F4F5: 13             .DB c3*$0006+s8/$0008
   164                        	db_c_s	c2,s8	;;4B
+  164 00:F4F6: 0D             .DB c2*$0006+s8/$0008
   165                        	db_c_s	c1,s8	;;4C
+  165 00:F4F7: 07             .DB c1*$0006+s8/$0008
   166                        	db_c_s	c0,s8	;;4D
+  166 00:F4F8: 01             .DB c0*$0006+s8/$0008
   167                        	db_c_s	c1,s9	;;4E
+  167 00:F4F9: 07             .DB c1*$0006+s9/$0008
   168                        	db_c_s	c3,s9	;;4F
+  168 00:F4FA: 13             .DB c3*$0006+s9/$0008
   169                        	db_c_s	c2,s9	;;4G
+  169 00:F4FB: 0D             .DB c2*$0006+s9/$0008
   170                        lcd_d12	.equ lcd_d11+7
   171                        
   172                        	db_c_s	c3,s8	;;4A
+  172 00:F4FC: 13             .DB c3*$0006+s8/$0008
   173                        	db_c_s	c2,s8	;;4B
+  173 00:F4FD: 0D             .DB c2*$0006+s8/$0008
   174                        	db_c_s	c1,s8	;;4C
+  174 00:F4FE: 07             .DB c1*$0006+s8/$0008
   175                        	db_c_s	c0,s8	;;4D
+  175 00:F4FF: 01             .DB c0*$0006+s8/$0008
   176                        	db_c_s	c1,s9	;;4E
+  176 00:F500: 07             .DB c1*$0006+s9/$0008
   177                        	db_c_s	c3,s9	;;4F
+  177 00:F501: 13             .DB c3*$0006+s9/$0008
   178                        	db_c_s	c2,s9	;;4G
+  178 00:F502: 0D             .DB c2*$0006+s9/$0008
   179                        lcd_d13	.equ lcd_d12+7
   180                        
   181                        	db_c_s	c3,s8	;;4A
+  181 00:F503: 13             .DB c3*$0006+s8/$0008
   182                        	db_c_s	c2,s8	;;4B
+  182 00:F504: 0D             .DB c2*$0006+s8/$0008
   183                        	db_c_s	c1,s8	;;4C
+  183 00:F505: 07             .DB c1*$0006+s8/$0008
   184                        	db_c_s	c0,s8	;;4D
+  184 00:F506: 01             .DB c0*$0006+s8/$0008
   185                        	db_c_s	c1,s9	;;4E
+  185 00:F507: 07             .DB c1*$0006+s9/$0008
   186                        	db_c_s	c3,s9	;;4F
+  186 00:F508: 13             .DB c3*$0006+s9/$0008
   187                        	db_c_s	c2,s9	;;4G
+  187 00:F509: 0D             .DB c2*$0006+s9/$0008
   188                        
   189                        
   190                        
   191                        Lcd_dot:
   192                        lcd_col .equ Lcd_dot-lcd_table1
   193                        	db_c_s	c1,s12	;;COL
+  193 00:F50A: 07             .DB c1*$0006+s12/$0008
   194                        	db_c_s	c1,s12	;;D2
+  194 00:F50B: 07             .DB c1*$0006+s12/$0008
   195                        	db_c_s	c1,s12	;;11I
+  195 00:F50C: 07             .DB c1*$0006+s12/$0008
   196                        	db_c_s	c1,s12	;;11H
+  196 00:F50D: 07             .DB c1*$0006+s12/$0008
   197                        	db_c_s	c1,s12	;;12H
+  197 00:F50E: 07             .DB c1*$0006+s12/$0008
   198                        	db_c_s	c1,s12	;;13I
+  198 00:F50F: 07             .DB c1*$0006+s12/$0008
   199                        	db_c_s	c1,s12	;;13H
+  199 00:F510: 07             .DB c1*$0006+s12/$0008
   200                        	db_c_s	c1,s12	;;13J
+  200 00:F511: 07             .DB c1*$0006+s12/$0008
   201                        	db_c_s	c1,s12	;;ALM
+  201 00:F512: 07             .DB c1*$0006+s12/$0008
   202                        	db_c_s	c1,s12	;;SNZ
+  202 00:F513: 07             .DB c1*$0006+s12/$0008
   203                        	db_c_s	c1,s12	;;SIG
+  203 00:F514: 07             .DB c1*$0006+s12/$0008
   204                        	db_c_s	c1,s12	;;24小时
+  204 00:F515: 07             .DB c1*$0006+s12/$0008
   205                        	db_c_s	c1,s12	;;PM
+  205 00:F516: 07             .DB c1*$0006+s12/$0008
   206                        	db_c_s	c1,s12	;;正计时
+  206 00:F517: 07             .DB c1*$0006+s12/$0008
   207                        
   208                        lcd_D2					.EQU	lcd_col+1
   209                        lcd_11I					.EQU	lcd_col+2
   210                        lcd_11H					.EQU	lcd_col+3
   211                        lcd_12H					.EQU	lcd_col+4
   212                        lcd_13I					.EQU	lcd_col+5
   213                        lcd_13H					.EQU	lcd_col+6
   214                        lcd_13J					.EQU	lcd_col+7
   215                        lcd_Alm					.EQU	lcd_col+8
   216                        lcd_Snz					.EQU	lcd_col+9
   217                        lcd_Sig					.EQU	lcd_col+10
   218                        lcd_24					.EQU	lcd_col+11
   219                        lcd_PM					.EQU	lcd_col+12
   220                        lcd_Timer_Zheng			.EQU	lcd_col+13
   221                        
   222                        
   223                        ;==========================================================
   224                        ;==========================================================
   225                        Lcd_bit:
   226                        
   227                        	db_c_y	c1,s41	;;1A
+  227 00:F518: 02             .DB $0001<<(s41-s41/$0008*$0008)
   228                        	db_c_y	c1,s40	;;1B
+  228 00:F519: 01             .DB $0001<<(s40-s40/$0008*$0008)
   229                        	db_c_y	c0,s40	;;1C
+  229 00:F51A: 01             .DB $0001<<(s40-s40/$0008*$0008)
   230                        	db_c_y	c0,s11	;;1D
+  230 00:F51B: 08             .DB $0001<<(s11-s11/$0008*$0008)
   231                        	db_c_y	c0,s41	;;1E
+  231 00:F51C: 02             .DB $0001<<(s41-s41/$0008*$0008)
   232                        	db_c_y	c1,s41	;;1F
+  232 00:F51D: 02             .DB $0001<<(s41-s41/$0008*$0008)
   233                        	db_c_y	c0,s41	;;1G
+  233 00:F51E: 02             .DB $0001<<(s41-s41/$0008*$0008)
   234                        
   235                        
   236                        	db_c_y	c1,s14	;;2A
+  236 00:F51F: 40             .DB $0001<<(s14-s14/$0008*$0008)
   237                        	db_c_y	c1,s13	;;2B
+  237 00:F520: 20             .DB $0001<<(s13-s13/$0008*$0008)
   238                        	db_c_y	c0,s13	;;2C
+  238 00:F521: 20             .DB $0001<<(s13-s13/$0008*$0008)
   239                        	db_c_y	c0,s12	;;2D
+  239 00:F522: 10             .DB $0001<<(s12-s12/$0008*$0008)
   240                        	db_c_y	c0,s15	;;2E
+  240 00:F523: 80             .DB $0001<<(s15-s15/$0008*$0008)
   241                        	db_c_y	c1,s15	;;2F
+  241 00:F524: 80             .DB $0001<<(s15-s15/$0008*$0008)
   242                        	db_c_y	c0,s14	;;2G
+  242 00:F525: 40             .DB $0001<<(s14-s14/$0008*$0008)
   243                        
   244                        
   245                        
   246                        	db_c_y	c3,s10	;;3A
+  246 00:F526: 04             .DB $0001<<(s10-s10/$0008*$0008)
   247                        	db_c_y	c2,s10	;;3B
+  247 00:F527: 04             .DB $0001<<(s10-s10/$0008*$0008)
   248                        	db_c_y	c1,s10	;;3C
+  248 00:F528: 04             .DB $0001<<(s10-s10/$0008*$0008)
   249                        	db_c_y	c0,s10	;;3D
+  249 00:F529: 04             .DB $0001<<(s10-s10/$0008*$0008)
   250                        	db_c_y	c1,s11	;;3E
+  250 00:F52A: 08             .DB $0001<<(s11-s11/$0008*$0008)
   251                        	db_c_y	c3,s11	;;3F
+  251 00:F52B: 08             .DB $0001<<(s11-s11/$0008*$0008)
   252                        	db_c_y	c2,s11	;;3G
+  252 00:F52C: 08             .DB $0001<<(s11-s11/$0008*$0008)
   253                        
   254                        
   255                        
   256                        	db_c_y	c3,s8	;;4A
+  256 00:F52D: 01             .DB $0001<<(s8-s8/$0008*$0008)
   257                        	db_c_y	c2,s8	;;4B
+  257 00:F52E: 01             .DB $0001<<(s8-s8/$0008*$0008)
   258                        	db_c_y	c1,s8	;;4C
+  258 00:F52F: 01             .DB $0001<<(s8-s8/$0008*$0008)
   259                        	db_c_y	c0,s8	;;4D
+  259 00:F530: 01             .DB $0001<<(s8-s8/$0008*$0008)
   260                        	db_c_y	c1,s9	;;4E
+  260 00:F531: 02             .DB $0001<<(s9-s9/$0008*$0008)
   261                        	db_c_y	c3,s9	;;4F
+  261 00:F532: 02             .DB $0001<<(s9-s9/$0008*$0008)
   262                        	db_c_y	c2,s9	;;4G
+  262 00:F533: 02             .DB $0001<<(s9-s9/$0008*$0008)
   263                        
   264                        
   265                        	db_c_y	c3,s8	;;4A
+  265 00:F534: 01             .DB $0001<<(s8-s8/$0008*$0008)
   266                        	db_c_y	c2,s8	;;4B
+  266 00:F535: 01             .DB $0001<<(s8-s8/$0008*$0008)
   267                        	db_c_y	c1,s8	;;4C
+  267 00:F536: 01             .DB $0001<<(s8-s8/$0008*$0008)
   268                        	db_c_y	c0,s8	;;4D
+  268 00:F537: 01             .DB $0001<<(s8-s8/$0008*$0008)
   269                        	db_c_y	c1,s9	;;4E
+  269 00:F538: 02             .DB $0001<<(s9-s9/$0008*$0008)
   270                        	db_c_y	c3,s9	;;4F
+  270 00:F539: 02             .DB $0001<<(s9-s9/$0008*$0008)
   271                        	db_c_y	c2,s9	;;4G
+  271 00:F53A: 02             .DB $0001<<(s9-s9/$0008*$0008)
   272                        
   273                        
   274                        	db_c_y	c3,s8	;;4A
+  274 00:F53B: 01             .DB $0001<<(s8-s8/$0008*$0008)
   275                        	db_c_y	c2,s8	;;4B
+  275 00:F53C: 01             .DB $0001<<(s8-s8/$0008*$0008)
   276                        	db_c_y	c1,s8	;;4C
+  276 00:F53D: 01             .DB $0001<<(s8-s8/$0008*$0008)
   277                        	db_c_y	c0,s8	;;4D
+  277 00:F53E: 01             .DB $0001<<(s8-s8/$0008*$0008)
   278                        	db_c_y	c1,s9	;;4E
+  278 00:F53F: 02             .DB $0001<<(s9-s9/$0008*$0008)
   279                        	db_c_y	c3,s9	;;4F
+  279 00:F540: 02             .DB $0001<<(s9-s9/$0008*$0008)
   280                        	db_c_y	c2,s9	;;4G
+  280 00:F541: 02             .DB $0001<<(s9-s9/$0008*$0008)
   281                        
   282                        
   283                        	db_c_y	c3,s8	;;4A
+  283 00:F542: 01             .DB $0001<<(s8-s8/$0008*$0008)
   284                        	db_c_y	c2,s8	;;4B
+  284 00:F543: 01             .DB $0001<<(s8-s8/$0008*$0008)
   285                        	db_c_y	c1,s8	;;4C
+  285 00:F544: 01             .DB $0001<<(s8-s8/$0008*$0008)
   286                        	db_c_y	c0,s8	;;4D
+  286 00:F545: 01             .DB $0001<<(s8-s8/$0008*$0008)
   287                        	db_c_y	c1,s9	;;4E
+  287 00:F546: 02             .DB $0001<<(s9-s9/$0008*$0008)
   288                        	db_c_y	c3,s9	;;4F
+  288 00:F547: 02             .DB $0001<<(s9-s9/$0008*$0008)
   289                        	db_c_y	c2,s9	;;4G
+  289 00:F548: 02             .DB $0001<<(s9-s9/$0008*$0008)
   290                        
   291                        
   292                        	db_c_y	c3,s8	;;4A
+  292 00:F549: 01             .DB $0001<<(s8-s8/$0008*$0008)
   293                        	db_c_y	c2,s8	;;4B
+  293 00:F54A: 01             .DB $0001<<(s8-s8/$0008*$0008)
   294                        	db_c_y	c1,s8	;;4C
+  294 00:F54B: 01             .DB $0001<<(s8-s8/$0008*$0008)
   295                        	db_c_y	c0,s8	;;4D
+  295 00:F54C: 01             .DB $0001<<(s8-s8/$0008*$0008)
   296                        	db_c_y	c1,s9	;;4E
+  296 00:F54D: 02             .DB $0001<<(s9-s9/$0008*$0008)
   297                        	db_c_y	c3,s9	;;4F
+  297 00:F54E: 02             .DB $0001<<(s9-s9/$0008*$0008)
   298                        	db_c_y	c2,s9	;;4G
+  298 00:F54F: 02             .DB $0001<<(s9-s9/$0008*$0008)
   299                        
   300                        
   301                        	db_c_y	c3,s8	;;4A
+  301 00:F550: 01             .DB $0001<<(s8-s8/$0008*$0008)
   302                        	db_c_y	c2,s8	;;4B
+  302 00:F551: 01             .DB $0001<<(s8-s8/$0008*$0008)
   303                        	db_c_y	c1,s8	;;4C
+  303 00:F552: 01             .DB $0001<<(s8-s8/$0008*$0008)
   304                        	db_c_y	c0,s8	;;4D
+  304 00:F553: 01             .DB $0001<<(s8-s8/$0008*$0008)
   305                        	db_c_y	c1,s9	;;4E
+  305 00:F554: 02             .DB $0001<<(s9-s9/$0008*$0008)
   306                        	db_c_y	c3,s9	;;4F
+  306 00:F555: 02             .DB $0001<<(s9-s9/$0008*$0008)
   307                        	db_c_y	c2,s9	;;4G
+  307 00:F556: 02             .DB $0001<<(s9-s9/$0008*$0008)
   308                        
   309                        
   310                        	db_c_y	c3,s8	;;4A
+  310 00:F557: 01             .DB $0001<<(s8-s8/$0008*$0008)
   311                        	db_c_y	c2,s8	;;4B
+  311 00:F558: 01             .DB $0001<<(s8-s8/$0008*$0008)
   312                        	db_c_y	c1,s8	;;4C
+  312 00:F559: 01             .DB $0001<<(s8-s8/$0008*$0008)
   313                        	db_c_y	c0,s8	;;4D
+  313 00:F55A: 01             .DB $0001<<(s8-s8/$0008*$0008)
   314                        	db_c_y	c1,s9	;;4E
+  314 00:F55B: 02             .DB $0001<<(s9-s9/$0008*$0008)
   315                        	db_c_y	c3,s9	;;4F
+  315 00:F55C: 02             .DB $0001<<(s9-s9/$0008*$0008)
   316                        	db_c_y	c2,s9	;;4G
+  316 00:F55D: 02             .DB $0001<<(s9-s9/$0008*$0008)
   317                        
   318                        
   319                        	db_c_y	c3,s8	;;4A
+  319 00:F55E: 01             .DB $0001<<(s8-s8/$0008*$0008)
   320                        	db_c_y	c2,s8	;;4B
+  320 00:F55F: 01             .DB $0001<<(s8-s8/$0008*$0008)
   321                        	db_c_y	c1,s8	;;4C
+  321 00:F560: 01             .DB $0001<<(s8-s8/$0008*$0008)
   322                        	db_c_y	c0,s8	;;4D
+  322 00:F561: 01             .DB $0001<<(s8-s8/$0008*$0008)
   323                        	db_c_y	c1,s9	;;4E
+  323 00:F562: 02             .DB $0001<<(s9-s9/$0008*$0008)
   324                        	db_c_y	c3,s9	;;4F
+  324 00:F563: 02             .DB $0001<<(s9-s9/$0008*$0008)
   325                        	db_c_y	c2,s9	;;4G
+  325 00:F564: 02             .DB $0001<<(s9-s9/$0008*$0008)
   326                        
   327                        
   328                        	db_c_y	c3,s8	;;4A
+  328 00:F565: 01             .DB $0001<<(s8-s8/$0008*$0008)
   329                        	db_c_y	c2,s8	;;4B
+  329 00:F566: 01             .DB $0001<<(s8-s8/$0008*$0008)
   330                        	db_c_y	c1,s8	;;4C
+  330 00:F567: 01             .DB $0001<<(s8-s8/$0008*$0008)
   331                        	db_c_y	c0,s8	;;4D
+  331 00:F568: 01             .DB $0001<<(s8-s8/$0008*$0008)
   332                        	db_c_y	c1,s9	;;4E
+  332 00:F569: 02             .DB $0001<<(s9-s9/$0008*$0008)
   333                        	db_c_y	c3,s9	;;4F
+  333 00:F56A: 02             .DB $0001<<(s9-s9/$0008*$0008)
   334                        	db_c_y	c2,s9	;;4G
+  334 00:F56B: 02             .DB $0001<<(s9-s9/$0008*$0008)
   335                        
   336                        
   337                        	db_c_y	c3,s8	;;4A
+  337 00:F56C: 01             .DB $0001<<(s8-s8/$0008*$0008)
   338                        	db_c_y	c2,s8	;;4B
+  338 00:F56D: 01             .DB $0001<<(s8-s8/$0008*$0008)
   339                        	db_c_y	c1,s8	;;4C
+  339 00:F56E: 01             .DB $0001<<(s8-s8/$0008*$0008)
   340                        	db_c_y	c0,s8	;;4D
+  340 00:F56F: 01             .DB $0001<<(s8-s8/$0008*$0008)
   341                        	db_c_y	c1,s9	;;4E
+  341 00:F570: 02             .DB $0001<<(s9-s9/$0008*$0008)
   342                        	db_c_y	c3,s9	;;4F
+  342 00:F571: 02             .DB $0001<<(s9-s9/$0008*$0008)
   343                        	db_c_y	c2,s9	;;4G
+  343 00:F572: 02             .DB $0001<<(s9-s9/$0008*$0008)
   344                        
   345                        
   346                        
   347                        
   348                        	db_c_y	c1,s12	;;COL
+  348 00:F573: 10             .DB $0001<<(s12-s12/$0008*$0008)
   349                        	db_c_y	c1,s12	;;D2
+  349 00:F574: 10             .DB $0001<<(s12-s12/$0008*$0008)
   350                        	db_c_y	c1,s12	;;11I
+  350 00:F575: 10             .DB $0001<<(s12-s12/$0008*$0008)
   351                        	db_c_y	c1,s12	;;11H
+  351 00:F576: 10             .DB $0001<<(s12-s12/$0008*$0008)
   352                        	db_c_y	c1,s12	;;12H
+  352 00:F577: 10             .DB $0001<<(s12-s12/$0008*$0008)
   353                        	db_c_y	c1,s12	;;13I
+  353 00:F578: 10             .DB $0001<<(s12-s12/$0008*$0008)
   354                        	db_c_y	c1,s12	;;13H
+  354 00:F579: 10             .DB $0001<<(s12-s12/$0008*$0008)
   355                        	db_c_y	c1,s12	;;13J
+  355 00:F57A: 10             .DB $0001<<(s12-s12/$0008*$0008)
   356                        	db_c_y	c1,s12	;;ALM
+  356 00:F57B: 10             .DB $0001<<(s12-s12/$0008*$0008)
   357                        	db_c_y	c1,s12	;;SNZ
+  357 00:F57C: 10             .DB $0001<<(s12-s12/$0008*$0008)
   358                        	db_c_y	c1,s12	;;SIG
+  358 00:F57D: 10             .DB $0001<<(s12-s12/$0008*$0008)
   359                        	db_c_y	c1,s12	;;24小时
+  359 00:F57E: 10             .DB $0001<<(s12-s12/$0008*$0008)
   360                        	db_c_y	c1,s12	;;PM
+  360 00:F57F: 10             .DB $0001<<(s12-s12/$0008*$0008)
   361                        	db_c_y	c1,s12	;;正计时
+  361 00:F580: 10             .DB $0001<<(s12-s12/$0008*$0008)
   362                        
   363                        ;=========================================
   363                        
   181                        .INCLUDE	Display\Display.asm
     1                        L_Display_Set_Mode_Prog_TO:
     2 00:F581: 16 02 F6      	JMP		L_Display_Set_Mode_Prog
     3                        L_Display_Normal_Prog:
     4 00:F584: 3B A5 FA      	BBS3	Sys_Flag_A,L_Display_Set_Mode_Prog_TO
     5 00:F587: 73 D2         	LDA		R_Close_All_Dis
     6 00:F589: 12 39         	BNE		L_Display_Alarm_Normal_Prog
     7 00:F58B: 06            	CLD
     8 00:F58C: 73 CD         	LDA		R_Mode
     9 00:F58E: 04            	CLC
    10 00:F58F: 18            	ROL
    11 00:F590: 1B            	TAX
    12 00:F591: 63 9A F5      	LDA		Table_Dis_2+1,X
    13 00:F594: 0A            	PHA
    14 00:F595: 63 99 F5      	LDA		Table_Dis_2,X
    15 00:F598: 09            	RTS
    16                        Table_Dis_2:
    17 00:F599: A2 F5         	DW		L_Display_Time_Normal_Prog-1
    18 00:F59B: C3 F5         	DW		L_Display_Alarm_Normal_Prog-1
    19 00:F59D: C4 F5         	DW		L_Display_Postive_Timer_Normal_Prog-1
    20 00:F59F: F0 F5         	DW		L_Display_Another_Time_Normal_Prog-1
    21 00:F5A1: DB F5         	DW		L_Display_Destive_Timer_Normal_Prog-1
    22                        
    23                        
    24                        L_Display_Time_Normal_Prog:
    25 00:F5A3: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
    26 00:F5A6: 73 B2         	LDA		R_Time_Sec
    27 00:F5A8: 12 1A         	BNE		L_Display_Alarm_Normal_Prog_OUT
    28 00:F5AA: 15 D6 F6      	JSR		L_Display_Time_Min_Prog
    29 00:F5AD: 73 B3         	LDA		R_Time_Min
    30 00:F5AF: 12 13         	BNE		L_Display_Alarm_Normal_Prog_OUT
    31 00:F5B1: 15 DB F6      	JSR		L_Display_Time_Hr_Prog
    32 00:F5B4: 73 B4         	LDA		R_Time_Hr
    33 00:F5B6: 12 0C         	BNE		L_Display_Alarm_Normal_Prog_OUT
    34 00:F5B8: 15 E0 F6      	JSR		L_Display_Time_Day_Prog
    35 00:F5BB: 15 E5 F6      	JSR		L_Display_Time_Month_Prog
    36 00:F5BE: 15 3F F9      	JSR		L_Clr_Time_Week_Prog
    37 00:F5C1: 16 F4 F6      	JMP		L_Display_Time_Week_Prog
    38                        
    39                        L_Display_Alarm_Normal_Prog:
    40                        L_Display_Alarm_Normal_Prog_OUT:
    41 00:F5C4: 09            	RTS
    42                        L_Display_Postive_Timer_Normal_Prog:
    43 00:F5C5: 30 A8 FC      	BBR0	Sys_Flag_D,L_Display_Alarm_Normal_Prog
    44 00:F5C8: 15 FC F7      	JSR		L_Display_Positive_Timer_Ms_Prog
    45 00:F5CB: 15 ED F7      	JSR		L_Display_Positive_Timer_Sec_Prog
    46 00:F5CE: 73 BC         	LDA		R_Timer_Sec
    47 00:F5D0: 12 F2         	BNE		L_Display_Alarm_Normal_Prog_OUT
    48 00:F5D2: 15 F2 F7      	JSR		L_Display_Positive_Timer_Min_Prog
    49 00:F5D5: 73 BE         	LDA		R_Timer_Hr
    50 00:F5D7: 12 EB         	BNE		L_Display_Alarm_Normal_Prog_OUT
    51 00:F5D9: 16 F7 F7      	JMP		L_Display_Positive_Timer_Hr_Prog
    52                        L_Display_Destive_Timer_Normal_Prog:
    53 00:F5DC: 15 0E F8      	JSR		L_Display_Destive_Timer_Sec_Prog
    54 00:F5DF: 73 BF         	LDA		R_Timer_Sec_Countdown
    55 00:F5E1: 56 3B         	CMP		#59
    56 00:F5E3: 12 DF         	BNE		L_Display_Alarm_Normal_Prog_OUT
    57 00:F5E5: 15 13 F8      	JSR		L_Display_Destive_Timer_Min_Prog
    58 00:F5E8: 73 C0         	LDA		R_Timer_Min_Countdown
    59 00:F5EA: 56 3B         	CMP		#59
    60 00:F5EC: 12 D6         	BNE		L_Display_Alarm_Normal_Prog_OUT
    61 00:F5EE: 16 18 F8      	JMP		L_Display_Destive_Timer_Hr_Prog
    62                        L_Display_Another_Time_Normal_Prog:
    63 00:F5F1: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
    64 00:F5F4: 73 B2         	LDA		R_Time_Sec
    65 00:F5F6: 12 CC         	BNE		L_Display_Alarm_Normal_Prog_OUT
    66 00:F5F8: 15 B4 F6      	JSR		L_Display_Another_Time_Min_Prog
    67 00:F5FB: 73 B9         	LDA		R_Time_Min_Another
    68 00:F5FD: 12 C5         	BNE		L_Display_Alarm_Normal_Prog_OUT
    69 00:F5FF: 16 B9 F6      	JMP		L_Display_Another_Time_Hr_Prog
    70                        
    71                        
    72                        
    73                        
    74                        
    75                        
    76                        
    77                        
    78                        L_Display_Set_Mode_Prog:
    79 00:F602: 06            	CLD
    80 00:F603: 73 CD         	LDA		R_Mode
    81 00:F605: 04            	CLC
    82 00:F606: 18            	ROL
    83 00:F607: 1B            	TAX
    84 00:F608: 63 11 F6      	LDA		Table_Dis_3+1,X
    85 00:F60B: 0A            	PHA
    86 00:F60C: 63 10 F6      	LDA		Table_Dis_3,X
    87 00:F60F: 09            	RTS
    88                        
    89                        Table_Dis_3:
    90 00:F610: 1C F6         	DW		L_Display_Time_Set_Mode_Prog-1
    91 00:F612: 31 F6         	DW		L_Display_Alarm_Set_Mode_Prog-1
    92 00:F614: 3D F6         	DW		L_Display_Postive_Timer_Set_Mode_Prog-1
    93 00:F616: 47 F6         	DW		L_Display_Another_Time_Set_Mode_Prog-1
    94 00:F618: 3E F6         	DW		L_Display_Destive_Timer_Set_Mode_Prog-1
    95                        
    96                        
    97                        
    98                        
    99                        
   100                        L_Display_Time_Year_Prog_TO
   101 00:F61A: 16 EA F6      	JMP		L_Display_Time_Year_Prog
   102                        L_Display_Time_Set_Mode_Prog:
   103 00:F61D: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
   104 00:F620: 73 CE         	LDA		R_Mode_Set
   105 00:F622: 56 05         	CMP		#5
   106 00:F624: 11 F4         	BCS		L_Display_Time_Year_Prog_TO
   107 00:F626: 15 D6 F6      	JSR		L_Display_Time_Min_Prog
   108 00:F629: 15 DB F6      	JSR		L_Display_Time_Hr_Prog
   109 00:F62C: 15 E0 F6      	JSR		L_Display_Time_Day_Prog
   110 00:F62F: 16 E5 F6      	JMP		L_Display_Time_Month_Prog
   111                        L_Display_Alarm_Set_Mode_Prog:
   112 00:F632: 15 AF F7      	JSR		L_Display_Alarm_Clock_Day_Prog
   113 00:F635: 15 B6 F7      	JSR		L_Display_Alarm_Clock_Month_Prog
   114 00:F638: 15 A5 F7      	JSR		L_Display_Alarm_Clock_Min_Prog
   115 00:F63B: 16 AA F7      	JMP		L_Display_Alarm_Clock_Hr_Prog
   116                        L_Display_Postive_Timer_Set_Mode_Prog:
   117 00:F63E: 09            	RTS
   118                        
   119                        L_Display_Destive_Timer_Set_Mode_Prog:
   120 00:F63F: 15 0E F8      	JSR		L_Display_Destive_Timer_Sec_Prog
   121 00:F642: 15 13 F8      	JSR		L_Display_Destive_Timer_Min_Prog
   122 00:F645: 16 18 F8      	JMP		L_Display_Destive_Timer_Hr_Prog
   123                        L_Display_Another_Time_Set_Mode_Prog:
   124 00:F648: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
   125 00:F64B: 15 B4 F6      	JSR		L_Display_Another_Time_Min_Prog
   126 00:F64E: 16 B9 F6      	JMP		L_Display_Another_Time_Hr_Prog
   127                        
   128                        
   129                        
   130                        
   131                        
   132                        
   133                        
   134                        
   135                        
   136                        
   137                        
   138                        
   139                        
   140                        
   141                        
   142                        L_Display_Prog:
   143 00:F651: 06            	CLD
   144 00:F652: 73 CD         	LDA		R_Mode
   145 00:F654: 04            	CLC
   146 00:F655: 18            	ROL
   147 00:F656: 1B            	TAX
   148 00:F657: 63 60 F6      	LDA		Table_Dis_1+1,X
   149 00:F65A: 0A            	PHA
   150 00:F65B: 63 5F F6      	LDA		Table_Dis_1,X
   151                        L_Display_Prog_1:
   152 00:F65E: 09            	RTS
   153                        Table_Dis_1:
   154 00:F65F: 68 F6         	DW		L_Display_Time_Prog-1
   155 00:F661: 7A F6         	DW		L_Display_Alarm_Prog-1
   156 00:F663: 89 F6         	DW		L_Display_Postive_Timer_Prog-1
   157 00:F665: A7 F6         	DW		L_Display_Another_Time_Prog-1
   158 00:F667: 9B F6         	DW		L_Display_Destive_Timer_Prog-1
   159                        L_Display_Time_Prog:
   160 00:F669: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
   161 00:F66C: 15 D6 F6      	JSR		L_Display_Time_Min_Prog
   162 00:F66F: 15 DB F6      	JSR		L_Display_Time_Hr_Prog
   163 00:F672: 15 E0 F6      	JSR		L_Display_Time_Day_Prog
   164 00:F675: 15 E5 F6      	JSR		L_Display_Time_Month_Prog
   165 00:F678: 16 F4 F6      	JMP		L_Display_Time_Week_Prog
   166                        
   167                        L_Display_Alarm_Prog:
   168 00:F67B: 15 A5 F7      	JSR		L_Display_Alarm_Clock_Min_Prog
   169 00:F67E: 15 AA F7      	JSR		L_Display_Alarm_Clock_Hr_Prog
   170 00:F681: 15 AF F7      	JSR		L_Display_Alarm_Clock_Day_Prog
   171 00:F684: 15 B6 F7      	JSR		L_Display_Alarm_Clock_Month_Prog
   172 00:F687: 16 C3 F7      	JMP		L_Display_Alarm_Clock_AL_Symbol_Prog
   173                        L_Display_Postive_Timer_Prog:
   174 00:F68A: 3D A8 D1      	BBS5	Sys_Flag_D,L_Display_Prog_1
   175 00:F68D: 15 ED F7      	JSR		L_Display_Positive_Timer_Sec_Prog
   176 00:F690: 15 F2 F7      	JSR		L_Display_Positive_Timer_Min_Prog
   177 00:F693: 15 F7 F7      	JSR		L_Display_Positive_Timer_Hr_Prog
   178 00:F696: 15 FC F7      	JSR		L_Display_Positive_Timer_Ms_Prog
   179 00:F699: 16 01 F8      	JMP		L_Display_Positive_Timer_ST_Prog
   180                        
   181                        L_Display_Destive_Timer_Prog:
   182 00:F69C: 15 0E F8      	JSR		L_Display_Destive_Timer_Sec_Prog
   183 00:F69F: 15 13 F8      	JSR		L_Display_Destive_Timer_Min_Prog
   184 00:F6A2: 15 18 F8      	JSR		L_Display_Destive_Timer_Hr_Prog
   185 00:F6A5: 16 1D F8      	JMP		L_Display_Destive_Timer_TR_Symbol_Prog
   186                        L_Display_Another_Time_Prog:
   187 00:F6A8: 15 D1 F6      	JSR		L_Display_Time_Sec_Prog
   188 00:F6AB: 15 B4 F6      	JSR		L_Display_Another_Time_Min_Prog
   189 00:F6AE: 15 B9 F6      	JSR		L_Display_Another_Time_Hr_Prog
   190 00:F6B1: 16 BE F6      	JMP		L_Display_Another_Time_DT_Symbol_Prog
   190                        
   182                        .INCLUDE	Display\Display_Time.asm
     1                        L_Display_Another_Time_Min_Prog:
     2 00:F6B4: 73 B9         	LDA		R_Time_Min_Another
     3 00:F6B6: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
     4                        L_Display_Another_Time_Hr_Prog:
     5 00:F6B9: 73 BA         	LDA		R_Time_Hr_Another
     6 00:F6BB: 16 F4 F8      	JMP		L_Display_lcd_Prog_Normal_Hr
     7                        L_Display_Another_Time_DT_Symbol_Prog:
     8 00:F6BE: 53 00         	LDA		#0
     9 00:F6C0: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
    10 00:F6C3: 53 0C         	LDA		#12
    11 00:F6C5: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
    12 00:F6C8: 15 69 F8      	JSR		L_Dis_lcd_13H_Prog
    13 00:F6CB: 15 6D F8      	JSR		L_Dis_lcd_13J_Prog
    14 00:F6CE: 16 61 F8      	JMP		L_Dis_lcd_12H_Prog
    15                        ;===============================================
    16                        
    17                        L_Display_Time_Sec_Prog:
    18 00:F6D1: 73 B2         	LDA		R_Time_Sec
    19 00:F6D3: 16 D1 F8      	JMP		L_Display_lcd_Prog_Normal_Sec
    20                        ;======================================
    21                        L_Display_Time_Min_Prog:
    22 00:F6D6: 73 B3         	LDA		R_Time_Min
    23 00:F6D8: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
    24                        ;=====================================
    25                        L_Display_Time_Hr_Prog:
    26 00:F6DB: 73 B4         	LDA		R_Time_Hr
    27 00:F6DD: 16 F4 F8      	JMP		L_Display_lcd_Prog_Normal_Hr
    28                        ;=====================================
    29                        L_Display_Time_Day_Prog:
    30 00:F6E0: 73 B5         	LDA		R_Time_Day
    31 00:F6E2: 16 12 F9      	JMP		L_Display_lcd_Prog_Normal_Day
    32                        ;=====================================
    33                        L_Display_Time_Month_Prog:
    34 00:F6E5: 73 B6         	LDA		R_Time_Month
    35 00:F6E7: 16 21 F9      	JMP		L_Display_lcd_Prog_Normal_Month
    36                        ;========================================
    37                        L_Display_Time_Year_Prog:
    38 00:F6EA: 53 14         	LDA		#20
    39 00:F6EC: 15 C2 F8      	JSR		L_Display_lcd_Prog_Normal_Timer
    40 00:F6EF: 73 B7         	LDA		R_Time_Year
    41 00:F6F1: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
    42                        
    43                        ;============================================
    44                        L_Display_Time_Week_Prog:
    45 00:F6F4: 06            	CLD
    46 00:F6F5: 73 B8             LDA     R_Time_Week
    47 00:F6F7: 04                CLC
    48 00:F6F8: 18                ROL
    49 00:F6F9: 1B                TAX
    50 00:F6FA: 63 04 F7          LDA     Table_Dis_Week+1,X
    51 00:F6FD: 0A                PHA
    52 00:F6FE: 63 03 F7          LDA     Table_Dis_Week,X
    53 00:F701: 0A                PHA
    54 00:F702: 09                RTS
    55                        Table_Dis_Week:
    56 00:F703: 91 F7         	DW		L_Display_Time_Sunday_Prog-1
    57 00:F705: 10 F7         	DW		L_Display_Time_Monday_Prog-1
    58 00:F707: 29 F7         	DW		L_Display_Time_Tuesday_Prog-1
    59 00:F709: 3C F7         	DW		L_Display_Time_WednesDay_Prog-1
    60 00:F70B: 58 F7         	DW		L_Display_Time_Thursday_Prog-1
    61 00:F70D: 6B F7         	DW		L_Display_Time_Friday_Prog-1
    62 00:F70F: 7E F7         	DW		L_Display_Time_Saturday_Prog-1
    63                        
    64                        
    65                        
    66                        L_Display_Time_Monday_Prog:
    67 00:F711: 53 0E         	LDA		#14
    68 00:F713: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
    69 00:F716: 53 00         	LDA		#0
    70 00:F718: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
    71 00:F71B: 53 0E         	LDA		#14
    72 00:F71D: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
    73 00:F720: 15 65 F8      	JSR		L_Dis_lcd_13I_Prog
    74 00:F723: 15 69 F8      	JSR		L_Dis_lcd_13H_Prog
    75 00:F726: 15 5D F8      	JSR		L_Dis_lcd_11H_Prog
    76 00:F729: 09            	RTS
    77                        L_Display_Time_Tuesday_Prog:
    78 00:F72A: 53 11         	LDA		#17
    79 00:F72C: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
    80 00:F72F: 53 10         	LDA		#16
    81 00:F731: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
    82 00:F734: 53 0F         	LDA		#15
    83 00:F736: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
    84 00:F739: 15 69 F8      	JSR		L_Dis_lcd_13H_Prog
    85 00:F73C: 09            	RTS
    86                        L_Display_Time_WednesDay_Prog:
    87 00:F73D: 53 00         	LDA		#0
    88 00:F73F: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
    89 00:F742: 53 11         	LDA		#17
    90 00:F744: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
    91 00:F747: 53 10         	LDA		#16
    92 00:F749: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
    93 00:F74C: 15 65 F8      	JSR		L_Dis_lcd_13I_Prog
    94 00:F74F: 15 6D F8      	JSR		L_Dis_lcd_13J_Prog
    95 00:F752: 15 5D F8      	JSR		L_Dis_lcd_11H_Prog
    96 00:F755: 15 59 F8      	JSR		L_Dis_lcd_11I_Prog
    97 00:F758: 09            	RTS
    98                        L_Display_Time_Thursday_Prog:
    99 00:F759: 53 10         	LDA		#16
   100 00:F75B: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
   101 00:F75E: 53 0C         	LDA		#12
   102 00:F760: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
   103 00:F763: 53 0F         	LDA		#15
   104 00:F765: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
   105 00:F768: 15 69 F8      	JSR		L_Dis_lcd_13H_Prog
   106 00:F76B: 09            	RTS
   107                        L_Display_Time_Friday_Prog:
   108 00:F76C: 53 01         	LDA		#1
   109 00:F76E: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
   110 00:F771: 53 12         	LDA		#18
   111 00:F773: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
   112 00:F776: 53 13         	LDA		#19
   113 00:F778: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
   114 00:F77B: 15 61 F8      	JSR		L_Dis_lcd_12H_Prog
   115 00:F77E: 09            	RTS
   116                        L_Display_Time_Saturday_Prog:
   117 00:F77F: 53 0F         	LDA		#15
   118 00:F781: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
   119 00:F784: 53 12         	LDA		#18
   120 00:F786: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
   121 00:F789: 53 05         	LDA		#5
   122 00:F78B: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
   123 00:F78E: 15 5D F8      	JSR		L_Dis_lcd_11H_Prog
   124 00:F791: 09            	RTS
   125                        L_Display_Time_Sunday_Prog:
   126 00:F792: 53 0E         	LDA		#14
   127 00:F794: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
   128 00:F797: 53 10         	LDA		#16
   129 00:F799: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
   130 00:F79C: 53 05         	LDA		#5
   131 00:F79E: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
   132 00:F7A1: 15 5D F8      	JSR		L_Dis_lcd_11H_Prog
   133 00:F7A4: 09            	RTS
   134                        
   135                        
   136                        
   137                        
   138                        
   139                        
   140                        
   140                        
   183                        .INCLUDE	Display\Display_Alarm.asm
     1                        
     2                        ;======================================
     3                        L_Display_Alarm_Clock_Min_Prog:
     4 00:F7A5: 73 C5         	LDA		R_Alarm_Clock_Min
     5 00:F7A7: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
     6                        ;=====================================
     7                        L_Display_Alarm_Clock_Hr_Prog:
     8 00:F7AA: 73 C6         	LDA		R_Alarm_Clock_Hr
     9 00:F7AC: 16 F4 F8      	JMP		L_Display_lcd_Prog_Normal_Hr
    10                        ;=====================================
    11                        L_Display_Alarm_Clock_Day_Prog:
    12 00:F7AF: 73 C7         	LDA		R_Alarm_Clock_Day
    13 00:F7B1: 13 1E             BEQ     L_Dis_Minus_Prog_Day
    14 00:F7B3: 16 12 F9      	JMP		L_Display_lcd_Prog_Normal_Day
    15                        ;=====================================
    16                        L_Display_Alarm_Clock_Month_Prog:
    17 00:F7B6: 73 C8         	LDA		R_Alarm_Clock_Month
    18 00:F7B8: 13 25             BEQ     L_Dis_Minus_Prog_Month
    19 00:F7BA: 16 21 F9      	JMP		L_Display_lcd_Prog_Normal_Month
    20                        ;===================================
    21                        L_Display_Alarm_Hourly_Prog:
    22 00:F7BD: 15 60 F9          JSR     L_Clr_lcd_Prog
    23 00:F7C0: 16 7D F9          JMP     L_Clr_Hr_Prog
    24                        ;====================================
    25                        L_Display_Alarm_Clock_AL_Symbol_Prog:
    26 00:F7C3: 53 12             LDA     #18
    27 00:F7C5: 5E 54             LDX     #lcd_d13
    28 00:F7C7: 15 30 F4          JSR     L_Dis_8Bit_DigitDot_Prog
    29 00:F7CA: 53 14             LDA     #20
    30 00:F7CC: 5E 4D             LDX     #lcd_d12
    31 00:F7CE: 16 30 F4          JMP     L_Dis_8Bit_DigitDot_Prog
    32                        
    33                        
    34                        L_Dis_Minus_Prog_Day:
    35 00:F7D1: 53 0B             LDA     #11
    36 00:F7D3: 5E 2A             LDX     #lcd_d7
    37 00:F7D5: 15 30 F4          JSR     L_Dis_8Bit_DigitDot_Prog
    38 00:F7D8: 53 0B             LDA     #11
    39 00:F7DA: 53 31             LDA     #lcd_d8
    40 00:F7DC: 16 30 F4          JMP     L_Dis_8Bit_DigitDot_Prog
    41                        
    42                        L_Dis_Minus_Prog_Month:
    43 00:F7DF: 53 0B             LDA     #11
    44 00:F7E1: 5E 38             LDX     #lcd_d9
    45 00:F7E3: 15 30 F4          JSR     L_Dis_8Bit_DigitDot_Prog
    46 00:F7E6: 53 0A             LDA     #10
    47 00:F7E8: 53 3F             LDA     #lcd_d10
    48 00:F7EA: 16 30 F4          JMP     L_Dis_8Bit_DigitDot_Prog
    48                        
   184                        .INCLUDE	Display\Display_Timer.asm
     1                        L_Display_Positive_Timer_Sec_Prog:
     2 00:F7ED: 73 BC         	LDA		R_Timer_Sec
     3 00:F7EF: 16 D1 F8      	JMP		L_Display_lcd_Prog_Normal_Sec
     4                        ;======================================
     5                        L_Display_Positive_Timer_Min_Prog:
     6 00:F7F2: 73 BD         	LDA		R_Timer_Min
     7 00:F7F4: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
     8                        ;=====================================
     9                        L_Display_Positive_Timer_Hr_Prog:
    10 00:F7F7: 73 BE         	LDA		R_Timer_Hr
    11 00:F7F9: 16 F4 F8      	JMP		L_Display_lcd_Prog_Normal_Hr
    12                        ;=====================================
    13                        L_Display_Positive_Timer_Ms_Prog:
    14 00:F7FC: 73 BB         	LDA		R_Timer_Ms
    15 00:F7FE: 16 21 F9      	JMP		L_Display_lcd_Prog_Normal_Month
    16                        L_Display_Positive_Timer_ST_Prog:
    17 00:F801: 53 05             LDA     #5
    18 00:F803: 15 30 F9          JSR     L_Display_lcd_d13_Prog_Normal
    19 00:F806: 53 0F             LDA     #15
    20 00:F808: 15 3A F9          JSR     L_Display_lcd_d12_Prog_Normal
    21 00:F80B: 16 61 F8          JMP     L_Dis_lcd_12H_Prog
    22                        ;上面是正计时显示函数
    23                        ;==========================================
    24                        L_Display_Destive_Timer_Sec_Prog:
    25 00:F80E: 73 BF         	LDA		R_Timer_Sec_Countdown
    26 00:F810: 16 D1 F8      	JMP		L_Display_lcd_Prog_Normal_Sec
    27                        ;======================================
    28                        L_Display_Destive_Timer_Min_Prog:
    29 00:F813: 73 C0         	LDA		R_Timer_Min_Countdown
    30 00:F815: 16 E5 F8      	JMP		L_Display_lcd_Prog_Normal_Min
    31                        ;=====================================
    32                        L_Display_Destive_Timer_Hr_Prog:
    33 00:F818: 73 C1         	LDA		R_Timer_Hr_Countdown
    34 00:F81A: 16 F4 F8      	JMP		L_Display_lcd_Prog_Normal_Hr
    35                        
    36                        L_Display_Destive_Timer_TR_Symbol_Prog:
    37 00:F81D: 53 0F             LDA     #15
    38 00:F81F: 15 30 F9          JSR     L_Display_lcd_d13_Prog_Normal
    39 00:F822: 53 12             LDA     #18
    40 00:F824: 15 30 F9          JSR     L_Display_lcd_d13_Prog_Normal
    41 00:F827: 16 61 F8          JMP     L_Dis_lcd_12H_Prog
    41                        
   185                        .INCLUDE	Display\Display_Symbol.asm
     1                        ;显示闹钟标志，贪睡标志的清除
     2                        L_Clr_Alm_Snz_Symbol_Prog:
     3 00:F82A: 5E 63             LDX     #lcd_Alm
     4 00:F82C: 15 7B F4          JSR     F_ClrpSymbol
     5 00:F82F: 5E 64             LDX     #lcd_Snz
     6 00:F831: 16 7B F4          JMP     F_ClrpSymbol
     7                        L_Dis_Alm_Snz_Symbol_Prog:
     8 00:F834: 73 C9             LDA     R_Alarm_Mode
     9 00:F836: 13 F2             BEQ     L_Clr_Alm_Snz_Symbol_Prog
    10 00:F838: 56 01             CMP     #1
    11 00:F83A: 13 05             BEQ     L_Dis_Alm_Snz_Symbol_Prog_1
    12 00:F83C: 5E 64             LDX     #lcd_Snz
    13 00:F83E: 15 74 F4          JSR     F_DispSymbol
    14                        L_Dis_Alm_Snz_Symbol_Prog_1:
    15 00:F841: 5E 63             LDX     #lcd_Alm
    16 00:F843: 16 74 F4          JMP     F_DispSymbol
    17                        ;========================================
    18                        L_Dis_Sig_Symbol_Prog:
    19 00:F846: 5E 65             LDX     #lcd_Sig
    20 00:F848: 16 74 F4          JMP     F_DispSymbol
    21                        L_Clr_Sig_Symbol_Prog:
    22 00:F84B: 5E 65             LDX     #lcd_Sig
    23 00:F84D: 16 7B F4          JMP     F_ClrpSymbol
    24                        
    25                        
    26                        L_Dis_col_Prog:
    27 00:F850: 5E 5B             LDX     #lcd_col
    28                        L_Dis_Symbol_Prog:
    29 00:F852: 16 74 F4          JMP     F_DispSymbol
    30                        L_Dis_lcd_D2_Prog:
    31 00:F855: 5E 5C             LDX     #lcd_D2
    32 00:F857: 17 F9             BRA		L_Dis_Symbol_Prog
    33                        L_Dis_lcd_11I_Prog:
    34 00:F859: 5E 5D             LDX     #lcd_11I
    35 00:F85B: 17 F5             BRA		L_Dis_Symbol_Prog
    36                        L_Dis_lcd_11H_Prog:
    37 00:F85D: 5E 5E             LDX     #lcd_11H
    38 00:F85F: 17 F1             BRA		L_Dis_Symbol_Prog
    39                        L_Dis_lcd_12H_Prog:
    40 00:F861: 5E 5F         	LDX     #lcd_12H
    41 00:F863: 17 ED             BRA		L_Dis_Symbol_Prog
    42                        L_Dis_lcd_13I_Prog:
    43 00:F865: 5E 60             LDX     #lcd_13I
    44 00:F867: 17 E9             BRA		L_Dis_Symbol_Prog
    45                        L_Dis_lcd_13H_Prog:
    46 00:F869: 5E 61         	LDX     #lcd_13H
    47 00:F86B: 17 E5             BRA		L_Dis_Symbol_Prog
    48                        L_Dis_lcd_13J_Prog:
    49 00:F86D: 5E 62             LDX     #lcd_13J
    50 00:F86F: 17 E1             BRA		L_Dis_Symbol_Prog
    51                        L_Dis_lcd_Alm_Prog:
    52 00:F871: 5E 63             LDX     #lcd_Alm
    53 00:F873: 17 DD             BRA		L_Dis_Symbol_Prog
    54                        L_Dis_lcd_Snz_Prog:
    55 00:F875: 5E 64             LDX     #lcd_Snz
    56 00:F877: 17 D9             BRA		L_Dis_Symbol_Prog
    57                        L_Dis_lcd_Sig_Prog:
    58 00:F879: 5E 65             LDX     #lcd_Sig
    59 00:F87B: 17 D5             BRA		L_Dis_Symbol_Prog
    60                        L_Dis_lcd_24_Prog:
    61 00:F87D: 5E 66             LDX     #lcd_24
    62 00:F87F: 17 D1             BRA		L_Dis_Symbol_Prog
    63                        L_Dis_lcd_PM_Prog:
    64 00:F881: 5E 67             LDX     #lcd_PM
    65 00:F883: 17 CD             BRA		L_Dis_Symbol_Prog
    66                        L_Dis_lcd_Timer_Zheng_Prog:
    67 00:F885: 5E 68             LDX     #lcd_Timer_Zheng
    68 00:F887: 17 C9             BRA		L_Dis_Symbol_Prog
    69                        ; L_Dis_lcd_Timer_Dao_Prog:
    70                        ;     LDX     #lcd_Timer_Dao
    71                        ;     BRA		L_Dis_Symbol_Prog
    72                        
    73                        ;================================
    74                        L_Clr_col_Prog:
    75 00:F889: 5E 5B             LDX     #lcd_col
    76                        L_Clr_Symbol_Prog:
    77 00:F88B: 16 7B F4          JMP     F_ClrpSymbol
    78                        L_Clr_lcd_D2_Prog:
    79 00:F88E: 5E 5C             LDX     #lcd_D2
    80 00:F890: 17 F9             BRA		L_Clr_Symbol_Prog
    81                        L_Clr_lcd_11I_Prog:
    82 00:F892: 5E 5D             LDX     #lcd_11I
    83 00:F894: 17 F5             BRA		L_Clr_Symbol_Prog
    84                        L_Clr_lcd_11H_Prog:
    85 00:F896: 5E 5E             LDX     #lcd_11H
    86 00:F898: 17 F1             BRA		L_Clr_Symbol_Prog
    87                        L_Clr_lcd_12H_Prog:
    88 00:F89A: 5E 5F         	LDX     #lcd_12H
    89 00:F89C: 17 ED             BRA		L_Clr_Symbol_Prog
    90                        L_Clr_lcd_13I_Prog:
    91 00:F89E: 5E 60             LDX     #lcd_13I
    92 00:F8A0: 17 E9             BRA		L_Clr_Symbol_Prog
    93                        L_Clr_lcd_13H_Prog:
    94 00:F8A2: 5E 61         	LDX     #lcd_13H
    95 00:F8A4: 17 E5             BRA		L_Clr_Symbol_Prog
    96                        L_Clr_lcd_13J_Prog:
    97 00:F8A6: 5E 62             LDX     #lcd_13J
    98 00:F8A8: 17 E1             BRA		L_Clr_Symbol_Prog
    99                        L_Clr_lcd_Alm_Prog:
   100 00:F8AA: 5E 63             LDX     #lcd_Alm
   101 00:F8AC: 17 DD             BRA		L_Clr_Symbol_Prog
   102                        L_Clr_lcd_Snz_Prog:
   103 00:F8AE: 5E 64             LDX     #lcd_Snz
   104 00:F8B0: 17 D9             BRA		L_Clr_Symbol_Prog
   105                        L_Clr_lcd_Sig_Prog:
   106 00:F8B2: 5E 65             LDX     #lcd_Sig
   107 00:F8B4: 17 D5             BRA		L_Clr_Symbol_Prog
   108                        L_Clr_lcd_24_Prog:
   109 00:F8B6: 5E 66             LDX     #lcd_24
   110 00:F8B8: 17 D1             BRA		L_Clr_Symbol_Prog
   111                        L_Clr_lcd_PM_Prog:
   112 00:F8BA: 5E 67             LDX     #lcd_PM
   113 00:F8BC: 17 CD             BRA		L_Clr_Symbol_Prog
   114                        L_Clr_lcd_Timer_Zheng_Prog:
   115 00:F8BE: 5E 68             LDX     #lcd_Timer_Zheng
   116 00:F8C0: 17 C9             BRA		L_Clr_Symbol_Prog
   117                        ; L_Clr_lcd_Timer_Dao_Prog:
   118                        ;     LDX     #lcd_Timer_Dao
   119                        ;     BRA		L_Clr_Symbol_Prog
   120                        
   121                        
   122                        
   123                        
   124                        
   125                        
   126                        
   127                        
   128                        
   129                        
   130                        
   131                        
   132                        
   132                        
   186                        .INCLUDE	Display\Display_Normal.asm
     1                        L_Display_lcd_Prog_Normal_Timer:;显示秒数的lcd_3，lcd4
     2 00:F8C2: 15 BE F9          JSR		L_A_HexToHexD
     3 00:F8C5: 0A            	PHA
     4 00:F8C6: 51 0F         	AND		#$0F
     5 00:F8C8: 5E 1C             LDX     #lcd_d5
     6 00:F8CA: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
     7 00:F8CD: 5E 23         	LDX		#lcd_d6
     8 00:F8CF: 17 0D         	BRA		L_Display_lcd_Prog_Normal
     9                        ;====================================
    10                        L_Display_lcd_Prog_Normal_Sec:;显示秒数的lcd_1，lcd2
    11 00:F8D1: 15 BE F9          JSR		L_A_HexToHexD
    12 00:F8D4: 0A            	PHA
    13 00:F8D5: 51 0F         	AND		#$0F
    14 00:F8D7: 5E 00             LDX     #lcd_d1
    15 00:F8D9: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
    16 00:F8DC: 5E 07         	LDX		#lcd_d2
    17                        L_Display_lcd_Prog_Normal:
    18 00:F8DE: 0C            	PLA
    19 00:F8DF: 15 93 F4      	JSR		L_ROR_4Bit_Prog
    20 00:F8E2: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    21                        ;=======================================
    22                        L_Display_lcd_Prog_Normal_Min:;显示秒数的lcd_3，lcd4
    23 00:F8E5: 15 BE F9          JSR		L_A_HexToHexD
    24 00:F8E8: 0A            	PHA
    25 00:F8E9: 51 0F         	AND		#$0F
    26 00:F8EB: 5E 0E             LDX     #lcd_d3
    27 00:F8ED: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
    28 00:F8F0: 5E 15         	LDX		#lcd_d4
    29 00:F8F2: 17 EA         	BRA		L_Display_lcd_Prog_Normal
    30                        ;=================================
    31                        L_Display_lcd_Prog_Normal_Hr:;显示秒数的lcd_5，lcd6
    32 00:F8F4: 15 BE F9          JSR		L_A_HexToHexD
    33 00:F8F7: 15 E4 F9      	JSR		L_12_24_Prog
    34 00:F8FA: 0A            	PHA
    35 00:F8FB: 51 0F         	AND		#$0F
    36 00:F8FD: 5E 1C             LDX     #lcd_d5
    37 00:F8FF: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
    38 00:F902: 5E 23         	LDX		#lcd_d6
    39                        L_Display_lcd_Prog_Normal_1:
    40 00:F904: 0C            	PLA
    41 00:F905: 15 93 F4      	JSR		L_ROR_4Bit_Prog
    42 00:F908: 13 03         	BEQ		L_Display_lcd_Prog_Normal_Hr_1
    43 00:F90A: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    44                        
    45                        
    46                        L_Display_lcd_Prog_Normal_Hr_1:
    47 00:F90D: 53 0A         	LDA		#10
    48 00:F90F: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    49                        ;=======================================
    50                        L_Display_lcd_Prog_Normal_Day:;显示秒数的lcd_3，lcd4
    51 00:F912: 15 BE F9          JSR		L_A_HexToHexD
    52 00:F915: 0A            	PHA
    53 00:F916: 51 0F         	AND		#$0F
    54 00:F918: 5E 2A             LDX     #lcd_d7
    55 00:F91A: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
    56 00:F91D: 5E 31         	LDX		#lcd_d8
    57 00:F91F: 17 BD         	BRA		L_Display_lcd_Prog_Normal
    58                        ;=================================
    59                        L_Display_lcd_Prog_Normal_Month:;显示秒数的lcd_5，lcd6
    60 00:F921: 15 BE F9          JSR		L_A_HexToHexD
    61 00:F924: 0A            	PHA
    62 00:F925: 51 0F         	AND		#$0F
    63 00:F927: 5E 38             LDX     #lcd_d9
    64 00:F929: 15 30 F4          JSR		L_Dis_8Bit_DigitDot_Prog
    65 00:F92C: 5E 3F         	LDX		#lcd_d10
    66 00:F92E: 17 D4         	BRA		L_Display_lcd_Prog_Normal_1
    67                        ;=================================
    68                        L_Display_lcd_d13_Prog_Normal:
    69 00:F930: 5E 54         	LDX		#lcd_d13
    70 00:F932: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    71                        L_Display_lcd_d11_Prog_Normal:
    72 00:F935: 5E 46         	LDX		#lcd_d11
    73 00:F937: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    74                        L_Display_lcd_d12_Prog_Normal:
    75 00:F93A: 5E 4D         	LDX		#lcd_d12
    76 00:F93C: 16 30 F4      	JMP		L_Dis_8Bit_DigitDot_Prog
    77                        ;==================================
    78                        L_Clr_Time_Week_Prog:
    79 00:F93F: 53 0A         	LDA		#10
    80 00:F941: 15 35 F9      	JSR		L_Display_lcd_d11_Prog_Normal
    81 00:F944: 53 0A         	LDA		#10
    82 00:F946: 15 3A F9      	JSR		L_Display_lcd_d12_Prog_Normal
    83 00:F949: 53 0A         	LDA		#10
    84 00:F94B: 15 30 F9      	JSR		L_Display_lcd_d13_Prog_Normal
    85 00:F94E: 15 92 F8      	JSR		L_Clr_lcd_11I_Prog
    86 00:F951: 15 96 F8      	JSR		L_Clr_lcd_11H_Prog
    87 00:F954: 15 9A F8      	JSR		L_Clr_lcd_12H_Prog
    88 00:F957: 15 A2 F8      	JSR		L_Clr_lcd_13H_Prog
    89 00:F95A: 15 9E F8      	JSR		L_Clr_lcd_13I_Prog
    90 00:F95D: 16 A6 F8      	JMP		L_Clr_lcd_13J_Prog
    91                        ;===============================
    92                        L_Clr_lcd_Prog:
    93 00:F960: 15 87 F9          JSR     L_Clr_Day_Prog
    94 00:F963: 15 91 F9          JSR     L_Clr_Month_Prog
    95 00:F966: 16 8E F8          JMP     L_Clr_lcd_D2_Prog
    96                        ;==================================
    97                        L_Clr_Sec_Prog:
    98 00:F969: 5E 00             LDX     #lcd_d1
    99 00:F96B: 7C DB             STX     P_Temp+4
   100 00:F96D: 5E 07             LDX     #lcd_d2
   101 00:F96F: 7F DC             STA     P_Temp+5
   102 00:F971: 17 28             BRA     L_Clr_usually_Prog
   103                        L_Clr_Min_Prog:
   104 00:F973: 5E 0E             LDX     #lcd_d3
   105 00:F975: 7C DB             STX     P_Temp+4
   106 00:F977: 5E 15             LDX     #lcd_d4
   107 00:F979: 7F DC             STA     P_Temp+5
   108 00:F97B: 17 1E             BRA     L_Clr_usually_Prog
   109                        L_Clr_Hr_Prog:
   110 00:F97D: 5E 1C             LDX     #lcd_d5
   111 00:F97F: 7C DB             STX     P_Temp+4
   112 00:F981: 5E 23             LDX     #lcd_d6
   113 00:F983: 7F DC             STA     P_Temp+5
   114 00:F985: 17 14             BRA     L_Clr_usually_Prog
   115                        L_Clr_Day_Prog:
   116 00:F987: 5E 2A             LDX     #lcd_d7
   117 00:F989: 7C DB             STX     P_Temp+4
   118 00:F98B: 5E 31             LDX     #lcd_d8
   119 00:F98D: 7F DC             STA     P_Temp+5
   120 00:F98F: 17 0A             BRA     L_Clr_usually_Prog
   121                        L_Clr_Month_Prog:
   122 00:F991: 5E 38             LDX     #lcd_d9
   123 00:F993: 7C DB             STX     P_Temp+4
   124 00:F995: 5E 3F             LDX     #lcd_d10
   125 00:F997: 7F DC             STA     P_Temp+5
   126 00:F999: 17 00             BRA     L_Clr_usually_Prog
   127                        
   128                        L_Clr_usually_Prog:
   129 00:F99B: 53 0A             LDA     #10
   130 00:F99D: 7E DB             LDX     P_Temp+4
   131 00:F99F: 15 30 F4          JSR     L_Dis_8Bit_DigitDot_Prog
   132 00:F9A2: 53 0A             LDA     #10
   133 00:F9A4: 7E DC             LDX     P_Temp+5
   134 00:F9A6: 16 30 F4          JMP     L_Dis_8Bit_DigitDot_Prog
   135                        L_Clr_Year_Prog:
   136 00:F9A9: 5E 0E             LDX     #lcd_d3
   137 00:F9AB: 7C DB             STX     P_Temp+4
   138 00:F9AD: 5E 15             LDX     #lcd_d4
   139 00:F9AF: 7F DC             STA     P_Temp+5
   140 00:F9B1: 15 9B F9          JSR     L_Clr_usually_Prog
   141 00:F9B4: 5E 1C             LDX     #lcd_d5
   142 00:F9B6: 7C DB             STX     P_Temp+4
   143 00:F9B8: 5E 23             LDX     #lcd_d6
   144 00:F9BA: 7F DC             STA     P_Temp+5
   145 00:F9BC: 17 DD             BRA     L_Clr_usually_Prog
   145                        
   187                        
   188                        .INCLUDE	Display\Tool.asm
     1                        L_A_HexToHexD:
     2 00:F9BE: 7F D7         	STA		P_Temp								; 将十进制输入保存到 P_Temp
     3 00:F9C0: 53 00         	LDA		#0									; 初始化高位寄存器
     4 00:F9C2: 7F D8         	STA		P_Temp+1							; 高位清零
     5 00:F9C4: 7F D9         	STA		P_Temp+2							; 低位清零
     6                        
     7                        L_DecToHex_Loop:
     8 00:F9C6: 73 D7         	LDA		P_Temp								; 读取当前十进制值
     9 00:F9C8: 56 0A         	CMP		#10
    10 00:F9CA: 10 09         	BCC		L_DecToHex_End						; 如果小于16，则跳到结束
    11                        
    12 00:F9CC: 00            	SEC											; 启用借位
    13 00:F9CD: 55 0A         	SBC		#10									; 减去16
    14 00:F9CF: 7F D7         	STA		P_Temp								; 更新十进制值
    15 00:F9D1: 78 D8         	INC		P_Temp+1							; 高位+1，累加十六进制的十位
    16                        
    17 00:F9D3: 17 F1         	BRA		L_DecToHex_Loop						; 重复循环
    18                        
    19                        L_DecToHex_End:
    20 00:F9D5: 73 D7         	LDA		P_Temp								; 最后剩余的值是低位
    21 00:F9D7: 7F D9         	STA		P_Temp+2							; 存入低位
    22                        
    23 00:F9D9: 73 D8         	LDA		P_Temp+1							; 将高位放入A寄存器准备结果组合
    24 00:F9DB: 04            	CLC
    25 00:F9DC: 18            	ROL
    26 00:F9DD: 18            	ROL
    27 00:F9DE: 18            	ROL
    28 00:F9DF: 18            	ROL											; 左移4次，完成乘16
    29 00:F9E0: 04            	CLC
    30 00:F9E1: 74 D9         	ADC		P_Temp+2							; 加上低位值
    31                        
    32 00:F9E3: 09            	RTS
    33                        ;===========================================
    34                        
    35                        L_12_24_Prog:;12小时和24小时切换
    36 00:F9E4: 7F CF         	STA		R_Time_Hr_am_pm
    37 00:F9E6: 3A A6 29      	BBS2	Sys_Flag_B,L_12_24_Prog_5;判断是24小时制跳转退出
    38 00:F9E9: 73 CF         	LDA		R_Time_Hr_am_pm
    39 00:F9EB: 13 0E         	BEQ		L_12_24_Prog_1;为0是跳转
    40 00:F9ED: 56 0B         	CMP		#11
    41 00:F9EF: 13 02         	BEQ		L_12_24_Prog_4
    42 00:F9F1: 11 10         	BCS		L_12_24_Prog_3;比12大时跳转
    43                        L_12_24_Prog_4:
    44 00:F9F3: 5E 67         	LDX		#lcd_PM
    45 00:F9F5: 15 7B F4      	JSR		F_ClrpSymbol
    46 00:F9F8: 73 CF         	LDA		R_Time_Hr_am_pm
    47                        L_12_24_Prog_OUT:
    48 00:F9FA: 09            	RTS
    49                        L_12_24_Prog_1:;0点
    50 00:F9FB: 5E 67         	LDX		#lcd_PM
    51 00:F9FD: 15 7B F4      	JSR		F_ClrpSymbol
    52 00:FA00: 53 0C         	LDA		#12
    53 00:FA02: 09            	RTS
    54                        L_12_24_Prog_3:
    55 00:FA03: 5E 67         	LDX		#lcd_PM
    56 00:FA05: 15 74 F4      	JSR		F_DispSymbol
    57 00:FA08: 73 CF         	LDA		R_Time_Hr_am_pm
    58 00:FA0A: 56 0C         	CMP		#12
    59 00:FA0C: 13 EC         	BEQ		L_12_24_Prog_OUT
    60 00:FA0E: 00            	SEC
    61 00:FA0F: 55 0C         	SBC		#12
    62 00:FA11: 09            	RTS
    63                        L_12_24_Prog_5:
    64 00:FA12: 5E 66         	LDX		#lcd_24
    65 00:FA14: 15 74 F4      	JSR		F_DispSymbol
    66 00:FA17: 73 CF         	LDA		R_Time_Hr_am_pm
    67                        	RTS
    67 00:FA19: 09            
   189                        
   190                        .INCLUDE	Half_s\Half.asm
     1                        L_Half_Second_Prog:
     2 00:FA1A: 30 A6 0B      	BBR0 	Sys_Flag_B,L_END_Half_Second_Prog	;判断半秒标志
     3 00:FA1D: 20 A6         	RMB0 	Sys_Flag_B							;清楚半秒标志
     4 00:FA1F: 73 AE         	LDA		R_Reset_Time
     5 00:FA21: 12 1E         	BNE		L_Reset_2s_Prog
     6 00:FA23: 39 A6 03      	BBS1	Sys_Flag_B,L_1Second_Prog			;判断一秒标志
     7 00:FA26: 29 A6         	SMB1	Sys_Flag_B							;设置1秒标志
     8                        	; JSR		L_SysFlash_Prog						;闪烁程序
     9                        L_END_Half_Second_Prog:
    10 00:FA28: 09                RTS
    11                        ;=================================================================
    12                        L_1Second_Prog:
    13 00:FA29: 21 A6             RMB1    Sys_Flag_B;清除1秒标志
    14 00:FA2B: 15 12 FD      	JSR		L_Set_Mode_Auto_Exit
    15 00:FA2E: 15 53 FA      	JSR     L_Update_Time_Prog
    16 00:FA31: 15 C9 FA      	JSR		L_Update_Another_Time_Prog
    17 00:FA34: 15 1E FC      	JSR		L_Alarm_Prog
    18 00:FA37: 15 9B FC          JSR     L_Positive_Timer
    19 00:FA3A: 15 C7 FC      	JSR		L_Desitive_Timer
    20 00:FA3D: 15 59 FE      	JSR		L_control_Beep_prog_Auto
    21                        	; JSR		L_Display
    22                        
    23 00:FA40: 09            	RTS
    24                        ;==============================================================
    25                        L_Reset_2s_Prog:;全显
    26 00:FA41: 79 AE         	DEC		R_Reset_Time
    27 00:FA43: 73 AE         	LDA		R_Reset_Time
    28 00:FA45: 12 08         	BNE		L_End_Reset_2s_Prog
    29 00:FA47: 15 0D F1      	JSR		L_Clr_All_DisRam_Prog
    30                        	; JSR		L_Display
    31 00:FA4A: 27 16         	RMB7	P_TMRCTRL
    32 00:FA4C: 20 1D         	RMB0	P_SYSCLK
    33 00:FA4E: 09            	RTS
    34                        L_End_Reset_2s_Prog:
    35 00:FA4F: 15 FB F0      	JSR		L_Dis_All_DisRam_Prog
    36 00:FA52: 09            	RTS
    36                        
   191                        .INCLUDE	Half_s\Clock.asm
     1                        ;=========================
     2                        L_Update_Time_Prog:
     3 00:FA53: 15 9E FA      	JSR		L_Update_Time_Sec_Prog
     4                        
     5                        
     6 00:FA56: 10 20         	BCC		L_End_Update_Time_Prog
     7                        
     8 00:FA58: 15 A3 FA      	JSR		L_Update_Time_Min_Prog
     9 00:FA5B: 15 89 FA      	JSR		L_Control_Snz_Prog
    10                        
    11 00:FA5E: 10 18         	BCC		L_End_Update_Time_Prog
    12                        
    13                        
    14 00:FA60: 15 79 FA      	JSR		L_Control_Beep_Time_On_Alarm_Prog
    15 00:FA63: 15 A8 FA      	JSR		L_Update_Time_Hr_Prog
    16                        
    17                        
    18 00:FA66: 10 10         	BCC		L_End_Update_Time_Prog
    19                        
    20 00:FA68: 15 AF FA      	JSR		L_Update_Time_Day_Prog
    21                        
    22                        
    23 00:FA6B: 10 08         	BCC		L_End_Update_Date_Prog
    24                        
    25 00:FA6D: 15 B7 FA      	JSR		L_Update_Time_Month_Prog
    26                        
    27                        
    28 00:FA70: 10 03         	BCC		L_End_Update_Date_Prog
    29                        
    30 00:FA72: 15 BE FA      	JSR		L_Update_Time_Year_Prog
    31                        
    32                        
    33                        L_End_Update_Date_Prog:
    34 00:FA75: 15 7B FB      	JSR		L_Auto_Counter_Week
    35                        L_End_Update_Time_Prog:
    36 00:FA78: 09            	RTS
    37                        
    38                        L_Control_Beep_Time_On_Alarm_Prog:;控制整点报时
    39 00:FA79: 31 A7 FC      	BBR1	Sys_Flag_C,L_End_Update_Time_Prog;判断整点报时是否开启
    40 00:FA7C: 15 1E FC      	JSR		L_Alarm_Prog
    41 00:FA7F: 34 A7 F6      	BBR4	Sys_Flag_C,L_End_Update_Time_Prog;判断闹钟是否开启
    42 00:FA82: 53 02         	LDA		#2
    43 00:FA84: 7F D6         	STA		R_Voice_Unit
    44                        	EN_LCD_IRQ
+   44 00:FA86: 2E 0E          SMB6 IER
    45 00:FA88: 09            	RTS
    46                        
    47                        ;控制贪睡闹钟
    48                        L_Control_Snz_Prog:
    49 00:FA89: 37 A7 EC      	BBR7	Sys_Flag_C,L_End_Update_Time_Prog
    50 00:FA8C: 79 CB         	DEC		R_Snz_Time
    51 00:FA8E: 12 E8         	BNE		L_End_Update_Time_Prog
    52 00:FA90: 53 05         	LDA		#D_Snz_Time
    53 00:FA92: 7F CB         	STA		R_Snz_Time
    54 00:FA94: 15 6F FC      	JSR		L_Alarm_Control_Prog_2
    55 00:FA97: 79 05         	DEC		D_Snz_Time
    56 00:FA99: 12 DD         	BNE		L_End_Update_Time_Prog
    57 00:FA9B: 27 A7         	RMB7	Sys_Flag_C
    58 00:FA9D: 09            	RTS
    59                        
    60                        ;===================================
    61                        ;-----时间的增加---------------------
    62                        ;===================================
    63                        ;----------------------------------
    64                        L_Update_Time_Sec_Prog:
    65 00:FA9E: 5E 00         	LDX 	#(R_Time_Sec-Time_Str_Addr)
    66 00:FAA0: 16 E2 FA      	JMP		L_Inc_To_60_Prog
    67                        L_Update_Time_Min_Prog:;时间分钟更新加
    68 00:FAA3: 5E 01         	LDX		#(R_Time_Min-Time_Str_Addr)
    69 00:FAA5: 16 E2 FA      	JMP		L_Inc_To_60_Prog
    70                        ;---------------------------
    71                        L_Update_Time_Hr_Prog:;时间小时更新加
    72 00:FAA8: 5E 02         	LDX		#(R_Time_Hr-Time_Str_Addr)
    73 00:FAAA: 53 17         	LDA		#23
    74 00:FAAC: 16 E4 FA      	JMP		L_Inc_To_Any_Count_Prog
    75                        ;----------------------------------
    76                        L_Update_Time_Day_Prog:;时间天数更新加
    77 00:FAAF: 15 36 FB      	JSR		L_Check_MaxDay_Prog
    78 00:FAB2: 5E 03         	LDX		#(R_Time_Day-Time_Str_Addr)
    79 00:FAB4: 16 FE FA      	JMP		L_Inc_To_Any_Count_Prog_To_1
    80                        ;-------------------------------------
    81                        L_Update_Time_Month_Prog:;时间月更新加
    82 00:FAB7: 5E 04         	LDX		#(R_Time_Month-Time_Str_Addr)
    83 00:FAB9: 53 0C         	LDA		#12
    84 00:FABB: 16 FE FA      	JMP		L_Inc_To_Any_Count_Prog_To_1
    85                        
    86                        ;----------------------------------
    87                        L_Update_Time_Year_Prog:;时间年更新加
    88 00:FABE: 5E 05         	LDX		#(R_Time_Year-Time_Str_Addr)
    89 00:FAC0: 53 63         	LDA		#99
    90 00:FAC2: 15 E4 FA      	JSR		L_Inc_To_Any_Count_Prog
    91 00:FAC5: 15 45 FB      	JSR		L_Judge_MaxDay_Prog
    92 00:FAC8: 09            	RTS
    93                        ;======================================
    94                        ;---------第二时间更新------------------
    95                        ;======================================
    96                        L_Update_Another_Time_Prog:
    97 00:FAC9: 73 B2         	LDA		R_Time_Sec
    98 00:FACB: 12 08         	BNE		L_Update_Another_Time_Prog_OUT
    99 00:FACD: 15 D6 FA      	JSR		L_Update_Another_Time_Min_Prog
   100 00:FAD0: 10 03         	BCC		L_Update_Another_Time_Prog_OUT
   101 00:FAD2: 15 DB FA      	JSR		L_Update_Another_Time_Hr_Prog
   102                        L_Update_Another_Time_Prog_OUT:
   103 00:FAD5: 09            	RTS
   104                        
   105                        L_Update_Another_Time_Min_Prog:;时间分钟更新加
   106 00:FAD6: 5E 07         	LDX		#(R_Time_Min_Another-Time_Str_Addr)
   107 00:FAD8: 16 E2 FA      	JMP		L_Inc_To_60_Prog
   108                        ;---------------------------
   109                        L_Update_Another_Time_Hr_Prog:;时间小时更新加
   110 00:FADB: 5E 08         	LDX		#(R_Time_Hr_Another-Time_Str_Addr)
   111 00:FADD: 53 17         	LDA		#23
   112 00:FADF: 16 E4 FA      	JMP		L_Inc_To_Any_Count_Prog
   113                        
   114                        
   115                        ;================================
   116                        L_Inc_To_60_Prog:;将数从0加到59
   117 00:FAE2: 53 3B         	LDA		#59
   118                        L_Inc_To_Any_Count_Prog:
   119 00:FAE4: 00            	SEC
   120 00:FAE5: 65 32 18      	SBC		Time_Addr,X
   121 00:FAE8: 13 0D         	BEQ		L_Inc_Over_Prog
   122 00:FAEA: 10 0B         	BCC		L_Inc_Over_Prog
   123 00:FAEC: 04            	CLC
   124 00:FAED: 63 32 18      	LDA		Time_Addr,X
   125 00:FAF0: 54 01         	ADC		#1
   126 00:FAF2: 6F 32 18      	STA		Time_Addr,X
   127 00:FAF5: 04            	CLC
   128 00:FAF6: 09            	RTS
   129                        L_Inc_Over_Prog:
   130 00:FAF7: 53 00         	LDA		#0
   131 00:FAF9: 6F 32 18      	STA		Time_Addr,X
   132 00:FAFC: 00            	SEC
   133                        L_End_Inc_To_60_Prog:
   134 00:FAFD: 09            	RTS
   135                        
   136                        L_Inc_To_Any_Count_Prog_To_1:;将数从1加到59
   137 00:FAFE: 00            	SEC
   138 00:FAFF: 65 32 18      	SBC		Time_Addr,X
   139 00:FB02: 13 0C         	BEQ		L_Inc_Over_Prog_To_1
   140 00:FB04: 10 0A         	BCC		L_Inc_Over_Prog_To_1
   141 00:FB06: 04            	CLC
   142 00:FB07: 63 32 18      	LDA		Time_Addr,X
   143 00:FB0A: 54 01         	ADC		#1
   144 00:FB0C: 6F 32 18      	STA		Time_Addr,X
   145 00:FB0F: 09            	RTS
   146                        L_Inc_Over_Prog_To_1:
   147 00:FB10: 53 01         	LDA		#1
   148 00:FB12: 6F 32 18      	STA		Time_Addr,X
   149 00:FB15: 09            	RTS
   150                        ;=======================================================
   151                        L_Dec_To_60_Prog:
   152 00:FB16: 53 3B         	LDA		#59
   153                        L_Dec_To_0_Prog:
   154 00:FB18: 7F D7         	STA		P_Temp
   155 00:FB1A: 53 00         	LDA		#0
   156                        L_Dec_To_Anycount_Prog:
   157 00:FB1C: 00            	SEC
   158 00:FB1D: 65 32 18          SBC     Time_Addr,X
   159 00:FB20: 13 0D         	BEQ		L_Dec_Over_Prog
   160 00:FB22: 11 0B         	BCS		L_Dec_Over_Prog
   161                        
   162 00:FB24: 00            	SEC
   163 00:FB25: 63 32 18      	LDA		Time_Addr,X
   164 00:FB28: 55 01         	SBC		#1
   165 00:FB2A: 6F 32 18      	STA		Time_Addr,X
   166 00:FB2D: 00            	SEC
   167 00:FB2E: 09            	RTS
   168                        L_Dec_Over_Prog:
   169 00:FB2F: 73 D7         	LDA		P_Temp
   170 00:FB31: 6F 32 18      	STA		Time_Addr,X
   171 00:FB34: 04            	CLC
   172 00:FB35: 09            	RTS
   173                        ;===============================================
   174                        ;=====================================
   175                        ;-------------------------------------
   176                        ;=====================================
   177                        L_Check_MaxDay_Prog:;检查每月的最大天数
   178 00:FB36: 73 B6         	LDA		R_Time_Month
   179 00:FB38: 07            	DEC
   180 00:FB39: 1B            	TAX
   181 00:FB3A: 3B A6 04      	BBS3	Sys_Flag_B,L_Check_LeapYear_MaxDay_Prog
   182 00:FB3D: 63 D3 FB      	LDA		T_NoLeapYear_Month,X
   183 00:FB40: 09            	RTS
   184                        L_Check_LeapYear_MaxDay_Prog:
   185 00:FB41: 63 C7 FB      	LDA		T_LeapYear_Month,X
   186 00:FB44: 09            	RTS
   187                        ;==============================
   188                        ;------------------------------
   189                        ;==============================
   190                        L_Judge_MaxDay_Prog:;如果最大天数最大超界限，则给予月份的最大天数
   191 00:FB45: 15 36 FB      	JSR		L_Check_MaxDay_Prog
   192 00:FB48: 7F DC         	STA		P_Temp+5
   193 00:FB4A: 76 B5         	CMP		R_Time_Day
   194 00:FB4C: 11 04         	BCS		L_Judge_MaxDay_Prog_RTS
   195 00:FB4E: 73 DC         	LDA		P_Temp+5
   196 00:FB50: 7F B5         	STA		R_Time_Day
   197                        L_Judge_MaxDay_Prog_RTS:
   198 00:FB52: 09            	RTS
   199                        ;==================================
   200                        L_Check_LeapYear_Prog:;检查是否是闰年
   201 00:FB53: 73 B7         	LDA		R_Time_Year
   202 00:FB55: 7F D7         	STA		P_Temp
   203 00:FB57: 04            	CLC
   204 00:FB58: 7B D7         	ROR		P_Temp
   205 00:FB5A: 7E D7         	LDX		P_Temp
   206 00:FB5C: 63 DF FB      	LDA		T_LeapYear_Week,X
   207 00:FB5F: 7F D7         	STA		P_Temp
   208 00:FB61: 30 B7 0C      	BBR0	R_Time_Year,L_Counter_LeapYear;建表从2000年开始处于低四位，高四位，需要右移四位
   209 00:FB64: 04            	CLC
   210 00:FB65: 7B D7         	ROR		P_Temp
   211 00:FB67: 04            	CLC
   212 00:FB68: 7B D7         	ROR		P_Temp
   213 00:FB6A: 04            	CLC
   214 00:FB6B: 7B D7         	ROR		P_Temp
   215 00:FB6D: 04            	CLC
   216 00:FB6E: 7B D7         	ROR		P_Temp
   217                        L_Counter_LeapYear:
   218 00:FB70: 53 08         	LDA		#08H
   219 00:FB72: 71 D7         	AND		P_Temp
   220 00:FB74: 50 F7         	ORA		#F7H
   221 00:FB76: 71 A6         	AND		Sys_Flag_B
   222 00:FB78: 7F A6         	STA		Sys_Flag_B;第四位为1则为闰年，否则·为平年
   223 00:FB7A: 09            	RTS
   224                        ;===========================================
   225                        ;P_Temp,0-3bit存储对应年分的1月1日星期几，4bit存储平闰年
   226                        ;P_Temp+1存储前几个月的天数除以7的余数
   227                        L_Auto_Counter_Week:
   228 00:FB7B: 15 53 FB      	JSR		L_Check_LeapYear_Prog
   229 00:FB7E: 15 45 FB      	JSR		L_Judge_MaxDay_Prog
   230 00:FB81: 73 B6         	LDA		R_Time_Month
   231 00:FB83: 1B            	TAX
   232 00:FB84: 63 11 FC      	LDA		T_Month_Week,X
   233 00:FB87: 7F D8         	STA		P_Temp+1
   234 00:FB89: 33 A6 0C      	BBR3	Sys_Flag_B,L_Counter_Week_2;非闰年跳转，非闰年需要将右移四位
   235 00:FB8C: 04            	CLC
   236 00:FB8D: 7B D8         	ROR		P_Temp+1
   237 00:FB8F: 04            	CLC
   238 00:FB90: 7B D8         	ROR		P_Temp+1
   239 00:FB92: 04            	CLC
   240 00:FB93: 7B D8         	ROR		P_Temp+1
   241 00:FB95: 04            	CLC
   242 00:FB96: 7B D8         	ROR		P_Temp+1
   243                        L_Counter_Week_2:;十六进制运算
   244 00:FB98: 53 0F         	LDA		#$0F
   245 00:FB9A: 71 D8         	AND		P_Temp+1;保留低四位多余的天数
   246 00:FB9C: 7F D8         	STA		P_Temp+1
   247 00:FB9E: 53 07         	LDA		#7
   248 00:FBA0: 71 D7         	AND		P_Temp;保留低三位位每年一月一号星期几
   249 00:FBA2: 04            	CLC
   250 00:FBA3: 74 D8         	ADC		P_Temp+1;每年一月一日星期几加上日期再加上多余的天数
   251 00:FBA5: 74 B5         	ADC		R_Time_Day
   252 00:FBA7: 7F D7         	STA		P_Temp
   253                        L_Loop_WeekSub_7:
   254 00:FBA9: 00            	SEC
   255 00:FBAA: 73 D7         	LDA		P_Temp
   256 00:FBAC: 55 07         	SBC		#7
   257 00:FBAE: 10 05         	BCC		L_End_Counter_Week
   258 00:FBB0: 7F D7         	STA		P_Temp
   259 00:FBB2: 16 A9 FB      	JMP		L_Loop_WeekSub_7
   260                        L_End_Counter_Week:
   261 00:FBB5: 73 D7         	LDA		P_Temp
   262 00:FBB7: 13 05         	BEQ		L_SetWeek_Sat
   263 00:FBB9: 79 D7         	DEC		P_Temp
   264 00:FBBB: 16 C2 FB      	JMP		L_Exit_Counter_Week
   265                        L_SetWeek_Sat:
   266 00:FBBE: 53 06         	LDA		#6
   267 00:FBC0: 7F D7         	STA		P_Temp
   268                        L_Exit_Counter_Week:
   269 00:FBC2: 73 D7         	LDA		P_Temp
   270 00:FBC4: 7F B8         	STA		R_Time_Week
   271 00:FBC6: 09            	RTS
   272                        ;===============================================
   273                        ;-------------------------------------------
   274                        T_LeapYear_Month:
   275 00:FBC7: 1F            	DB		31
   276 00:FBC8: 1D            	DB		29
   277 00:FBC9: 1F            	DB		31
   278 00:FBCA: 1E            	DB		30
   279 00:FBCB: 1F            	DB		31
   280 00:FBCC: 1E            	DB		30
   281 00:FBCD: 1F            	DB		31
   282 00:FBCE: 1F            	DB		31
   283 00:FBCF: 1E            	DB		30
   284 00:FBD0: 1F            	DB		31
   285 00:FBD1: 1E            	DB		30
   286 00:FBD2: 1F            	DB		31
   287                        T_NoLeapYear_Month:
   288 00:FBD3: 1F            	DB		31
   289 00:FBD4: 1C            	DB		28
   290 00:FBD5: 1F            	DB		31
   291 00:FBD6: 1E            	DB		30
   292 00:FBD7: 1F            	DB		31
   293 00:FBD8: 1E            	DB		30
   294 00:FBD9: 1F            	DB		31
   295 00:FBDA: 1F            	DB		31
   296 00:FBDB: 1E            	DB		30
   297 00:FBDC: 1F            	DB		31
   298 00:FBDD: 1E            	DB		30
   299 00:FBDE: 1F            	DB		31
   300                        T_LeapYear_Week:
   301 00:FBDF: 1E            	DB		1EH   ;2001,2000 ;E="1110"代表2000年1月1日是星期六(110),是闰年(1),
   302 00:FBE0: 32            	DB		32H   ;2003,2002	;000星期天
   303 00:FBE1: 6C            	DB		6CH   ;2005,2004	;001星期一
   304 00:FBE2: 10            	DB		10H   ;2007,2006	;010星期二
   305 00:FBE3: 4A            	DB		4AH   ;2009,2008	;011星期三
   306 00:FBE4: 65            	DB		65H   ;2011,2010	;100星期四
   307 00:FBE5: 28            	DB		28H   ;2013,2012	;101星期五
   308 00:FBE6: 43            	DB		43H   ;2015,2014	;110星期六
   309 00:FBE7: 0D            	DB		0DH   ;2017,2016
   310 00:FBE8: 21            	DB		21H   ;2019,2018
   311 00:FBE9: 5B            	DB		5BH   ;2021,2020
   312 00:FBEA: 06            	DB		06H   ;2023,2022
   313 00:FBEB: 39            	DB		39H   ;2025,2024
   314 00:FBEC: 54            	DB		54H   ;2027,2026
   315 00:FBED: 1E            	DB		1EH   ;2029,2028
   316 00:FBEE: 32            	DB		32H   ;2031,2030
   317 00:FBEF: 6C            	DB		6CH   ;2033,2032
   318 00:FBF0: 10            	DB		10H   ;2035,2034
   319 00:FBF1: 4A            	DB		4AH   ;2037,2036
   320 00:FBF2: 65            	DB		65H   ;2039,2038
   321 00:FBF3: 28            	DB		28H   ;2041,2040
   322 00:FBF4: 43            	DB		43H   ;2043,2042
   323 00:FBF5: 0D            	DB		0DH   ;2045,2044
   324 00:FBF6: 21            	DB		21H   ;2047,2046
   325 00:FBF7: 5B            	DB		5BH   ;2049,2048
   326 00:FBF8: 06            	DB		06H   ;2051,2050
   327 00:FBF9: 39            	DB		39H   ;2053,2052
   328 00:FBFA: 54            	DB		54H   ;2055,2054
   329 00:FBFB: 1E            	DB		1EH   ;2057,2056
   330 00:FBFC: 32            	DB		32H   ;2059,2058
   331 00:FBFD: 6C            	DB		6CH   ;2061,2060
   332 00:FBFE: 10            	DB		10H   ;2063,2062
   333 00:FBFF: 4A            	DB		4AH   ;2065,2064
   334 00:FC00: 65            	DB		65H   ;2067,2066
   335 00:FC01: 28            	DB		28H   ;2069,2068
   336 00:FC02: 43            	DB		43H   ;2071,2070
   337 00:FC03: 0D            	DB		0DH   ;2073,2072
   338 00:FC04: 21            	DB		21H   ;2075,2074
   339 00:FC05: 5B            	DB		5BH   ;2077,2076
   340 00:FC06: 06            	DB		06H   ;2079,2078
   341 00:FC07: 39            	DB		39H   ;2081,2080
   342 00:FC08: 54            	DB		54H   ;2083,2082
   343 00:FC09: 1E            	DB		1EH   ;2085,2084
   344 00:FC0A: 32            	DB		32H   ;2087,2086
   345 00:FC0B: 6C            	DB		6CH   ;2089,2088
   346 00:FC0C: 10            	DB		10H   ;2091,2090
   347 00:FC0D: 4A            	DB		4AH   ;2093,2092
   348 00:FC0E: 65            	DB		65H   ;2095,2094
   349 00:FC0F: 28            	DB		28H   ;2097,2096
   350 00:FC10: 43            	DB		43H   ;2099,2098
   351                        ;--------------------------------
   352                        T_Month_Week:
   353 00:FC11: 00            	DB		00H
   354 00:FC12: 00            	DB		00H   ;JANUARY		从1月1日开始，所以1月为0
   355 00:FC13: 33            	DB		33H   ;FABRUARY 	低4Bit为非闰年，高4Bit为闰年,
   356 00:FC14: 43            	DB		43H   ;MARCH		每4bit数字是前几个月全部的天数减去7的倍数的剩余天数
   357 00:FC15: 76            	DB		76H   ;APRIL
   358 00:FC16: 21            	DB		21H   ;MAY
   359 00:FC17: 54            	DB		54H   ;JUNE
   360 00:FC18: 76            	DB		76H   ;JULY
   361 00:FC19: 32            	DB		32H   ;AUGUST
   362 00:FC1A: 65            	DB		65H   ;SEPTEMBER
   363 00:FC1B: 10            	DB		10H   ;OCTOBER
   364 00:FC1C: 43            	DB		43H   ;NOVEMBER
   365 00:FC1D: 65            	DB		65H   ;DECEMBER
   365                        
   192                        .INCLUDE	Half_s\Alarm_Clock.asm
     1                        L_Alarm_Prog:;闹钟判断的时间是贪睡闹钟时间，而正常闹钟时间作为显示闹钟时间
     2 00:FC1E: 73 C9         	LDA		R_Alarm_Mode
     3 00:FC20: 13 56         	BEQ		L_Alarm_Prog_OUT
     4                        
     5 00:FC22: 73 B2         	LDA		R_Time_Sec
     6 00:FC24: 12 52         	BNE		L_Alarm_Prog_OUT
     7 00:FC26: 73 B3         	LDA		R_Time_Min
     8 00:FC28: 76 C6         	CMP		R_Alarm_Clock_Hr
     9 00:FC2A: 12 4C         	BNE		L_Alarm_Prog_OUT
    10 00:FC2C: 73 B3         	LDA		R_Time_Min
    11 00:FC2E: 76 C5         	CMP		R_Alarm_Clock_Min
    12 00:FC30: 12 46         	BNE		L_Alarm_Prog_OUT
    13                        
    14 00:FC32: 06            	CLD
    15 00:FC33: 73 CA         	LDA		R_Alarm_Clock_Mode
    16 00:FC35: 04            	CLC
    17 00:FC36: 18            	ROL
    18 00:FC37: 1B            	TAX
    19 00:FC38: 63 7A FC      	LDA		Table_2+1,X
    20 00:FC3B: 0A            	PHA
    21 00:FC3C: 63 79 FC      	LDA		Table_2,X
    22 00:FC3F: 0A            	PHA
    23 00:FC40: 09            	RTS
    24                        
    25                        
    26                        
    27                        
    28                        
    29                        L_Alarm_Once_Month_Prog:;一个月的闹钟	,定月闹钟
    30 00:FC41: 73 B6         	LDA		R_Time_Month
    31 00:FC43: 76 C8         	CMP		R_Alarm_Clock_Month
    32 00:FC45: 12 31         	BNE		L_Alarm_Prog_OUT
    33 00:FC47: 17 16         	BRA		L_Alarm_Control_Prog
    34                        L_Alarm_Every_Month_Prog;月次闹钟
    35 00:FC49: 73 B5         	LDA		R_Time_Day
    36 00:FC4B: 76 C7         	CMP		R_Alarm_Clock_Day
    37 00:FC4D: 12 29         	BNE		L_Alarm_Prog_OUT
    38 00:FC4F: 17 0E         	BRA		L_Alarm_Control_Prog
    39                        
    40                        L_Alarm_Once_Month_Day_Prog:;定日闹钟
    41 00:FC51: 73 B6         	LDA		R_Time_Month
    42 00:FC53: 76 C8         	CMP		R_Alarm_Clock_Month
    43 00:FC55: 12 21         	BNE		L_Alarm_Prog_OUT
    44 00:FC57: 73 B5         	LDA		R_Time_Day
    45 00:FC59: 76 C7         	CMP		R_Alarm_Clock_Day
    46 00:FC5B: 12 1B         	BNE		L_Alarm_Prog_OUT
    47 00:FC5D: 17 00         	BRA		L_Alarm_Control_Prog
    48                        
    49                        
    50                        
    51                        
    52                        
    53                        
    54                        L_Alarm_Control_Prog:
    55 00:FC5F: 73 C9         	LDA		R_Alarm_Mode
    56 00:FC61: 56 02         	CMP		#2
    57 00:FC63: 12 0A         	BNE		L_Alarm_Control_Prog_2
    58 00:FC65: 2F A7         	SMB7	Sys_Flag_C
    59 00:FC67: 53 07         	LDA		#D_Snz_Frequency
    60 00:FC69: 7F CC         	STA		R_Snz_Frequency
    61 00:FC6B: 53 05         	LDA		#D_Snz_Time
    62 00:FC6D: 7F CB         	STA		R_Snz_Time
    63                        L_Alarm_Control_Prog_2:
    64 00:FC6F: 34 A8 00      	BBR4	Sys_Flag_D,L_Alarm_Prog_1
    65                        	; JSR		L_Scankey_Close_Timer_Beep
    66                        
    67                        
    68                        L_Alarm_Prog_1:
    69 00:FC72: 2C A7         	SMB4	Sys_Flag_C
    70 00:FC74: 53 0F         	LDA		#D_Beep_Open_Last_Time_Alarm
    71 00:FC76: 7F D5         	STA		R_Close_Beep_Time
    72                        
    73                        
    74                        L_Alarm_Prog_OUT:
    75 00:FC78: 09            	RTS
    76                        
    77                        Table_2:
    78 00:FC79: 5E FC         	DW		L_Alarm_Control_Prog-1
    79 00:FC7B: 50 FC         	DW		L_Alarm_Once_Month_Day_Prog-1
    80 00:FC7D: 40 FC         	DW		L_Alarm_Once_Month_Prog-1
    81 00:FC7F: 48 FC         	DW		L_Alarm_Every_Month_Prog-1
    82                        ;=========================================================================================================
    83                        L_Update_Alarm_Clock_Min_Prog:;闹钟时间分钟更新加
    84 00:FC81: 5E 13         	LDX		#(R_Alarm_Clock_Min-Time_Str_Addr)
    85 00:FC83: 16 E2 FA      	JMP		L_Inc_To_60_Prog
    86                        ;---------------------------
    87                        L_Update_Alarm_Clock_Hr_Prog:;闹钟时间小时更新加
    88 00:FC86: 5E 14         	LDX		#(R_Alarm_Clock_Hr-Time_Str_Addr)
    89 00:FC88: 53 17         	LDA		#23
    90 00:FC8A: 16 E4 FA      	JMP		L_Inc_To_Any_Count_Prog
    91                        ;----------------------------------
    92                        L_Update_Alarm_Clock_Day_Prog:;闹钟时间天数更新加
    93 00:FC8D: 53 1F         	LDA		#31
    94 00:FC8F: 5E 15         	LDX		#(R_Alarm_Clock_Day-Time_Str_Addr)
    95 00:FC91: 16 FE FA      	JMP		L_Inc_To_Any_Count_Prog_To_1
    96                        ;-------------------------------------
    97                        L_Update_Alarm_Clock_Month_Prog:;闹钟时间月更新加
    98 00:FC94: 5E 16         	LDX		#(R_Alarm_Clock_Month-Time_Str_Addr)
    99 00:FC96: 53 0C         	LDA		#12
   100 00:FC98: 16 FE FA      	JMP		L_Inc_To_Any_Count_Prog_To_1
   100                        
   193                        .INCLUDE	Half_s\Timer.asm
     1                        ; L_Timer_Prog:
     2                            ; BBS4    Sys_Flag_D,L_Timer_Prog_OUT
     3                            ; BBR2    Sys_Flag_D,L_Timer_Prog_OUT;是否开始计时,根据标志位判断定时器是否开启
     4                            ; BBR0	Sys_Flag_D,L_Positive_Timer		;判断正计时,根据标志位判断正计时还是倒计时
     5                        	; BRA     L_Desitive_Timer		;判断倒计时
     6                        L_Positive_Timer:
     7 00:FC9B: 30 A8 17          BBR0    Sys_Flag_D,L_Timer_Prog_OUT
     8 00:FC9E: 15 B6 FC          JSR     L_Update_Timer_Sec_Prog
     9 00:FCA1: 10 12             BCC     L_Timer_Prog_OUT
    10 00:FCA3: 15 BB FC          JSR     L_Update_Timer_Min_Prog
    11 00:FCA6: 10 0D             BCC     L_Timer_Prog_OUT
    12 00:FCA8: 15 C0 FC          JSR     L_Update_Timer_Hr_Prog
    13 00:FCAB: 10 08             BCC     L_Timer_Prog_OUT
    14 00:FCAD: 53 00             LDA     #0
    15 00:FCAF: 7F BE             STA     R_Timer_Hr
    16 00:FCB1: 7F BD             STA     R_Timer_Min
    17 00:FCB3: 7F BC             STA     R_Timer_Sec;记满重启计时
    18                        L_Timer_Prog_OUT:
    19 00:FCB5: 09                RTS
    20                        L_Update_Timer_Sec_Prog:
    21 00:FCB6: 5E 0A             LDX     #(R_Timer_Sec-Time_Str_Addr)
    22 00:FCB8: 16 E2 FA          JMP     L_Inc_To_60_Prog
    23                        ;----------------------------------------------------
    24                        L_Update_Timer_Min_Prog:
    25 00:FCBB: 5E 0B             LDX     #(R_Timer_Min-Time_Str_Addr)
    26 00:FCBD: 16 E2 FA          JMP     L_Inc_To_60_Prog
    27                        ; ;----------------------------------------------------
    28                        L_Update_Timer_Hr_Prog:
    29 00:FCC0: 5E 0C             LDX     #(R_Timer_Hr-Time_Str_Addr)
    30 00:FCC2: 53 17             LDA     #23
    31 00:FCC4: 16 E4 FA          JMP     L_Inc_To_Any_Count_Prog
    32                        ;----------------------------------------------------
    33                        ;============================================================
    34                        L_Desitive_Timer:;倒计时
    35 00:FCC7: 3C A8 EB          BBS4    Sys_Flag_D,L_Timer_Prog_OUT
    36 00:FCCA: 31 A8 E8          BBR1    Sys_Flag_D,L_Timer_Prog_OUT
    37 00:FCCD: 15 01 FD          JSR     L_Update_Timer_Sec_Prog_Desitive
    38 00:FCD0: 11 E3             BCS     L_Timer_Prog_OUT
    39 00:FCD2: 15 FC FC          JSR     L_Update_Timer_Min_Prog_Desitive
    40 00:FCD5: 11 DE             BCS     L_Timer_Prog_OUT
    41 00:FCD7: 15 F5 FC          JSR     L_Update_Timer_Hr_Prog_Desitive
    42 00:FCDA: 11 D9             BCS     L_Timer_Prog_OUT
    43 00:FCDC: 34 A7 00          BBR4    Sys_Flag_C,L_Desitive_Timer_1
    44                            ; JSR     L_Scankey_Close_Alarm_Beep;如果此时存在闹铃闹钟，则执行关闭闹铃程序
    45                        L_Desitive_Timer_1:
    46 00:FCDF: 53 00             LDA     #0
    47 00:FCE1: 5E 0D             LDX     #(R_Timer_Sec_Countdown-Time_Str_Addr)
    48 00:FCE3: 6F 32 18          STA     Time_Addr,X
    49 00:FCE6: 0B                INX
    50 00:FCE7: 6F 32 18          STA     Time_Addr,X
    51 00:FCEA: 0B                INX
    52 00:FCEB: 6F 32 18          STA     Time_Addr,X
    53 00:FCEE: 2C A8             SMB4    Sys_Flag_D
    54 00:FCF0: 53 0F             LDA     #D_Beep_Open_Last_Time_Timer
    55 00:FCF2: 7F D5             STA     R_Close_Beep_Time
    56 00:FCF4: 09                RTS
    57                        ;=======================================
    58                        L_Update_Timer_Hr_Prog_Desitive:
    59 00:FCF5: 5E 0F         	LDX		#(R_Timer_Hr_Countdown-Time_Str_Addr)
    60 00:FCF7: 53 18         	LDA		#24
    61 00:FCF9: 16 18 FB      	JMP		L_Dec_To_0_Prog
    62                        ;----------------------------------------------------
    63                        L_Update_Timer_Min_Prog_Desitive:
    64 00:FCFC: 5E 0E         	LDX		#(R_Timer_Min_Countdown-Time_Str_Addr)
    65 00:FCFE: 16 16 FB      	JMP		L_Dec_To_60_Prog
    66                        ;----------------------------------------------------
    67                        L_Update_Timer_Sec_Prog_Desitive:
    68 00:FD01: 5E 0D         	LDX		#(R_Timer_Sec_Countdown-Time_Str_Addr)
    69 00:FD03: 16 16 FB      	JMP     L_Dec_To_60_Prog
    70                        ;----------------------------------------------------
    71                        
    72                        L_Update_Timer_Hr_Prog_Desitive_INC:
    73 00:FD06: 5E 0F         	LDX		#(R_Timer_Hr_Countdown-Time_Str_Addr)
    74 00:FD08: 53 17         	LDA		#23
    75 00:FD0A: 16 E4 FA      	JMP		L_Inc_To_Any_Count_Prog
    76                        ;----------------------------------------------------
    77                        L_Update_Timer_Min_Prog_Desitive_INC:
    78 00:FD0D: 5E 0E         	LDX		#(R_Timer_Min_Countdown-Time_Str_Addr)
    79 00:FD0F: 16 E2 FA      	JMP		L_Inc_To_60_Prog
    79                        
   194                        .INCLUDE	Half_s\Common.asm
     1                        L_Set_Mode_Auto_Exit:
     2 00:FD12: 33 A5 17      	BBR3	Sys_Flag_A,L_Set_Mode_Auto_Exit_OUT
     3 00:FD15: 73 A5         	LDA		Sys_Flag_A
     4 00:FD17: 51 14         	AND		#14H
     5 00:FD19: 12 11         	BNE		L_Set_Mode_Auto_Exit_OUT;长按和快加时不进行设置
     6 00:FD1B: 78 D0         	INC		R_Set_Mode_Exit_Time
     7 00:FD1D: 73 D0         	LDA		R_Set_Mode_Exit_Time
     8 00:FD1F: 56 0F         	CMP		#D_Set_Mode_Exit_Time
     9 00:FD21: 11 01         	BCS		L_Set_Mode_Auto_Exit_1
    10 00:FD23: 09            	RTS
    11                        L_Set_Mode_Auto_Exit_1:
    12 00:FD24: 23 A5         	RMB3	Sys_Flag_A
    13 00:FD26: 53 00         	LDA		#0
    14 00:FD28: 7F D0         	STA		R_Set_Mode_Exit_Time
    15 00:FD2A: 7F CE         	STA		R_Mode_Set
    16                        L_Set_Mode_Auto_Exit_OUT:
    17 00:FD2C: 09            	RTS
    18                        
    19                        L_Control_Light_Prog:
    20 00:FD2D: 53 02         	LDA		#D_Close_Light_Time
    21 00:FD2F: 7F D3         	STA		R_Close_Light_Time
    22                        	PB2_PB2_COMS
+   22 00:FD31: 20 0C          RMB0 PADF0
+   22 00:FD33: 2A 06          SMB2 PBTYPE
    23 00:FD35: 53 04         	LDA		#04H
    24 00:FD37: 7F 05         	STA		P_PB
    25 00:FD39: 09            	RTS
    26                        L_Control_Light_Auto_Exit_Prog:
    27 00:FD3A: 79 D3         	DEC		R_Close_Light_Time
    28 00:FD3C: 73 D3         	LDA		R_Close_Light_Time
    29 00:FD3E: 12 EC         	BNE		L_Set_Mode_Auto_Exit_OUT
    30                        	PB2_PB2_NOMS
+   30 00:FD40: 20 0C          RMB0 PADF0
+   30 00:FD42: 22 06          RMB2 PBTYPE
    31 00:FD44: 53 00         	LDA		#0
    32 00:FD46: 7F 05         	STA		P_PB
    33 00:FD48: 09            	RTS
    34                        L_Control_All_Dis_Prog:
    35 00:FD49: 53 02         	LDA		#D_Close_All_Dis
    36 00:FD4B: 7F D2         	STA		R_Close_All_Dis
    37 00:FD4D: 15 FB F0      	JSR		L_Dis_All_DisRam_Prog
    38 00:FD50: 53 00         	LDA		#0
    39 00:FD52: 7F CD         	STA		R_Mode
    40 00:FD54: 09            	RTS
    41                        
    42                        L_Control_All_Dis_Auto_Exit_Prog:
    43 00:FD55: 79 D2         	DEC		R_Close_All_Dis
    44 00:FD57: 73 D2         	LDA		R_Close_All_Dis
    45 00:FD59: 12 D1         	BNE		L_Set_Mode_Auto_Exit_OUT
    46 00:FD5B: 15 51 F6      	JSR		L_Display_Prog
    47                        	RTS
    47 00:FD5E: 09            
   195                        .INCLUDE	Half_s\Flash.asm
     1                        L_SysFlash_Prog:
     2 00:FD5F: 15 71 FD      	JSR		L_SysFlash_Prog_1
     3 00:FD62: 73 CD         	LDA		R_Mode
     4 00:FD64: 56 02         	CMP		#2
     5 00:FD66: 12 08         	BNE		L_SysFlash_Prog_OUT
     6 00:FD68: 38 A8 05      	BBS0	Sys_Flag_D,L_SysFlash_Prog_OUT
     7 00:FD6B: 5E 5B         	LDX		#lcd_col
     8 00:FD6D: 15 7B F4      	JSR		F_ClrpSymbol
     9                        L_SysFlash_Prog_OUT:
    10 00:FD70: 09            	RTS
    11                        ;===============================================
    12                        L_SysFlash_Prog_1:;设置模式时闪烁，快加不闪烁
    13 00:FD71: 3B A5 FC      	BBS3	Sys_Flag_A,L_SysFlash_Prog_OUT
    14 00:FD74: 3C A5 F9      	BBS4	Sys_Flag_A,L_SysFlash_Prog_OUT
    15 00:FD77: 06            	CLD
    16 00:FD78: 73 CD         	LDA		R_Mode
    17 00:FD7A: 04            	CLC
    18 00:FD7B: 18            	ROL
    19 00:FD7C: 1B            	TAX
    20 00:FD7D: 63 C4 FD      	LDA		Table_Clr_1+1,X
    21 00:FD80: 0A            	PHA
    22 00:FD81: 63 C3 FD      	LDA		Table_Clr_1,X
    23 00:FD84: 0A            	PHA
    24 00:FD85: 09            	RTS
    25                        
    26                        
    27                        
    28                        
    29                        
    30                        
    31                        L_Clr_Time_Normal_Prog:
    32 00:FD86: 73 CE         	LDA		R_Mode_Set
    33 00:FD88: 06            	CLD
    34 00:FD89: 04            	CLC
    35 00:FD8A: 18            	ROL
    36 00:FD8B: 1B            	TAX
    37 00:FD8C: 63 CE FD      	LDA		Table_Clr_2+1,X
    38 00:FD8F: 0A            	PHA
    39 00:FD90: 63 CD FD      	LDA		Table_Clr_2,X
    40 00:FD93: 0A            	PHA
    41 00:FD94: 09            	RTS
    42                        
    43                        L_Clr_Alarm_Normal_Prog:
    44 00:FD95: 73 CE         	LDA		R_Mode_Set
    45 00:FD97: 06            	CLD
    46 00:FD98: 04            	CLC
    47 00:FD99: 18            	ROL
    48 00:FD9A: 1B            	TAX
    49 00:FD9B: 63 DA FD      	LDA		Table_Clr_3+1,X
    50 00:FD9E: 0A            	PHA
    51 00:FD9F: 63 D9 FD      	LDA		Table_Clr_3,X
    52 00:FDA2: 0A            	PHA
    53 00:FDA3: 09            	RTS
    54                        
    55                        L_Clr_Positive_Timer_Normal_Prog:
    56 00:FDA4: 09            	RTS
    57                        
    58                        L_Clr_Another_Time_Normal_Prog:
    59 00:FDA5: 73 CE         	LDA		R_Mode_Set
    60 00:FDA7: 06            	CLD
    61 00:FDA8: 04            	CLC
    62 00:FDA9: 18            	ROL
    63 00:FDAA: 1B            	TAX
    64 00:FDAB: 63 E2 FD      	LDA		Table_Clr_4+1,X
    65 00:FDAE: 0A            	PHA
    66 00:FDAF: 63 E1 FD      	LDA		Table_Clr_4,X
    67 00:FDB2: 0A            	PHA
    68 00:FDB3: 09            	RTS
    69                        
    70                        L_Clr_Destive_Timer_Normal_Prog:
    71 00:FDB4: 73 CE         	LDA		R_Mode_Set
    72 00:FDB6: 06            	CLD
    73 00:FDB7: 04            	CLC
    74 00:FDB8: 18            	ROL
    75 00:FDB9: 1B            	TAX
    76 00:FDBA: 63 E6 FD      	LDA		Table_Clr_5+1,X
    77 00:FDBD: 0A            	PHA
    78 00:FDBE: 63 E5 FD      	LDA		Table_Clr_5,X
    79 00:FDC1: 0A            	PHA
    80 00:FDC2: 09            	RTS
    81                        
    82                        Table_Clr_1:
    83 00:FDC3: 85 FD         	DW		L_Clr_Time_Normal_Prog-1
    84 00:FDC5: 94 FD         	DW		L_Clr_Alarm_Normal_Prog-1
    85 00:FDC7: A3 FD         	DW		L_Clr_Positive_Timer_Normal_Prog-1
    86 00:FDC9: A4 FD         	DW		L_Clr_Another_Time_Normal_Prog-1
    87 00:FDCB: B3 FD         	DW		L_Clr_Destive_Timer_Normal_Prog-1
    88                        
    89                        Table_Clr_2:
    90 00:FDCD: 68 F9         	DW		L_Clr_Sec_Prog-1
    91 00:FDCF: 72 F9         	DW		L_Clr_Min_Prog-1
    92 00:FDD1: 7C F9         	DW		L_Clr_Hr_Prog-1
    93 00:FDD3: A8 F9         	DW		L_Clr_Year_Prog-1
    94 00:FDD5: 86 F9         	DW		L_Clr_Day_Prog-1
    95 00:FDD7: 90 F9         	DW		L_Clr_Month_Prog-1
    96                        
    97                        Table_Clr_3:
    98 00:FDD9: 72 F9         	DW		L_Clr_Min_Prog-1
    99 00:FDDB: 7C F9         	DW		L_Clr_Hr_Prog-1
   100 00:FDDD: 90 F9         	DW		L_Clr_Month_Prog-1
   101 00:FDDF: 86 F9         	DW		L_Clr_Day_Prog-1
   102                        
   103                        Table_Clr_4:
   104 00:FDE1: 72 F9         	DW		L_Clr_Min_Prog-1
   105 00:FDE3: 7C F9         	DW		L_Clr_Hr_Prog-1
   106                        
   107                        Table_Clr_5:
   108 00:FDE5: 72 F9         	DW		L_Clr_Min_Prog-1
   109 00:FDE7: 7C F9         	DW		L_Clr_Hr_Prog-1
   109                        
   196                        
   197                        .INCLUDE	Sound\Beep.asm
     1                        ;============================================================
     2                        L_control_Beep_prog:
     3 00:FDE9: 73 D6         	LDA		R_Voice_Unit;闹铃持续的次数时间
     4 00:FDEB: 13 08         	BEQ		L_control_Beep_prog_out
     5 00:FDED: 78 D4         	INC		R_Alarm_Clock_Open_Beep_Time
     6 00:FDEF: 73 D4         	LDA		R_Alarm_Clock_Open_Beep_Time
     7 00:FDF1: 56 02         	CMP		#2
     8 00:FDF3: 11 01         	BCS		L_Open_Beep_Prog
     9                        L_control_Beep_prog_out:
    10 00:FDF5: 09            	RTS
    11                        
    12                        
    13                        ; ;---------------------------------------------------------------------
    14                        L_Open_Beep_Prog:
    15 00:FDF6: 53 00         	LDA		#0
    16 00:FDF8: 7F D4         	STA		R_Alarm_Clock_Open_Beep_Time
    17                        
    18 00:FDFA: 37 16 13      	BBR7	P_TMRCTRL,L_Open_Beep_Prog_1
    19 00:FDFD: 79 D6         	DEC		R_Voice_Unit
    20 00:FDFF: 53 00         	LDA		#$00
    21 00:FE01: 7F 1F         	STA		P_AUD
    22 00:FE03: 27 16         	RMB7	P_TMRCTRL	;关闭声音输出
    23 00:FE05: 20 1D         	RMB0	P_SYSCLK ;Weak
    24                        	PB3_PB3_NOMS
+   24 00:FE07: 21 0C          RMB1 PADF0
+   24 00:FE09: 23 06          RMB3 PBTYPE
    25 00:FE0B: 53 00         	LDA		#0
    26 00:FE0D: 7F 05         	STA		P_PB
    27 00:FE0F: 09            	RTS
    28                        ;--------------------------------------
    29                        L_Open_Beep_Prog_1:
    30                        	PB3_PWM
+   30 00:FE10: 29 0C          SMB1 PADF0
+   30 00:FE12: 2B 06          SMB3 PBTYPE
    31 00:FE14: 53 00         	LDA		#$00
    32 00:FE16: 7F 18         	STA		P_DIVC
    33 00:FE18: 28 1D         	SMB0	P_SYSCLK ;STRONG
    34 00:FE1A: 53 FF         	LDA		#$FF
    35 00:FE1C: 7F 1F         	STA		P_AUD
    36 00:FE1E: 2F 16         	SMB7	P_TMRCTRL	;打开声音输
    37 00:FE20: 09            	RTS
    38                        ;==========================================
    39                        L_Scankey_Short_ST_SP_Press_Prog_Alarm:
    40 00:FE21: 2D A5         	SMB5	Sys_Flag_A
    41 00:FE23: 3C A8 11      	BBS4	Sys_Flag_D,L_Scankey_Close_Timer_Beep
    42                        ;====================================================
    43                        L_Scankey_Close_Alarm_Beep:
    44 00:FE26: 73 A7         	LDA		Sys_Flag_C
    45 00:FE28: 51 10         	AND		#10h
    46 00:FE2A: 13 0A         	BEQ		L_Scankey_Close_Alarm_Beep_OUT
    47 00:FE2C: 27 16         	RMB7	P_TMRCTRL
    48 00:FE2E: 53 00         	LDA		#0
    49 00:FE30: 7F D6         	STA		R_Voice_Unit
    50 00:FE32: 7F D5         	STA		R_Close_Beep_Time
    51 00:FE34: 24 A7         	RMB4	Sys_Flag_C
    52                        L_Scankey_Close_Alarm_Beep_OUT:
    53 00:FE36: 09            	RTS
    54                        ;==========================================
    55                        L_Scankey_Close_Timer_Beep:
    56 00:FE37: 73 A8         	LDA		Sys_Flag_D
    57 00:FE39: 51 10         	AND		#10h
    58 00:FE3B: 13 F9         	BEQ		L_Scankey_Close_Alarm_Beep_OUT
    59 00:FE3D: 27 16         	RMB7	P_TMRCTRL
    60 00:FE3F: 53 00         	LDA		#0
    61 00:FE41: 7F D6         	STA		R_Voice_Unit
    62 00:FE43: 7F D5         	STA		R_Close_Beep_Time
    63                        
    64 00:FE45: 7F A8         	STA		Sys_Flag_D
    65 00:FE47: 73 C4         	LDA		R_Timer_Hr_Backup
    66 00:FE49: 7F BE         	STA		R_Timer_Hr
    67 00:FE4B: 73 C3         	LDA		R_Timer_Min_Backup
    68 00:FE4D: 7F BD         	STA		R_Timer_Min
    69 00:FE4F: 53 00         	LDA		#0
    70 00:FE51: 7F C2         	STA		R_Timer_Sec_Backup
    71 00:FE53: 7F BF         	STA		R_Timer_Sec_Countdown
    72 00:FE55: 15 8A F6      	JSR		L_Display_Postive_Timer_Prog
    73 00:FE58: 09            	RTS
    74                        
    75                        
    76                        
    77                        
    78                        
    79                        
    80                        
    81                        L_control_Beep_prog_Auto:;多久自动退出响闹,如果没有则按每秒给值
    82 00:FE59: 73 A8         	LDA		Sys_Flag_D
    83 00:FE5B: 70 A7         	ORA		Sys_Flag_C
    84 00:FE5D: 51 10         	AND		#10H
    85 00:FE5F: 13 D5         	BEQ		L_Scankey_Close_Alarm_Beep_OUT
    86 00:FE61: 53 04         	LDA		#4
    87 00:FE63: 7F D6         	STA		R_Voice_Unit
    88                        	EN_LCD_IRQ
+   88 00:FE65: 2E 0E          SMB6 IER
    89 00:FE67: 79 D5         	DEC		R_Close_Beep_Time
    90 00:FE69: 73 D5         	LDA		R_Close_Beep_Time;定时器
    91 00:FE6B: 13 B4         	BEQ		L_Scankey_Short_ST_SP_Press_Prog_Alarm
    92 00:FE6D: 09                RTS
    92                        
   198                        
   199                        .INCLUDE	Delay.asm
     1                        ;============================================================
     2                        L_ScanKey_Delay_Prog:    ;延时功能
     3 00:FE6E: 53 FE         	LDA		#$FE
     4 00:FE70: 7F D7         	STA		P_Temp
     5                        L_Loop_ScanKey_Delay:
     6 00:FE72: 78 D7         	INC		P_Temp
     7 00:FE74: 73 D7         	LDA		P_Temp
     8 00:FE76: 12 FA         	BNE		L_Loop_ScanKey_Delay
     9 00:FE78: 09            	RTS
    10                        L_Beep_1s:    ;响一声
    11 00:FE79: 53 01         	LDA		#1
    12 00:FE7B: 7F D6         	STA		R_Voice_Unit
    13                        	EN_LCD_IRQ
+   13 00:FE7D: 2E 0E          SMB6 IER
    14 00:FE7F: 09            	RTS
    15                        L_Beep_2s:    ;响一声
    16 00:FE80: 53 02         	LDA		#2
    17 00:FE82: 7F D6         	STA		R_Voice_Unit
    18                        	EN_LCD_IRQ
+   18 00:FE84: 2E 0E          SMB6 IER
    19                        	RTS
    19 00:FE86: 09            
   200                        
   201                        ;--------------------------------------------------------
   202                        ;***********************************************************************
   203 00:FE87: FF FF FF FF   	.BLKB	$FFFF-$,$FF
   203 00:FE87: FF FF FF FF   
   203 00:FE87: FF FF FF FF   
   204                        
   205                        	.ORG	0FFF8H
   206                        
   207 00:FFF8: 9D            	DB		10011101B	;
   208                        ; bit0 	=0
   209                        ; bit1	=0
   210                        ; bit2 	=0当PA7做复位时，只能写1低电平有效，高电平有效烧录会报错
   211                        ; bit3	=0PA口做输入下拉和输入上拉，1PA口做输入下拉和三态
   212                        ; bit4 	=0
   213                        ; bit5 	=0
   214                        ; bit6	=0VDD=1.5V,1 VDD=3V
   215                        ; bit7	=0做复位，1做PA7口
   216 00:FFF9: FF            	DB		11111111B	;
   217                        
   218                        ;***********************************************************************
   219                        	.ORG	0FFFCH
   220 00:FFFC: 00 F0         	DW		V_RESET
   221 00:FFFE: AF F0         	DW		V_IRQ
   222                        
   223                        	.ENDS
   224                        	.END

 --------------------
      Warnings:0
      Errors  :0
